(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{125:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return w})),n.d(t,"metadata",(function(){return g})),n.d(t,"toc",(function(){return j})),n.d(t,"default",(function(){return L}));var a={};n.r(a),n.d(a,"Root",(function(){return v}));var o=n(3),r=n(7),u=n(0),s=n.n(u),i=n(186),c=n(206),l=n(599),d=n(603),p=n(839),m=n(833),b=n(693),x=function(e,t,n,a){return new(n||(n=Promise))((function(o,r){function u(e){try{i(a.next(e))}catch(t){r(t)}}function s(e){try{i(a.throw(e))}catch(t){r(t)}}function i(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,s)}i((a=a.apply(e,t||[])).next())}))},f=function(e,t){var n,a,o,r,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,a=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(s){r=[6,s],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},R=Object(l.a)({id:"atom",defaultValue:10}),h=Object(d.b)({id:"asyncCompute",get:function(e){var t=e.get;return x(void 0,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,(n=2e3,new Promise((function(e){return setTimeout(e,n)})))];case 1:return e.sent(),[2,t(R)]}var n}))}))}}),v=function(){return s.a.createElement(p.a,null,s.a.createElement(y,null))},y=function(){var e=Object(m.k)(h),t=Object(m.d)(h);return s.a.createElement("div",{style:{}},s.a.createElement("div",null,Object(b.b)(e.status)?"\u52a0\u8f7d\u4e2d...":e.content),s.a.createElement("button",{onClick:function(){t()}},"\u91cd\u7f6e"))},w={id:"useRdxValueLoader",title:"useRdxValueLoader(state)"},g={unversionedId:"api/useRdxValueLoader",id:"api/useRdxValueLoader",isDocsHomePage:!1,title:"useRdxValueLoader(state)",description:"\u4f1a\u6839\u636e\u5f53\u524d\u53c2\u6570\u7684 RdxState \u6765\u8fd4\u56de RdxState \u7684\u503c\uff0c\u72b6\u6001\u548c\u8bbe\u7f6e\u5668,\uff0c\u5e76\u4e14\u8fd9\u4e2a hooks \u5c06\u4f1a\u8ba2\u9605\u8fd9\u4e2a RdxState \u7684\u503c\u7684\u53d8\u5316\u548c\u503c\u7684\u52a0\u8f7d\u72b6\u6001\u3002",source:"@site/docs/api/useRdxValueLoader.mdx",slug:"/api/useRdxValueLoader",permalink:"/rdx-doc/docs/api/useRdxValueLoader",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/api/useRdxValueLoader.mdx",version:"current",sidebar:"someSidebar",previous:{title:"useRdxValue(state)",permalink:"/rdx-doc/docs/api/useRdxValue"},next:{title:"useRdxSetter(state)",permalink:"/rdx-doc/docs/api/useRdxSetter"}},j=[{value:"Example",id:"example",children:[]}],V={toc:j};function L(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(o.a)({},V,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"\u4f1a\u6839\u636e\u5f53\u524d\u53c2\u6570\u7684 RdxState \u6765\u8fd4\u56de RdxState \u7684\u503c\uff0c\u72b6\u6001\u548c\u8bbe\u7f6e\u5668,\uff0c\u5e76\u4e14\u8fd9\u4e2a hooks \u5c06\u4f1a\u8ba2\u9605\u8fd9\u4e2a RdxState \u7684\u503c\u7684\u53d8\u5316\u548c\u503c\u7684\u52a0\u8f7d\u72b6\u6001\u3002"),Object(i.b)("hr",null),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx"}),"function useRdxValueLoader<GModel>(state: RdxState<GModel>): LoaderValue<GModel>;\ninterface LoaderValue<GModel> {\n  status: Status,\n  content?:  GModel\n  errorMsg?: string\n}\nenum Status {\n  Running = 'Running',\n  Finish = 'Finish',\n  Waiting = 'Watting',\n  IDeal = 'IDeal',\n  Error = 'Error',\n}\n")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"state: \u53ef\u662f\u662f\u4e00\u4e2a atom \u6216\u8005\u662f\u4e00\u4e2a compute.")),Object(i.b)("hr",null),Object(i.b)("h3",{id:"example"},"Example"),Object(i.b)(c.a,{code:"import React from 'react';\nimport {\n  compute,\n  RdxContext,\n  useRdxStateLoader,\n  Status,\n  atom,\n  useRdxValue,\n  useRdxValueLoader,\n  useRdxReset,\n  useRdxRefresh,\n  isLoading,\n} from '@alife/rdx';\nconst pause = (t: number) => new Promise((resolve) => setTimeout(resolve, t));\nconst state = atom({\n  id: 'atom',\n  defaultValue: 10,\n});\nconst asyncCompute = compute({\n  id: 'asyncCompute',\n  get: async ({ get }) => {\n    await pause(2000);\n    return get(state);\n  },\n});\n\nexport const Root = () => {\n  return (\n    <RdxContext>\n      <Counter />\n    </RdxContext>\n  );\n};\nconst Counter = () => {\n  const state = useRdxValueLoader(asyncCompute);\n  const reset = useRdxRefresh(asyncCompute);\n  return (\n    <div style={{}}>\n      <div>{isLoading(state.status) ? '\u52a0\u8f7d\u4e2d...' : state.content}</div>\n      <button\n        onClick={() => {\n          reset();\n        }}\n      >\n        \u91cd\u7f6e\n      </button>\n    </div>\n  );\n};\n",example:a,mdxType:"ExampleCustomizer"}))}L.isMDXComponent=!0}}]);