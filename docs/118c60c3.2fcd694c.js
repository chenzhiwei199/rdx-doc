(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{119:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(0),o=n.n(r),a=n(133),l=n(134),c=n(135),i=n(120),s=n(127),u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l};function m(e){var t,n,r=e.language,a=e.replace,l=e.section,c=e.source;if("object"==typeof c&&"default"in c&&(c=c.default),l){var i=new RegExp("// <"+l+">\\s([\\s\\S]*?)\\s// </"+l+">\\s","g");c=c.split(i).reduce((function(e,t,n){return n%2==0?e:e+"\n\n"+t}),"")}if(c=c.replace(/\/\/ <.*?\n/g,""),a)try{for(var m=u(Object.entries(a)),p=m.next();!p.done;p=m.next()){var f=d(p.value,2),g=(i=f[0],f[1]);c=c.replace(new RegExp(i,"gs"),g)}}catch(b){t={error:b}}finally{try{p&&!p.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}return(c=c.trim()).includes("\n")||(c+="\n"),o.a.createElement("div",{style:{maxHeight:400,overflow:"auto"}},o.a.createElement(s.a.pre,null,o.a.createElement(s.a.code,{children:c,className:"language-"+r,mdxType:"code",originalType:"code",parentName:"pre"})))}var p=n(114),f=n.n(p),g=n(47),b=n.n(g),y=function(){return(y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function h(e){var t=e.active,n=e.icon,r=e.tooltipText,a=v(e,["active","icon","tooltipText"]);return o.a.createElement("span",y({},a,{className:f()(b.a.tooltip,b.a.item,t&&b.a.active)}),r&&o.a.createElement("span",{className:b.a["tooltip-text"]},r),n)}function x(e){var t=e.activeToggle,n=e.items,r=e.onClick,a=e.children;return o.a.createElement("section",{style:{position:"relative"},className:f()(b.a.toggler,b.a.header)},o.a.createElement("div",{style:{position:"absolute",left:0}},a),n.map((function(e,n){return o.a.createElement(h,y({active:t===n,key:n,onClick:function(){return r(n)}},e))})))}var C,E=(C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),j=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasError:!1},n}return E(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0}},t.prototype.componentDidCatch=function(e,t){},t.prototype.render=function(){return this.state.hasError?o.a.createElement("h1",null,"Something went wrong."):this.props.children},t}(o.a.Component),O=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},w=function(e){var t=e.code,n=Object(i.getParameters)({files:{"App.tsx":{content:t,isBinary:!1},"index.tsx":{content:'\nimport * as React from "react";\nimport { render } from "react-dom";\nimport * as App from "./App";\nconst rootElement = document.getElementById("root");\nfunction Main() {\n  return (\n    <div>\n      {Object.keys(App).map((item) => {\n        const Component = App[item];\n        return (\n          <div>\n            <h3>{item}</h3>\n            <Component />\n          </div>\n        );\n      })}\n    </div>\n  );\n}\nrender(<Main />, rootElement);\n        ',isBinary:!1},"index.html":{content:'\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta content="text/html; charset=utf-8" http-equiv="Content-type" />\n    <title>React Code Snippet Demo</title>\n  </head>\n  <body>\n    <div id="root" style="margin:20px"></div>\n  </body>\n</html>\n        ',isBinary:!1},"package.json":{content:'\n        {\n          "name": "rdx-sample",\n          "version": "1.0.0",\n          "description": "React and TypeScript example starter project",\n          "keywords": [\n            "typescript",\n            "react",\n            "starter"\n          ],\n          "main": "src/index.tsx",\n          "dependencies": {\n            "@alife/rdx": "0.x",\n            "react": "^16.12.0",\n            "react-dom": "^16.12.0",\n            "react-color": "^2.17.0",\n            "react-scripts": "3.3.0"\n          },\n          "devDependencies": {\n            "@types/react": "16.9.19",\n            "@types/react-dom": "16.9.5",\n            "typescript": "^4.1.0-beta"\n          },\n          "scripts": {\n            "start": "react-scripts start",\n            "build": "react-scripts build",\n            "test": "react-scripts test --env=jsdom",\n            "eject": "react-scripts eject"\n          },\n          "browserslist": [\n            ">0.2%",\n            "not dead",\n            "not ie <= 11",\n            "not op_mini all"\n          ]\n        }',isBinary:!1}}});return o.a.createElement("a",{style:{display:"flex",justifyContent:"center",alignItems:"center"},target:"_blank",href:"https://codesandbox.io/api/v1/sandboxes/define?parameters="+n},o.a.createElement(a.a,{size:24,color:"#23a3ff"}),o.a.createElement("div",{style:{color:"#23a3ff",marginLeft:12}},"Go To Codesandbox"))},S=[{icon:o.a.createElement(l.a,null),name:"Example",tooltipText:"Show example"},{icon:o.a.createElement(c.a,null),name:"Code",tooltipText:"Show source code"}];function k(e){var t=e.code,n=e.example,a=Object(r.useCallback)((function(e){switch(e.name){case"Code":return o.a.createElement(m,{language:"ts",source:t});case"Example":return o.a.createElement(o.a.Fragment,null,Object.keys(n).filter((function(e){return"default"!==e})).map((function(e){var t=n[e];return o.a.createElement("div",{key:e},o.a.createElement("h3",null,e),o.a.createElement(t,null))})));default:return null}}),[]),l=O(o.a.useState(0),2),c=l[0],i=l[1];return o.a.createElement("div",{style:{boxShadow:"rgba(0, 0, 0, 0.1) 0px 1px 2px 0px",borderRadius:"4px",padding:12,border:"1px solid lightgrey",marginBottom:12}},o.a.createElement(j,null,o.a.createElement(x,{activeToggle:c,onClick:function(e){i(e)},items:S},o.a.createElement(w,{code:t})),o.a.createElement(a,{name:S[c].name})))}},91:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return O})),n.d(t,"metadata",(function(){return w})),n.d(t,"rightToc",(function(){return S})),n.d(t,"default",(function(){return R}));var r={};n.r(r),n.d(r,"AtomBgControlSample",(function(){return x}));var o=n(2),a=n(6),l=n(0),c=n.n(l),i=n(118),s=n(119),u=n(490),d=n(492),m=n(666),p=n(363),f=n(427),g=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return l},b=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e},y=Object(u.a)({id:"color",defaultValue:"rgba(255,255,255,1)"}),v=Object(d.a)({id:"contrast-color",get:function(e){var t=e.get,n=t(y).replace(/[rgba\(\)]/g,"").split(",");return"rgba("+b(n.slice(0,3).map((function(e){return 255-Number(e)})),[n[3]]).join(",")+")"}}),h=Object(d.a)({id:"highlight-color",get:function(e){var t=e.get,n=t(y).replace(/[rgba?\(\)]/g,"").split(",");return.213*Number(n[0])+.715*Number(n[1])+.072*Number(n[2])>127.5?"rgba(0,0,0,1)":"rgba(255,255,255,1)"}}),x=function(){return c.a.createElement(m.a,null,c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(C,null),c.a.createElement(j,null)))},C=function(){var e=Object(p.j)(y),t=Object(p.j)(v),n=Object(p.j)(h);return c.a.createElement("div",null,c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("div",{style:{width:435,height:435,background:e,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"1px solid grey"}},c.a.createElement("h3",{style:{color:t}},"\u53cd\u8f6c\u989c\u8272"),c.a.createElement("h3",{style:{color:n}},"\u6839\u636e\u660e\u6697")),c.a.createElement("div",{style:{position:"absolute",top:10,left:10}},c.a.createElement(E,null))))},E=function(){var e=Object(p.e)(y);return c.a.createElement("div",null,c.a.createElement("div",{style:{display:"flex"}},["rgba(255,255,255, 1)","rgba(0,0,0, 1)"].map((function(t){return c.a.createElement("div",{onClick:function(){e(t)},style:{marginLeft:12,border:"1px solid grey",background:t,width:32,height:32,borderRadius:"50%"}})}))),c.a.createElement("div",{style:{color:"orange"}},"\u70b9\u51fb\u6211\u53ef\u4ee5\u5207\u6362\u753b\u5e03\u989c\u8272\u54e6!!"))},j=function(){var e=g(Object(p.f)(y),2),t=e[0],n=e[1];return c.a.createElement(f.a,{color:t,onChange:function(e){var t=e.rgb,r=t.a,o=t.r,a=t.g,l=t.b;n("rgba("+o+","+a+","+l+","+r)}})},O={id:"Compute",title:"Compute"},w={unversionedId:"tutorial/Compute",id:"tutorial/Compute",isDocsHomePage:!1,title:"Compute",description:"compute \u4ee3\u8868\u7740\u4e00\u4e2a\u884d\u751f\u72b6\u6001\u3002\u884d\u751f\u72b6\u6001\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u7eaf\u51fd\u6570\u6765\u8ba1\u7b97\u51fa\u4e00\u4e2a\u65b0\u7684\u72b6\u6001\u3002",source:"@site/docs/tutorial/compute.mdx",slug:"/tutorial/Compute",permalink:"/rdx-doc/docs/tutorial/Compute",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/tutorial/compute.mdx",version:"current",sidebar:"someSidebar",previous:{title:"Atom",permalink:"/rdx-doc/docs/tutorial/Atom"},next:{title:"RdxContext",permalink:"/rdx-doc/docs/api/RdxContext"}},S=[{value:"\u901a\u8fc7compute\u8ba1\u7b97\u884d\u751f\u72b6\u6001",id:"\u901a\u8fc7compute\u8ba1\u7b97\u884d\u751f\u72b6\u6001",children:[]}],k={rightToc:S};function R(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(o.a)({},k,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"compute \u4ee3\u8868\u7740\u4e00\u4e2a\u884d\u751f\u72b6\u6001\u3002\u884d\u751f\u72b6\u6001\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u7eaf\u51fd\u6570\u6765\u8ba1\u7b97\u51fa\u4e00\u4e2a\u65b0\u7684\u72b6\u6001\u3002"),Object(i.b)("h3",{id:"\u901a\u8fc7compute\u8ba1\u7b97\u884d\u751f\u72b6\u6001"},"\u901a\u8fc7compute\u8ba1\u7b97\u884d\u751f\u72b6\u6001"),Object(i.b)("p",null,"\u901a\u8fc7compute()\u65b9\u6cd5\u6765\u5efa\u7acb\u4e00\u4e2a\u8ba1\u7b97\u8282\u70b9\uff0c\u8ba1\u7b97\u8282\u70b9\u9700\u8981\u4e00\u4e2a\u552f\u4e00\u7684id\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbe\u7f6eget \u548c set\u7684\u7eaf\u51fd\u6570\u3002"),Object(i.b)("p",null,"get\u51fd\u6570\u4e2d\u53ef\u4ee5\u901a\u8fc7get\u65b9\u6cd5\u83b7\u53d6atom\u8282\u70b9\u6216\u8005\u5176\u4ed6compute\u8282\u70b9\u7684\u6570\u636e\u3002\u8fd9\u91cc\u901a\u8fc7get\u51fd\u6570\u83b7\u53d6ColorAtom\u4e2d\u7684\u914d\u7f6e\u7684\u989c\u8272\uff0c\u5e76\u8ba1\u7b97\u76f8\u53cd\u7684\u989c\u8272, \u8ba9\u6587\u5b57\u7684\u5c55\u793a\u989c\u8272\u53ef\u4ee5\u5feb\u901f\u7684\u6839\u636e\u80cc\u666f\u989c\u8272\u8fdb\u884c\u53d8\u5316\u3002"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx"}),"const ColorAtom = atom({\n  id: 'color',\n  defaultValue: 'rgba(255,255,255,1)',\n});\n\nconst  ContrastColor= compute({\n  id: 'contrast-color',\n  get: ({ get }) => {\n    const color = get(ColorAtom);\n    const rgba = color.replace(/[rgba\\(\\)]/g, '').split(',');\n    const colorContrast = `rgba(${[\n      ...rgba\n        .slice(0, 3)\n        .map(item => (255 - Number(item))),\n      rgba[3],\n    ].join(',')})`\n    return colorContrast;\n  },\n});\n")),Object(i.b)(s.a,{code:"import React from 'react';\nimport {\n  atom,\n  compute,\n  RdxContext,\n  useRdxSetter,\n  useRdxState,\n  useRdxValue,\n} from '@alife/rdx';\nimport { SketchPicker } from 'react-color';\nconst ColorAtom = atom({\n  id: 'color',\n  defaultValue: 'rgba(255,255,255,1)',\n});\n\nconst ContrastColor = compute({\n  id: 'contrast-color',\n  get: ({ get }) => {\n    const color = get(ColorAtom);\n    const rgba = color.replace(/[rgba\\(\\)]/g, '').split(',');\n    const colorContrast = `rgba(${[\n      ...rgba.slice(0, 3).map((item) => 255 - Number(item)),\n      rgba[3],\n    ].join(',')})`;\n    return colorContrast;\n  },\n});\n\nconst HighLightColor = compute({\n  id: 'highlight-color',\n  get: ({ get }) => {\n    const color = get(ColorAtom);\n    const rgba = color.replace(/[rgba?\\(\\)]/g, '').split(',');\n    // https://juejin.im/post/6844903960487149582\n    return 0.213 * Number(rgba[0]) +\n      0.715 * Number(rgba[1]) +\n      0.072 * Number(rgba[2]) >\n      255 / 2\n      ? 'rgba(0,0,0,1)'\n      : 'rgba(255,255,255,1)';\n  },\n});\nexport const AtomBgControlSample = () => {\n  return (\n    <RdxContext>\n      <div style={{ display: 'flex' }}>\n        <Canvas />\n        <ColorEditor />\n      </div>\n    </RdxContext>\n  );\n};\n\nconst Canvas = () => {\n  const color = useRdxValue(ColorAtom);\n  const contrastColor = useRdxValue(ContrastColor);\n  const highlightColor = useRdxValue(HighLightColor);\n  return (\n    <div>\n      <div style={{ position: 'relative' }}>\n        <div\n          style={{\n            width: 435,\n            height: 435,\n            background: color,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            border: '1px solid grey',\n          }}\n        >\n          <h3 style={{ color: contrastColor }}>\u53cd\u8f6c\u989c\u8272</h3>\n          <h3 style={{ color: highlightColor }}>\u6839\u636e\u660e\u6697</h3>\n        </div>\n\n        <div style={{ position: 'absolute', top: 10, left: 10 }}>\n          <ThemeEditor />\n        </div>\n      </div>\n    </div>\n  );\n};\nconst ThemeEditor = () => {\n  const setColor = useRdxSetter(ColorAtom);\n  const dataSource = ['rgba(255,255,255, 1)', 'rgba(0,0,0, 1)'];\n  return (\n    <div>\n      <div style={{ display: 'flex' }}>\n        {dataSource.map((item) => (\n          <div\n            onClick={() => {\n              setColor(item);\n            }}\n            style={{\n              marginLeft: 12,\n              border: '1px solid grey',\n              background: item,\n              width: 32,\n              height: 32,\n              borderRadius: '50%',\n            }}\n          ></div>\n        ))}\n      </div>\n      <div style={{ color: 'orange' }}>\u70b9\u51fb\u6211\u53ef\u4ee5\u5207\u6362\u753b\u5e03\u989c\u8272\u54e6!!</div>\n    </div>\n  );\n};\n\nconst ColorEditor = () => {\n  const [color, setColor] = useRdxState(ColorAtom);\n  return (\n    <SketchPicker\n      color={color}\n      onChange={(v) => {\n        const { a, r, g, b } = v.rgb;\n        setColor(`rgba(${r},${g},${b},${a}`);\n      }}\n    />\n  );\n};\n",example:r,mdxType:"ExampleCustomizer"}))}R.isMDXComponent=!0}}]);