(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{125:function(t,e,n){"use strict";n.r(e),n.d(e,"frontMatter",(function(){return v})),n.d(e,"metadata",(function(){return R})),n.d(e,"toc",(function(){return O})),n.d(e,"default",(function(){return y}));var o={};n.r(o),n.d(o,"Root",(function(){return w}));var a=n(3),r=n(7),i=n(0),l=n.n(i),u=n(201),c=n(219),s=n(600),d=n(899),m=n(892),p=n(714),b=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,r=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},f=Object(s.a)({id:"amount",defaultValue:1}),x=Object(s.a)({id:"unit",defaultValue:1}),w=function(){return l.a.createElement(d.a,null,l.a.createElement(j,{atom:f,title:"\u6570\u91cf"}),l.a.createElement(j,{atom:x,title:"\u5355\u4ef7"}),l.a.createElement(S,null))},S=function(){var t=b(Object(m.h)(Object(p.d)([f,x])),2),e=b(t[0],2),n=e[0],o=e[1],a=t[1];return l.a.createElement("div",null,l.a.createElement("strong",null,"\u6570\u7ec4\u5f62\u5f0f\u53c2\u6570:"),l.a.createElement("button",{onClick:function(){a()}},"\u70b9\u6211\u66f4\u65b0\u72b6\u6001"),n*o)},j=function(t){t.title;var e=t.atom,n=b(Object(m.h)(e),2),o=n[0],a=n[1];return l.a.createElement("div",{style:{display:"flex",width:200}},l.a.createElement("strong",null,"title "),l.a.createElement("button",{onClick:function(){a(o+1)}},"+"),l.a.createElement("span",null,o),l.a.createElement("button",{onClick:function(){a((function(t){return t-1}))}},"-"))},v={id:"waitForSetter",title:"waitForSetter"},R={unversionedId:"api/waitForSetter",id:"api/waitForSetter",isDocsHomePage:!1,title:"waitForSetter",description:"\u901a\u8fc7\u4f20\u9012\u4e00\u4e2a\u6216\u591a\u4e2aatom\u6216\u8005compute\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u884d\u751f\u72b6\u6001\uff0c\u8fd9\u4e2a\u884d\u751f\u72b6\u6001\u53ef\u4ee5\u901a\u8fc7set\u65b9\u6cd5\u6765\u63a7\u5236\u662f\u5426\u66f4\u65b0\u72b6\u6001\u3002",source:"@site/docs/api/waitForSetter.mdx",slug:"/api/waitForSetter",permalink:"/rdx-doc/docs/api/waitForSetter",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/api/waitForSetter.mdx",version:"current",sidebar:"someSidebar",previous:{title:"waitForAll",permalink:"/rdx-doc/docs/api/waitForAll"},next:{title:"waitForAll(dependencies)",permalink:"/rdx-doc/docs/utils/waitForAll"}},O=[],F={toc:O};function y(t){var e=t.components,n=Object(r.a)(t,["components"]);return Object(u.b)("wrapper",Object(a.a)({},F,n,{components:e,mdxType:"MDXLayout"}),Object(u.b)("p",null,"\u901a\u8fc7\u4f20\u9012\u4e00\u4e2a\u6216\u591a\u4e2aatom\u6216\u8005compute\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u884d\u751f\u72b6\u6001\uff0c\u8fd9\u4e2a\u884d\u751f\u72b6\u6001\u53ef\u4ee5\u901a\u8fc7set\u65b9\u6cd5\u6765\u63a7\u5236\u662f\u5426\u66f4\u65b0\u72b6\u6001\u3002"),Object(u.b)("hr",null),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-jsx"},"function waitForSetter<T extends TMixedRdxValue>(\n  dependencies: T,\n  options?: {\n    // \u9996\u6b21\u662f\u5426\u66f4\u65b0\u72b6\u6001\n    triggerFirst?: boolean;\n    // \u5f53\u91cd\u7f6e\u7684\u65f6\u5019\uff0c\u662f\u5426\u8c03\u7528set\u65b9\u6cd5\n    callSetWhenReset?: boolean;\n  }\n): T extends RdxValue<infer P>\n  ? RdxState<P>\n  : RdxState<{ [P in keyof T]: UnwrapRdxValue<T[P]> }>;\n")),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},"dependencies: \u53ef\u4ee5\u662f\u4e00\u4e2a atom \u6216\u8005\u662f\u4e00\u4e2a compute\uff0c\u6216\u8005\u662f\u6709atom\u3001compute\u7ec4\u6210\u7684\u6570\u7ec4\u6216\u8005\u5bf9\u8c61."),Object(u.b)("li",{parentName:"ul"},"options ",Object(u.b)("ul",{parentName:"li"},Object(u.b)("li",{parentName:"ul"},"triggerFirst \u9996\u6b21\u662f\u5426\u66f4\u65b0\u72b6\u6001"),Object(u.b)("li",{parentName:"ul"},"callSetWhenReset \u5f53\u91cd\u7f6e\u7684\u65f6\u5019\u662f\u5426\u66f4\u65b0\u72b6\u6001")))),Object(u.b)(c.a,{code:"import React from 'react';\nimport { atom, useRdxState, RdxContext, useRdxValue, RdxState, waitForSetter, useRdxContext } from '@alife/rdx';\n\nconst amountAtom = atom({\n  id: 'amount',\n  defaultValue: 1,\n});\nconst unitAtom = atom({\n  id: 'unit',\n  defaultValue: 1,\n});\n\nexport const Root = () => {\n  return (\n    <RdxContext>\n      <View atom={amountAtom} title='\u6570\u91cf'/>\n      <View atom={unitAtom} title='\u5355\u4ef7' />\n      <ArrayPreview />\n    </RdxContext>\n  );\n};\nconst ArrayPreview = () => {\n  const [[amount, unit], set] = useRdxState(waitForSetter([amountAtom, unitAtom]));\n  return (\n    <div>\n      <strong>\u6570\u7ec4\u5f62\u5f0f\u53c2\u6570:</strong>\n      <button onClick={() => {\n        set()\n      }}>\u70b9\u6211\u66f4\u65b0\u72b6\u6001</button>\n      {amount * unit}\n    </div>\n  );\n};\nconst View = (props: { title: string, atom: RdxState<number> }) => {\n  const {title, atom}= props\n  const [state, setState] = useRdxState(atom);\n  return (\n    <div style={{ display: 'flex', width: 200 }}>\n      <strong>title </strong>\n      {/* \u901a\u8fc7\u4f20\u9012\u65b0\u7684\u503c\u6765\u66f4\u65b0\u6570\u636e */}\n      <button\n        onClick={() => {\n          setState(state + 1);\n        }}\n      >\n        +\n      </button>\n      <span>{state}</span>\n      {/* \u901a\u8fc7\u4f20\u9012updated function \u6765\u66f4\u65b0\u6570\u636e */}\n      <button\n        onClick={() => {\n          setState((state) => {\n            return state - 1;\n          });\n        }}\n      >\n        -\n      </button>\n    </div>\n  );\n};\n",example:o,mdxType:"ExampleCustomizer"}))}y.isMDXComponent=!0}}]);