(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{119:function(t,e,n){"use strict";n.r(e),n.d(e,"frontMatter",(function(){return O})),n.d(e,"metadata",(function(){return k})),n.d(e,"toc",(function(){return R})),n.d(e,"default",(function(){return A}));var o={};n.r(o),n.d(o,"AtomBgControlSample",(function(){return x}));var r=n(3),l=n(7),a=n(0),c=n.n(a),i=n(191),u=n(208),s=n(647),d=n(651),m=n(885),g=n(879),b=n(686),p=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,l=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=l.next()).done;)a.push(o.value)}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return a},C=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t},f=Object(s.a)({id:"color",defaultValue:"rgba(255,255,255,1)"}),v=Object(d.b)({id:"contrast-color",get:function(t){var e=t.get,n=e(f).replace(/[rgba\(\)]/g,"").split(",");return"rgba("+C(n.slice(0,3).map((function(t){return 255-Number(t)})),[n[3]]).join(",")+")"}}),h=Object(d.b)({id:"highlight-color",get:function(t){var e=t.get,n=e(f).replace(/[rgba?\(\)]/g,"").split(",");return.213*Number(n[0])+.715*Number(n[1])+.072*Number(n[2])>127.5?"rgba(0,0,0,1)":"rgba(255,255,255,1)"}}),x=function(){return c.a.createElement(m.a,null,c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(y,null),c.a.createElement(E,null)))},y=function(){var t=Object(g.j)(f),e=Object(g.j)(v),n=Object(g.j)(h);return c.a.createElement("div",null,c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("div",{style:{width:435,height:435,background:t,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"1px solid grey"}},c.a.createElement("h3",{style:{color:e}},"\u53cd\u8f6c\u989c\u8272"),c.a.createElement("h3",{style:{color:n}},"\u6839\u636e\u660e\u6697")),c.a.createElement("div",{style:{position:"absolute",top:10,left:10}},c.a.createElement(j,null))))},j=function(){var t=Object(g.f)(f);return c.a.createElement("div",null,c.a.createElement("div",{style:{display:"flex"}},["rgba(255,255,255, 1)","rgba(0,0,0, 1)"].map((function(e){return c.a.createElement("div",{onClick:function(){t(e)},style:{marginLeft:12,border:"1px solid grey",background:e,width:32,height:32,borderRadius:"50%"}})}))),c.a.createElement("div",{style:{color:"orange"}},"\u70b9\u51fb\u6211\u53ef\u4ee5\u5207\u6362\u753b\u5e03\u989c\u8272\u54e6!!"))},E=function(){var t=p(Object(g.g)(f),2),e=t[0],n=t[1];return c.a.createElement(b.a,{color:e,onChange:function(t){var e=t.rgb,o=e.a,r=e.r,l=e.g,a=e.b;n("rgba("+r+","+l+","+a+","+o)}})},O={id:"Compute",title:"Compute"},k={unversionedId:"tutorial/Compute",id:"tutorial/Compute",isDocsHomePage:!1,title:"Compute",description:"compute \u4ee3\u8868\u7740\u4e00\u4e2a\u884d\u751f\u72b6\u6001\u3002\u884d\u751f\u72b6\u6001\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u7eaf\u51fd\u6570\u6765\u8ba1\u7b97\u51fa\u4e00\u4e2a\u65b0\u7684\u72b6\u6001\u3002",source:"@site/docs/tutorial/compute.mdx",slug:"/tutorial/Compute",permalink:"/rdx-doc/docs/tutorial/Compute",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/tutorial/compute.mdx",version:"current",sidebar:"someSidebar",previous:{title:"Atom",permalink:"/rdx-doc/docs/tutorial/Atom"},next:{title:"RdxContext",permalink:"/rdx-doc/docs/api/RdxContext"}},R=[{value:"\u901a\u8fc7compute\u8ba1\u7b97\u884d\u751f\u72b6\u6001",id:"\u901a\u8fc7compute\u8ba1\u7b97\u884d\u751f\u72b6\u6001",children:[]}],w={toc:R};function A(t){var e=t.components,n=Object(l.a)(t,["components"]);return Object(i.b)("wrapper",Object(r.a)({},w,n,{components:e,mdxType:"MDXLayout"}),Object(i.b)("p",null,"compute \u4ee3\u8868\u7740\u4e00\u4e2a\u884d\u751f\u72b6\u6001\u3002\u884d\u751f\u72b6\u6001\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u7eaf\u51fd\u6570\u6765\u8ba1\u7b97\u51fa\u4e00\u4e2a\u65b0\u7684\u72b6\u6001\u3002"),Object(i.b)("h3",{id:"\u901a\u8fc7compute\u8ba1\u7b97\u884d\u751f\u72b6\u6001"},"\u901a\u8fc7compute\u8ba1\u7b97\u884d\u751f\u72b6\u6001"),Object(i.b)("p",null,"\u901a\u8fc7compute()\u65b9\u6cd5\u6765\u5efa\u7acb\u4e00\u4e2a\u8ba1\u7b97\u8282\u70b9\uff0c\u8ba1\u7b97\u8282\u70b9\u9700\u8981\u4e00\u4e2a\u552f\u4e00\u7684id\uff0c\u5e76\u4e14\u53ef\u4ee5\u8bbe\u7f6eget \u548c set\u7684\u7eaf\u51fd\u6570\u3002"),Object(i.b)("p",null,"get\u51fd\u6570\u4e2d\u53ef\u4ee5\u901a\u8fc7get\u65b9\u6cd5\u83b7\u53d6atom\u8282\u70b9\u6216\u8005\u5176\u4ed6compute\u8282\u70b9\u7684\u6570\u636e\u3002\u8fd9\u91cc\u901a\u8fc7get\u51fd\u6570\u83b7\u53d6ColorAtom\u4e2d\u7684\u914d\u7f6e\u7684\u989c\u8272\uff0c\u5e76\u8ba1\u7b97\u76f8\u53cd\u7684\u989c\u8272, \u8ba9\u6587\u5b57\u7684\u5c55\u793a\u989c\u8272\u53ef\u4ee5\u5feb\u901f\u7684\u6839\u636e\u80cc\u666f\u989c\u8272\u8fdb\u884c\u53d8\u5316\u3002"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"const ColorAtom = atom({\n  id: 'color',\n  defaultValue: 'rgba(255,255,255,1)',\n});\n\nconst  ContrastColor= compute({\n  id: 'contrast-color',\n  get: ({ get }) => {\n    const color = get(ColorAtom);\n    const rgba = color.replace(/[rgba\\(\\)]/g, '').split(',');\n    const colorContrast = `rgba(${[\n      ...rgba\n        .slice(0, 3)\n        .map(item => (255 - Number(item))),\n      rgba[3],\n    ].join(',')})`\n    return colorContrast;\n  },\n});\n")),Object(i.b)(u.a,{code:"import React from 'react';\nimport {\n  atom,\n  compute,\n  RdxContext,\n  useRdxSetter,\n  useRdxState,\n  useRdxValue,\n} from '@alife/rdx';\nimport { SketchPicker } from 'react-color';\nconst ColorAtom = atom({\n  id: 'color',\n  defaultValue: 'rgba(255,255,255,1)',\n});\n\nconst ContrastColor = compute({\n  id: 'contrast-color',\n  get: ({ get }) => {\n    const color = get(ColorAtom);\n    const rgba = color.replace(/[rgba\\(\\)]/g, '').split(',');\n    const colorContrast = `rgba(${[\n      ...rgba.slice(0, 3).map((item) => 255 - Number(item)),\n      rgba[3],\n    ].join(',')})`;\n    return colorContrast;\n  },\n});\n\nconst HighLightColor = compute({\n  id: 'highlight-color',\n  get: ({ get }) => {\n    const color = get(ColorAtom);\n    const rgba = color.replace(/[rgba?\\(\\)]/g, '').split(',');\n    // https://juejin.im/post/6844903960487149582\n    return 0.213 * Number(rgba[0]) +\n      0.715 * Number(rgba[1]) +\n      0.072 * Number(rgba[2]) >\n      255 / 2\n      ? 'rgba(0,0,0,1)'\n      : 'rgba(255,255,255,1)';\n  },\n});\nexport const AtomBgControlSample = () => {\n  return (\n    <RdxContext>\n      <div style={{ display: 'flex' }}>\n        <Canvas />\n        <ColorEditor />\n      </div>\n    </RdxContext>\n  );\n};\n\nconst Canvas = () => {\n  const color = useRdxValue(ColorAtom);\n  const contrastColor = useRdxValue(ContrastColor);\n  const highlightColor = useRdxValue(HighLightColor);\n  return (\n    <div>\n      <div style={{ position: 'relative' }}>\n        <div\n          style={{\n            width: 435,\n            height: 435,\n            background: color,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            border: '1px solid grey',\n          }}\n        >\n          <h3 style={{ color: contrastColor }}>\u53cd\u8f6c\u989c\u8272</h3>\n          <h3 style={{ color: highlightColor }}>\u6839\u636e\u660e\u6697</h3>\n        </div>\n\n        <div style={{ position: 'absolute', top: 10, left: 10 }}>\n          <ThemeEditor />\n        </div>\n      </div>\n    </div>\n  );\n};\nconst ThemeEditor = () => {\n  const setColor = useRdxSetter(ColorAtom);\n  const dataSource = ['rgba(255,255,255, 1)', 'rgba(0,0,0, 1)'];\n  return (\n    <div>\n      <div style={{ display: 'flex' }}>\n        {dataSource.map((item) => (\n          <div\n            onClick={() => {\n              setColor(item);\n            }}\n            style={{\n              marginLeft: 12,\n              border: '1px solid grey',\n              background: item,\n              width: 32,\n              height: 32,\n              borderRadius: '50%',\n            }}\n          ></div>\n        ))}\n      </div>\n      <div style={{ color: 'orange' }}>\u70b9\u51fb\u6211\u53ef\u4ee5\u5207\u6362\u753b\u5e03\u989c\u8272\u54e6!!</div>\n    </div>\n  );\n};\n\nconst ColorEditor = () => {\n  const [color, setColor] = useRdxState(ColorAtom);\n  return (\n    <SketchPicker\n      color={color}\n      onChange={(v) => {\n        const { a, r, g, b } = v.rgb;\n        setColor(`rgba(${r},${g},${b},${a}`);\n      }}\n    />\n  );\n};\n",example:o,mdxType:"ExampleCustomizer"}))}A.isMDXComponent=!0}}]);