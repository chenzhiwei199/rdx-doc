(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{125:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return N})),n.d(t,"metadata",(function(){return S})),n.d(t,"toc",(function(){return h})),n.d(t,"default",(function(){return M}));var a={};n.r(a),n.d(a,"Root",(function(){return R}));var o=n(3),u=n(7),r=n(0),l=n.n(r),c=n(182),i=n(196),d=n(595),p=n(599),m=n(835),s=n(829),b=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,o,u=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(a=u.next()).done;)r.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(n=u.return)&&n.call(u)}finally{if(o)throw o.error}}return r},x=Object(d.a)({id:"unit",defaultValue:10}),j=Object(d.a)({id:"amount",defaultValue:20}),O=Object(p.b)({id:"total",get:function(e){var t=e.get;return t(x)*t(j)},set:function(e,t){var n=e.get,a=e.set;a(j,t/n(x))}}),R=function(){return l.a.createElement(m.a,null,l.a.createElement(f,null),l.a.createElement(g,null),l.a.createElement(v,null))},f=function(){var e=b(Object(s.g)(x),2),t=e[0],n=e[1];return l.a.createElement("span",null,"\u5355\u4ef7\uff1a",l.a.createElement("input",{type:"number",value:t,onChange:function(e){n(Number(e.target.value))}}))},g=function(){var e=b(Object(s.g)(j),2),t=e[0],n=e[1];return l.a.createElement("span",null,"\u6570\u91cf\uff1a",l.a.createElement("input",{type:"number",value:t,onChange:function(e){n(Number(e.target.value))}}))},v=function(){var e=b(Object(s.g)(O),2),t=e[0],n=e[1];return l.a.createElement("span",null,"\u603b\u4ef7\uff1a",l.a.createElement("input",{type:"number",value:t,onChange:function(e){n(Number(e.target.value))}}))},N={id:"compute",title:"compute(state)"},S={unversionedId:"api/compute",id:"api/compute",isDocsHomePage:!1,title:"compute(state)",description:"compute \u5728 Rdx \u4e2d\u4ee3\u8868\u4e00\u4e2a\u8ba1\u7b97\u7684\u72b6\u6001\u3002compute() \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u53ef\u4ee5\u8bfb\u5199\u7684 RdxState\u3002",source:"@site/docs/api/compute.mdx",slug:"/api/compute",permalink:"/rdx-doc/docs/api/compute",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/api/compute.mdx",version:"current",sidebar:"someSidebar",previous:{title:"atom(options)",permalink:"/rdx-doc/docs/api/atom"},next:{title:"useRdxState(state)",permalink:"/rdx-doc/docs/api/useRdxState"}},h=[{value:"API",id:"api",children:[]},{value:"EXAMPLE",id:"example",children:[]}],G={toc:h};function M(e){var t=e.components,n=Object(u.a)(e,["components"]);return Object(c.b)("wrapper",Object(o.a)({},G,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"compute \u5728 Rdx \u4e2d\u4ee3\u8868\u4e00\u4e2a\u8ba1\u7b97\u7684\u72b6\u6001\u3002compute() \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u53ef\u4ee5\u8bfb\u5199\u7684 RdxState\u3002"),Object(c.b)("hr",null),Object(c.b)("h3",{id:"api"},"API"),Object(c.b)("pre",null,Object(c.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx"}),"function atom<GModel>({\n  id: string,\n  defaultValue: GModel | Promise<GModel> | RdxState<GModel>,\n  get: IRdxComputeGet,\n  set?: IRdxComputeSet<GModel>\n}): RdxState<T>\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx"}),"type IRdxComputeGet<GModel> = (\n  config: IRdxComputeGetParams\n) => DataModel<GModel>;\ntype IRdxComputeSet<GModel> = (\n  config: { id: string, get: RdxGet, set: RdxSet, reset: RdxReset },\n  newValue: GModel\n) => void;\ninterface IRdxComputeGetParams {\n  id: string;\n  get: RdxGet;\n}\ntype RdxGet = <GModel>(node: TPath<GModel>) => GModel;\ntype RdxSet = <GModel>(\n  node: TPath<GModel>,\n  value: ValueOrUpdater<GModel>\n) => void;\ntype RdxReset = <GModel>(node: RdxState<GModel>) => void;\n")),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"id id \u4e00\u4e2a\u552f\u4e00\u7684\u5b57\u7b26\u4e32\uff0c\u7528\u6765\u5728 RdxContext \u4e0b\u6807\u8bb0\u4e00\u4e2a\u552f\u4e00\u7684 compute \u72b6\u6001\u3002"),Object(c.b)("li",{parentName:"ul"},"get \u53ef\u4ee5\u4f20\u5165\u4e00\u4e2a\u65b9\u6cd5\u6765\u5f97\u51fa\u8ba1\u7b97\u72b6\u6001\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u51fd\u6570\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u5f02\u6b65\u7684 promise.\u8fd9\u4e2a get \u65b9\u6cd5\u53ef\u4ee5\u83b7\u5f97\u4ee5\u4e0b\u53c2\u6570\uff1a",Object(c.b)("ul",{parentName:"li"},Object(c.b)("li",{parentName:"ul"},"id \u5f53\u524d compute \u7684\u552f\u4e00 id"),Object(c.b)("li",{parentName:"ul"},"get \u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u83b7\u53d6\u5176\u4ed6 atom \u6216\u8005 compute \u7684\u503c\uff0c\u540c\u65f6\u8fd9\u91cc\u4f1a\u8ba2\u9605\u5bf9\u76f8\u5e94\u7684\u7684 atom \u6216\u8005 compute\uff0c\u6240\u4ee5\u6bcf\u5f53\u8ba2\u9605\u7684 atom \u6216\u8005 compute \u53d1\u751f\u6539\u53d8\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u90fd\u4f1a\u88ab\u91cd\u65b0\u8c03\u7528\uff0c\u8ba1\u7b97\u6700\u65b0\u7684\u503c\u3002"))),Object(c.b)("li",{parentName:"ul"},"set",Object(c.b)("ul",{parentName:"li"},Object(c.b)("li",{parentName:"ul"},"id \u5f53\u524d compute \u7684\u552f\u4e00 id"),Object(c.b)("li",{parentName:"ul"},"get \u4e00\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u5176\u4ed6 atom \u6216\u8005 compute \u7684\u503c\uff0c\u8fd9\u91cc\u4e0d\u4f1a\u8ba2\u9605\u54cd\u5e94\u7684 atom \u548c compute."),Object(c.b)("li",{parentName:"ul"},"set \u4e00\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u8bbe\u7f6e\u5176\u4ed6\u7684 atom \u6216\u8005 compute \u7684\u503c\u3002")))),Object(c.b)("hr",null),Object(c.b)("p",null,"\u901a\u5e38\u7684\u65f6\u5019\uff0ccompute \u53ef\u4ee5\u914d\u5408\u4e00\u4e0b hooks \u4e00\u8d77\u4f7f\u7528"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/api/useRdxState"}),Object(c.b)("inlineCode",{parentName:"a"},"useRdxState()"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/api/useRdxStateLoader"}),Object(c.b)("inlineCode",{parentName:"a"},"useRdxStateLoader()"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/api/useRdxSetter"}),Object(c.b)("inlineCode",{parentName:"a"},"useRdxSetter()"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/api/useRdxReset"}),Object(c.b)("inlineCode",{parentName:"a"},"useRdxReset()")))),Object(c.b)("hr",null),Object(c.b)("h3",{id:"example"},"EXAMPLE"),Object(c.b)(i.a,{code:"import React from 'react';\nimport { atom, useRdxState, compute, RdxContext } from '@alife/rdx';\nconst unit = atom({\n  id: 'unit',\n  defaultValue: 10,\n});\nconst amount = atom({\n  id: 'amount',\n  defaultValue: 20,\n});\nconst total = compute<number>({\n  id: 'total',\n  get: ({ get }) => {\n    const total = get(unit) * get(amount);\n    return total;\n  },\n  set: ({ get, set }, newValue) => {\n    set(amount, newValue / get(unit));\n  },\n});\n\nexport const Root = () => {\n  return (\n    <RdxContext>\n      <Unit />\n      <Amount />\n      <Total />\n    </RdxContext>\n  );\n};\nconst Unit = () => {\n  const [state, setState] = useRdxState(unit);\n  return (\n    <span>\n      \u5355\u4ef7\uff1a\n      <input\n        type='number'\n        value={state}\n        onChange={(event) => {\n          setState(Number(event.target.value));\n        }}\n      ></input>\n    </span>\n  );\n};\nconst Amount = () => {\n  const [state, setState] = useRdxState(amount);\n  return (\n    <span>\n      \u6570\u91cf\uff1a\n      <input\n        type='number'\n        value={state}\n        onChange={(event) => {\n          setState(Number(event.target.value));\n        }}\n      ></input>\n    </span>\n  );\n};\nconst Total = () => {\n  const [state, setState] = useRdxState(total);\n  return (\n    <span>\n      \u603b\u4ef7\uff1a\n      <input\n        type='number'\n        value={state}\n        onChange={(event) => {\n          setState(Number(event.target.value));\n        }}\n      ></input>\n    </span>\n  );\n};\n",example:a,mdxType:"ExampleCustomizer"}))}M.isMDXComponent=!0}}]);