(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{142:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return y})),n.d(t,"metadata",(function(){return v})),n.d(t,"toc",(function(){return w})),n.d(t,"default",(function(){return O}));var o={};n.r(o),n.d(o,"Root",(function(){return R}));var r=n(3),s=n(7),a=n(0),u=n.n(a),c=n(186),i=n(206),l=n(603),d=n(839),p=n(833),f=n(693),m=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function a(e){try{c(o.next(e))}catch(t){s(t)}}function u(e){try{c(o.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((o=o.apply(e,t||[])).next())}))},b=function(e,t){var n,o,r,s,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(u){s=[6,u],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},x=Object(l.b)({id:"atom",get:function(){return m(void 0,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,(t=1e3,new Promise((function(e){return setTimeout(e,t)})))];case 1:return e.sent(),[2,1]}var t}))}))}}),R=function(){return u.a.createElement(d.a,null,u.a.createElement(h,null))},h=function(){var e=Object(p.k)(x),t=Object(p.d)(x);return u.a.createElement("span",{style:{display:"inline-flex",justifyContent:"space-around"}},u.a.createElement("span",null,Object(f.b)(e.status)?"\u52a0\u8f7d\u4e2d...":e.content),u.a.createElement("button",{onClick:function(){t()}},"\u5237\u65b0"))},y={id:"useRdxRefresh",title:"useRdxRefresh(state)"},v={unversionedId:"api/useRdxRefresh",id:"api/useRdxRefresh",isDocsHomePage:!1,title:"useRdxRefresh(state)",description:"\u4f1a\u6839\u636e\u5f53\u524d\u4f20\u5165\u7684state\u53c2\u6570\u6765\u8fd4\u4e00\u4e2a \u51fd\u6570\uff0c\u5982\u679cstate \u662f\u4e00\u4e2aatom\uff0c\u5219\u8c03\u7528\u8be5\u51fd\u6570\u5c06\u5237\u65b0\u72b6\u6001\uff0c\u5982\u679c\u662f\u4e00\u4e2acompute\uff0c\u5219\u4f1a\u91cd\u65b0",source:"@site/docs/api/useRdxRefresh.mdx",slug:"/api/useRdxRefresh",permalink:"/rdx-doc/docs/api/useRdxRefresh",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/api/useRdxRefresh.mdx",version:"current",sidebar:"someSidebar",previous:{title:"useRdxReset(state)",permalink:"/rdx-doc/docs/api/useRdxReset"},next:{title:"useRdxStatus",permalink:"/rdx-doc/docs/api/useRdxStatus"}},w=[],j={toc:w};function O(e){var t=e.components,n=Object(s.a)(e,["components"]);return Object(c.b)("wrapper",Object(r.a)({},j,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"\u4f1a\u6839\u636e\u5f53\u524d\u4f20\u5165\u7684state\u53c2\u6570\u6765\u8fd4\u4e00\u4e2a \u51fd\u6570\uff0c\u5982\u679cstate \u662f\u4e00\u4e2aatom\uff0c\u5219\u8c03\u7528\u8be5\u51fd\u6570\u5c06\u5237\u65b0\u72b6\u6001\uff0c\u5982\u679c\u662f\u4e00\u4e2acompute\uff0c\u5219\u4f1a\u91cd\u65b0\n\u8c03\u7528compute\u7684get\u65b9\u6cd5\u3002"),Object(c.b)("hr",null),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"function useRdxRefresh<GModel>(props: RdxValue<GModel>):() => void\n")),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"state: \u53ef\u662f\u662f\u4e00\u4e2a atom \u6216\u8005\u662f\u4e00\u4e2a compute.")),Object(c.b)(i.a,{code:"import React from 'react';\nimport {\n  useRdxSetter,\n  RdxContext,\n  useRdxState,\n  compute,\n  useRdxStateLoader,\n  useRdxValueLoader,\n  useRdxRefresh,\n  isLoading,\n} from '@alife/rdx';\n\nconst pause = (t: number) => new Promise((resolve) => setTimeout(resolve, t));\nconst AsyncCompute = compute({\n  id: 'atom',\n  get: async () => {\n    await pause(1000);\n    return 1;\n  },\n});\n\nexport const Root = () => {\n  return (\n    <RdxContext>\n      <AsyncComponent />\n    </RdxContext>\n  );\n};\n\nconst AsyncComponent = () => {\n  const state = useRdxValueLoader(AsyncCompute);\n  const refresh = useRdxRefresh(AsyncCompute);\n  return (\n    <span\n      style={{\n        display: 'inline-flex',\n        justifyContent: 'space-around',\n      }}\n    >\n      <span>{isLoading(state.status) ? '\u52a0\u8f7d\u4e2d...' : state.content}</span>\n      <button\n        onClick={() => {\n          refresh();\n        }}\n      >\n        \u5237\u65b0\n      </button>\n    </span>\n  );\n};\n",example:o,mdxType:"ExampleCustomizer"}))}O.isMDXComponent=!0}}]);