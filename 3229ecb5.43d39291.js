(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{129:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return y})),n.d(t,"metadata",(function(){return h})),n.d(t,"toc",(function(){return g})),n.d(t,"default",(function(){return j}));var r={};n.r(r),n.d(r,"\u7b80\u5355\u793a\u4f8b",(function(){return m}));var o=n(3),i=n(7),a=n(0),c=n.n(a),u=n(197),l=n(214),f=n(209),s=Object(f.a)({components:{input:function(e){var t=e.value,n=e.onChange;return c.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}})},select:function(e){var t=e.value,n=e.onChange,r=e.componentProps.dataSource,o=void 0===r?[]:r;return c.a.createElement("select",{value:t,onChange:function(e){n(e.target.value)}},o.map((function(e){return c.a.createElement("option",{value:e.value},e.label)})))}}})(),p=s.FormItem,d=s.RdxFormRoot,m=function(){return c.a.createElement(d,{enabledStatePreview:!0},c.a.createElement(p,{name:"province",title:"\u7701\u4efd",type:"string",componentType:"input"}),c.a.createElement(p,{name:"city",title:"\u57ce\u5e02",type:"string",componentType:"input"}))},b=n(565),v=n(566),y={id:"formBuilder",title:"formBuilder(options)"},h={unversionedId:"rdx-form/api/formBuilder/formBuilder",id:"rdx-form/api/formBuilder/formBuilder",isDocsHomePage:!1,title:"formBuilder(options)",description:"formBuilder \u662f\u4e00\u4e2a\u8868\u5355\u6784\u9020\u5668\uff0c\u53ef\u4ee5\u901a\u8fc7 components \u65b9\u6cd5\u6ce8\u518c\u8868\u5355\u7684\u6e32\u67d3\u7ec4\u4ef6\u3002",source:"@site/docs/rdx-form/api/formBuilder/index.mdx",slug:"/rdx-form/api/formBuilder/formBuilder",permalink:"/rdx-doc/docs/rdx-form/api/formBuilder/formBuilder",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/rdx-form/api/formBuilder/index.mdx",version:"current",sidebar:"someSidebar",previous:{title:"\u81ea\u5b9a\u4e49\u8868\u5355\u6e32\u67d3\u5668",permalink:"/rdx-doc/docs/rdx-form/tutorials/customFormRender"},next:{title:"RdxFormRoot",permalink:"/rdx-doc/docs/rdx-form/api/formBuilder/RdxFormRoot"}};Object(u.b)(l.a,{code:v.a,example:b});var g=[],O={toc:g};function j(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(u.b)("wrapper",Object(o.a)({},O,n,{components:t,mdxType:"MDXLayout"}),Object(u.b)("p",null,"formBuilder \u662f\u4e00\u4e2a\u8868\u5355\u6784\u9020\u5668\uff0c\u53ef\u4ee5\u901a\u8fc7 components \u65b9\u6cd5\u6ce8\u518c\u8868\u5355\u7684\u6e32\u67d3\u7ec4\u4ef6\u3002"),Object(u.b)("hr",null),Object(u.b)("pre",null,Object(u.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx"}),"function formBuilder<GComponents extends IComponents>({\n  components: GComponents\n}): <GSource extends any>() => {\n  getReferencedFormValueAtom\n  getReferencedFormStatusAtom\n  getReferencedFormCompute\n  FormItem,\n  RdxFormRoot,\n  useValidator,\n  createFormStore,\n}\n\nexport interface IComponents {\n  [key: string]: IFormComponent\n}\n\n")),Object(u.b)("p",null,Object(u.b)("strong",{parentName:"p"},"props")),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},"components \u4f20\u9012\u4e00\u4e2a\u7ec4\u4ef6\u5b57\u5178")),Object(u.b)("p",null,Object(u.b)("strong",{parentName:"p"},"\u8fd4\u56de\u503c")),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},Object(u.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/rdx-form/api/formBuilder/getReferencedFormValueAtom"}),Object(u.b)("inlineCode",{parentName:"a"},"getReferencedFormValueAtom"))),Object(u.b)("li",{parentName:"ul"},Object(u.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/rdx-form/api/formBuilder/getReferencedFormStatusAtom"}),Object(u.b)("inlineCode",{parentName:"a"},"getReferencedFormStatusAtom"))),Object(u.b)("li",{parentName:"ul"},Object(u.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/rdx-form/api/formBuilder/getReferencedFormCompute"}),Object(u.b)("inlineCode",{parentName:"a"},"getReferencedFormCompute"))),Object(u.b)("li",{parentName:"ul"},Object(u.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/rdx-form/api/formBuilder/useValidator"}),Object(u.b)("inlineCode",{parentName:"a"},"useValidator"))),Object(u.b)("li",{parentName:"ul"},Object(u.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/rdx-form/api/formBuilder/FormItem"}),Object(u.b)("inlineCode",{parentName:"a"},"FormItem"))),Object(u.b)("li",{parentName:"ul"},Object(u.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/rdx-form/api/formBuilder/RdxFormRoot"}),Object(u.b)("inlineCode",{parentName:"a"},"RdxFormRoot"))),Object(u.b)("li",{parentName:"ul"},Object(u.b)("a",Object(o.a)({parentName:"li"},{href:"/docs/rdx-form/api/formBuilder/createFormStore"}),Object(u.b)("inlineCode",{parentName:"a"},"createFormStore")))),Object(u.b)("hr",null),Object(u.b)("p",null,"\u7b80\u5355\u7528\u6cd5"),Object(u.b)(l.a,{code:"import React from 'react';\nimport { IFormComponentProps, formBuilder } from '@alife/rdx-form';\n\nconst Input = (props: IFormComponentProps<any>) => {\n  const { value, onChange } = props;\n  return (\n    <input\n      value={value}\n      onChange={(event) => {\n        onChange(event.target.value);\n      }}\n    ></input>\n  );\n};\nconst Select = (\n  props: IFormComponentProps<{\n    dataSource: { label: string; value: string }[];\n  }>\n) => {\n  const { value, onChange, componentProps } = props;\n  const { dataSource = [] } = componentProps;\n  return (\n    <select\n      value={value}\n      onChange={(event) => {\n        onChange(event.target.value);\n      }}\n    >\n      {dataSource.map((item) => (\n        <option value={item.value}>{item.label}</option>\n      ))}\n    </select>\n  );\n};\n// \u901a\u8fc7\u6ce8\u518c\u7ec4\u4ef6\uff0c\u521b\u5efaformBuilder\nconst formFn = formBuilder({\n  components: {\n    input: Input,\n    select: Select,\n  },\n});\n// \u901a\u8fc7\u6a21\u578b\u5b9a\u4e49\uff0c\u521b\u5efa\u5e26\u6a21\u578b\u542b\u4e49\u7684\u8868\u5355\nconst AreaForms = formFn<{ province: string; city: number }>();\nconst { FormItem, RdxFormRoot } = AreaForms;\n\n// \u4f7f\u7528AreaForms\u6784\u9020\u4f60\u7684\u4e1a\u52a1\u8f93\u5165\u8868\u5355\nexport const \u7b80\u5355\u793a\u4f8b = () => {\n  return (\n    <RdxFormRoot enabledStatePreview={true}>\n      <FormItem\n        name='province'\n        title='\u7701\u4efd'\n        type='string'\n        componentType={'input'}\n      ></FormItem>\n      <FormItem\n        name='city'\n        title='\u57ce\u5e02'\n        type='string'\n        componentType={'input'}\n      ></FormItem>\n    </RdxFormRoot>\n  );\n};\n",example:r,mdxType:"ExampleCustomizer"}),Object(u.b)("hr",null))}j.isMDXComponent=!0},176:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return d}));var r,o=n(188),i=n(195),a=(n(177),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),c=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},u=function(){function e(e){this.store={},this.store=e}return e.prototype.clone=function(){return new e(this.store)},e.prototype.merge=function(e){throw new Error("Method not implemented.")},e.prototype.remove=function(e,t){this.store=Object(i.b)(this.store,(function(t){Object(o.d)(t,e,void 0)}))},e.prototype.update=function(e,t,n){this.store=Object(i.b)(this.store,(function(n){Object(o.d)(n,e,t)}))},e.prototype.get=function(e,t){return Object(o.c)(this.store,e)},e.prototype.getAll=function(){return this.store},e}();function l(e){return void 0===e&&(e=""),e.split("|")}function f(e){return void 0===e&&(e=""),e.includes("|")}function s(e){return e+"\\$\\$"}function p(e,t,n){return t+"$$"+e+(n?"$$"+n:"")}function d(e,t){return Object.keys(t).filter((function(e){return e.startsWith(r.Compute+"$$")})).reduce((function(e,n){var r=function(e){var t=e.split("$$");return{type:t[0],id:t[1],alias:t[2]}}(n),i=r.id,a=(r.alias,r.type,i.split(".")),u=a[a.length-1];return u.includes("|")?u.split("|").forEach((function(r,i){var u=c(a.slice(0,a.length-1),[r]).join(".");t[n].value?Object(o.d)(e,u,t[n].value[i]):Object(o.d)(e,u,void 0)})):Object(o.d)(e,i,t[n].value),e}),JSON.parse(JSON.stringify(e)))}!function(e){e.ValueIntercepter="StateIntercepter",e.EditState="editState",e.Compute="compute",e.Status="status",e.Error="error",e.Rule="rule"}(r||(r={}))},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r,o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e.Object="object",e.Array="array",e.String="string",e.Number="number",e.Boolean="boolean"}(r||(r={}));var i,a=o({},r);!function(e){e.Loading="loading",e.Error="error"}(i||(i={}))},186:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return p}));var r=n(0),o=(n(883),n(475),n(189)),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};function c(e){return"function"==typeof e}var u=function(){var e=Object(r.useContext)(o.a).paths;return(void 0===e?[]:e).join(".")};function l(e,t){return a(t,[e]).join(".")}function f(e){var t=[];return Array.isArray(e)||(t=e.split(".")),t}function s(e){var t=f(e);return t[t.length-1]}function p(e){var t=f(e);return t.slice(0,t.length-1)}},188:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return p}));var r=n(0),o=n.n(r),i=n(186),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function u(e){var t=e.type,n=e.defaultValue;return null!=n?Object(i.d)(n)?n():n:"array"===t?[]:"object"===t?{}:"string"===t?"":void 0}function l(e){var t=[];return o.a.Children.forEach(e,(function(e,n){t.push(e.props)})),t}function f(e){var t={};return o.a.Children.forEach(e,(function(n,r){0===r&&(t="object"===n.props.type?a(a({},n.props),{childrenPropsInfo:l(e)}):n.props)})),t}function s(e,t,n){var r,o,i=(""+t).split(".");if(!(i&&i.length>0))return e;var a=e,u=0;try{for(var l=c(i),f=l.next();!f.done;f=l.next()){var s=f.value;if(u===i.length-1)return void 0===a[s]?n:a[s];if(void 0===a[s])return n;a=a[s],u++}}catch(p){r={error:p}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}function p(e,t,n){var r,o;void 0===e&&(e={});var i=(""+t).split(".");if(i&&i.length>0){var a=e,u=0;try{for(var l=c(i),f=l.next();!f.done;f=l.next()){var s=f.value;u===i.length-1?a[s]=n:(void 0===a[s]&&(a[s]={}),a=a[s]),u++}}catch(p){r={error:p}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}return e}},189:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(0),o=n.n(r).a.createContext({paths:[]});function i(){var e=Object(r.useContext)(o).paths;return{paths:e,parentPaths:e.slice(0,e.length-1)}}},195:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(e){return!!e&&!!e[z]}function i(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[W]||!!e.constructor[W]||s(e)||p(e))}function a(e,t,n){void 0===n&&(n=!1),0===c(e)?(n?Object.keys:_)(e).forEach((function(n){return t(n,e[n],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function c(e){var t=e[z];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:s(e)?2:p(e)?3:0}function u(e,t){return 2===c(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){return 2===c(e)?e.get(t):e[t]}function f(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function s(e){return V&&e instanceof Map}function p(e){return M&&e instanceof Set}function d(e){return e.o||e.t}function m(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();var n=Object.create(Object.getPrototypeOf(e));return a(e,(function(o){if(o!==z){var i=Object.getOwnPropertyDescriptor(e,o),a=i.value;i.get&&(t||r(1),a=i.get.call(e)),i.enumerable?n[o]=a:Object.defineProperty(n,o,{value:a,writable:!0,configurable:!0})}})),n}function b(e,t){o(e)||y(e)||!i(e)||(c(e)>1&&(e.set=e.add=e.clear=e.delete=v),Object.freeze(e),t&&a(e,(function(e,t){return b(t,!0)}),!0))}function v(){r(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function h(e){var t=J[e];return t||r(19,e),t}function g(){return N}function O(e,t){t&&(h("Patches"),e.u=[],e.s=[],e.v=t)}function j(e){x(e),e.p.forEach(S),e.p=null}function x(e){e===N&&(N=e.l)}function w(e){return N={p:[],l:N,h:e,m:!0,_:0}}function S(e){var t=e[z];0===t.i||1===t.i?t.j():t.O=!0}function E(e,t){t._=t.p.length;var n=t.p[0],o=void 0!==e&&e!==n;return t.h.g||h("ES5").S(t,e,o),o?(n[z].P&&(j(t),r(4)),i(e)&&(e=C(t,e),t.l||F(t,e)),t.u&&h("Patches").M(n[z],e,t.u,t.s)):e=C(t,n,[]),j(t),t.u&&t.v(t.u,t.s),e!==$?e:void 0}function C(e,t,n){if(y(t))return t;var r=t[z];if(!r)return a(t,(function(o,i){return P(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return F(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=m(r.k,!0):r.o;a(o,(function(t,i){return P(e,r,o,t,i,n)})),F(e,o,!1),n&&e.u&&h("Patches").R(r,n,e.u,e.s)}return r.o}function P(e,t,n,r,a,s){if(o(a)){var p=C(e,a,s&&t&&3!==t.i&&!u(t.D,r)?s.concat(r):void 0);if(m=r,b=p,2===(v=c(d=n))?d.set(m,b):3===v?(d.delete(m),d.add(b)):d[m]=b,!o(p))return;e.m=!1}var d,m,b,v;if((!t||!f(a,l(t.t,r)))&&i(a)){if(!e.h.N&&e._<1)return;C(e,a),t&&t.A.l||F(e,a)}}function F(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&b(t,n)}function k(e,t){var n=e[z],r=Reflect.getOwnPropertyDescriptor(n?d(n):e,t);return r&&r.value}function I(e){if(!e.P){if(e.P=!0,0===e.i||1===e.i){var t=e.o=m(e.t);a(e.p,(function(e,n){t[e]=n})),e.p=void 0}e.l&&I(e.l)}}function R(e){e.o||(e.o=m(e.t))}function A(e,t,n){var r=s(t)?h("MapSet").T(t,n):p(t)?h("MapSet").F(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:g(),P:!1,I:!1,D:{},l:t,t:e,k:null,p:{},o:null,j:null,C:!1},o=r,i=L;n&&(o=[r],i=q);var a=Proxy.revocable(o,i),c=a.revoke,u=a.proxy;return r.k=u,r.j=c,u}(t,n):h("ES5").J(t,n);return(n?n.A:g()).p.push(r),r}n.d(t,"b",(function(){return U}));var T,N,B="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),V="undefined"!=typeof Map,M="undefined"!=typeof Set,D="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,$=B?Symbol("immer-nothing"):((T={})["immer-nothing"]=!0,T),W=B?Symbol("immer-draftable"):"__$immer_draftable",z=B?Symbol("immer-state"):"__$immer_state",_=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames),J={},L={get:function(e,t){if(t===z)return e;var n=e.p;if(!e.P&&u(n,t))return n[t];var r=d(e)[t];if(e.I||!i(r))return r;if(e.P){if(r!==k(e.t,t))return r;n=e.o}return n[t]=A(e.A.h,r,e)},has:function(e,t){return t in d(e)},ownKeys:function(e){return Reflect.ownKeys(d(e))},set:function(e,t,n){if(!e.P){var r=k(e.t,t);if(n?f(r,n)||n===e.p[t]:f(r,n)&&t in e.t)return!0;R(e),I(e)}return e.D[t]=!0,e.o[t]=n,!0},deleteProperty:function(e,t){return void 0!==k(e.t,t)||t in e.t?(e.D[t]=!1,R(e),I(e)):e.D[t]&&delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=d(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&(r.writable=!0,r.configurable=1!==e.i||"length"!==t),r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},q={};a(L,(function(e,t){q[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),q.deleteProperty=function(e,t){return L.deleteProperty.call(this,e[0],t)},q.set=function(e,t,n){return L.set.call(this,e[0],t,n,e[0])};var G=new(function(){function e(e){this.g=D,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,n){if("function"==typeof e&&"function"!=typeof t){var o=t;t=e;var a=this;return function(e){var n=this;void 0===e&&(e=o);for(var r=arguments.length,i=Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];return a.produce(e,(function(e){var r;return(r=t).call.apply(r,[n,e].concat(i))}))}}var c;if("function"!=typeof t&&r(6),void 0!==n&&"function"!=typeof n&&r(7),i(e)){var u=w(this),l=A(this,e,void 0),f=!0;try{c=t(l),f=!1}finally{f?j(u):x(u)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(e){return O(u,n),E(e,u)}),(function(e){throw j(u),e})):(O(u,n),E(c,u))}if((c=t(e))!==$)return void 0===c&&(c=e),this.N&&b(c,!0),c},t.produceWithPatches=function(e,t){var n,r,o=this;return"function"==typeof e?function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(r))}))}:[this.produce(e,t,(function(e,t){n=e,r=t})),n,r]},t.createDraft=function(e){i(e)||r(8);var t=w(this),n=A(this,e,void 0);return n[z].C=!0,x(t),n},t.finishDraft=function(e,t){var n=(e&&e[z]).A;return O(n,t),E(void 0,n)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){D||r(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var i=h("Patches").U;return o(e)?i(e,t):this.produce(e,(function(e){return i(e,t.slice(n+1))}))},e}()),U=G.produce;G.produceWithPatches.bind(G),G.setAutoFreeze.bind(G),G.setUseProxies.bind(G),G.applyPatches.bind(G),G.createDraft.bind(G),G.finishDraft.bind(G);t.a=U},199:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},200:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},201:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(188),o=n(883),i=n(186),a=n(177),c=n(176),u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},l=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e};function f(e,t){var n=Object(i.e)(),u=Object(o.c)(),f=function(){return u.getTaskStateById(n)||{}||[]},s=Object(r.a)(t);Object.values(c.a).map((function(e){return Object(c.d)(e)})).join("|");function p(e){var t=function(e){var t=s.type===a.a.Object||s.type===a.a.Array?new RegExp("(^"+n+"."+e+".(.+))|(^"+n+"."+e+"$)"):new RegExp("^"+n+"."+e+"$");return console.log("rule: ",t),t}(e),r=Array.from(u.getTasks().keys()).filter((function(e){return t.test(e)}));return console.log("vaildKeys: ",r),r}function d(e){p(e).reverse().forEach((function(e){u.removeTask(e),u.removeTask(Object(c.e)(e,c.a.Error)),u.removeTask(Object(c.e)(e,c.a.ValueIntercepter)),u.removeTask(Object(c.e)(e,c.a.Status)),u.removeTask(Object(c.e)(e,c.a.EditState)),u.removeTask(Object(c.e)(e,c.a.Compute))})),u.removeTaskState(n+"."+e)}var m=function(e,t){var r=[n,e].join("."),o=[n,t].join("."),i=JSON.parse(JSON.stringify(u.getTaskStateById(r))),a=JSON.parse(JSON.stringify(u.getTaskStateById(o)));d(e),d(t),u.setTaskState(r,a),u.setTaskState(o,i)};return{add:function(){e(l(f(),[Object(r.b)(s)]))},moveDown:function(e){e+1>f().length||m(e,e+1)},moveUp:function(e){e-1<0||m(e-1,e)},remove:function(t){for(var n=[],r=t;r<f().length-1;r++)m(r,r+1),n=n.concat(p(r).concat(p(r+1)));d(f().length-1),e(f().slice(0,f().length-1))},removeAll:function(){p(f().length-1).forEach((function(e){u.removeTask(e)})),e([])},switchItem:m}}},205:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return u}));var r,o,i=n(0);!function(e){e.Grid="grid",e.Inline="inline",e.Classic="classic",e.Base="base"}(r||(r={})),function(e){e.Left="left",e.Right="right",e.Top="top"}(o||(o={}));var a=Object(i.createContext)({});function c(e,t){return void 0===t&&(t=24),e/t*100+"%"}function u(e,t){void 0===t&&(t=!0);var n=Object(i.useContext)(a),u=n.layoutType,l=void 0===u?r.Base:u,f=n.columns,s=void 0===f?24:f,p=n.labelWidth,d=n.labelTextAlign,m=void 0===d?"right":d,b=n.labelCol,v=void 0===b?8:b,y=n.wrapWidth,h=n.wrapCol,g=void 0===h?16:h,O={},j={},x={};return l===r.Base?(O.display="flex",m===o.Top?O.flexDirection="column":j.textAlign=m,j.flexGrow=0,x.flex=1):l===r.Classic?(O.display="flex",m===o.Top?(O.flexDirection="column",j.textAlign="left"):j.textAlign=m,j.flex="0 0 "+c(v),x.flex="0 0 "+c(t?g:g+v),x.overflow="hidden"):l===r.Inline?(O.display="inline-block",m!==o.Right&&m!==o.Left||(j.display="inline-block",x.display="inline-block",j.textAlign=m),j.width=p,x.width=y,x.marginRight=20):l===r.Grid&&(O.display="flex",O.flex=j.flex="0 0 "+c(e,s),m===o.Top?(O.flexDirection="column",j.textAlign="left"):j.textAlign=m,j.flex="0 0 "+c(v),x.flex="0 0 "+c(g)),{containerStyle:O,labelStyle:j,contentStyle:x}}},206:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return p}));var r=n(0),o=n.n(r),i=n(178),a=n(177),c=n(207),u=n(205),l=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},f={TitleComponent:function(e){var t=e.title,n=e.require,r=e.showTitle,i=void 0===r||r,a=e.tips,c=e.layoutExtends,l=void 0===c?{}:c,f=e.tipsPosition,s=void 0===f?"after":f,p=Object(u.d)(l.span,i&&!!t).labelStyle;return o.a.createElement(o.a.Fragment,null,t&&i&&o.a.createElement(g,{style:p,require:n,className:"rdx-form-item-label"},t,a&&"before"===s&&o.a.createElement(b,{tips:a})))},ContentComponent:function(e){var t=e.children,n=e.title,r=e.showTitle,i=void 0===r||r,a=e.tips,c=e.layoutExtends,l=void 0===c?{}:c,f=e.tipsPosition,s=void 0===f?"after":f,p=Object(u.d)(l.span,i&&!!n).contentStyle;return o.a.createElement(O,{style:p,className:"rdx-form-item-content"},o.a.createElement("span",null,t,a&&"after"===s&&o.a.createElement(b,{tips:a})),o.a.createElement(m,{msg:e.desc}),o.a.createElement(d,{msg:e.errorMsg}),o.a.createElement(d,{msg:(e.formErrorMsg||[]).join(",")}))},WrapperComponent:function(e){var t=e.type,n=e.children,r=e.id,i=e.layoutExtends,c=void 0===i?{}:i,l=Object(u.d)(c.span).containerStyle;return o.a.createElement(j,{"data-id":r,useMargin:t!==a.a.Object,style:l,className:"rdx-form-item"},n)}},s=o.a.createContext(f);function p(){return o.a.useContext(s)}function d(e){return o.a.createElement("div",{title:e.msg,style:{color:"red",width:"100%",maxHeight:32,maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.msg)}function m(e){return o.a.createElement("div",{style:{color:"#999999"}},e.msg)}function b(e){var t=e.tips;return o.a.createElement(c.a,{trigger:o.a.createElement("span",{style:{verticalAlign:"middle",paddingLeft:"6px"}},o.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14"},o.a.createElement("path",{d:"M512 1024C229.069 1024 0 794.829 0 512S229.069 0 512 0c282.931 0 512 229.171 512 512s-229.069 512-512 512z m-0.034-93.12c231.073 0.066 418.98-187.942 418.913-418.914 0.067-230.904-187.84-418.912-418.913-418.912-231.005 0-418.912 187.907-418.912 418.912 0 231.073 187.907 418.98 418.912 418.913z m-46.511-651.607h93.09v93.09h-93.09v-93.09z m93.09 465.445h-93.09V465.455h93.09v279.263z",fill:"#8a8a8a","p-id":"1386"})))},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))}var v,y,h,g=i.c.div(v||(v=l(["\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ",";\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n"],["\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ",";\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n"])),(function(e){return e.require?"visible":"none"})),O=i.c.div(y||(y=l(["\n  line-height: 28px;\n  /* flex:  */\n"],["\n  line-height: 28px;\n  /* flex:  */\n"]))),j=i.c.div(h||(h=l(["\n  border: 1px dashed transparent;\n  padding-bottom: ","px;\n"],["\n  border: 1px dashed transparent;\n  padding-bottom: ","px;\n"])),(function(e){return e.useMargin?12:0}))},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n.n(r),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function a(e){var t=e.trigger,n=i(Object(r.useState)(!1),2),a=n[0],c=n[1],u=i(Object(r.useState)(1),2),l=(u[0],u[1]),f=Object(r.useRef)(null),s=Object(r.useRef)(null),p=Object(r.useRef)(null);Object(r.useEffect)((function(){return function(){clearTimeout(f.current)}}));var d=Object(r.useCallback)((function(){f.current=setTimeout((function(){c(!0)}),300)}),[]),m=Object(r.useCallback)((function(){clearTimeout(f.current),c(!1)}),[]);Object(r.useEffect)((function(){l((function(e){return e+1}))}),[s.current,a]);return o.a.createElement("span",{onMouseEnter:d,onMouseLeave:m},o.a.createElement("span",{className:"tooltip-trigger",ref:s},t),a&&o.a.createElement("div",{ref:p,style:{position:"absolute",opacity:p.current?1:0,background:"#333",boxShadow:"0 8px 16px 0 rgba(0,0,0,.08)",color:"white",left:function(){var e=s.current.getBoundingClientRect(),t=e.x,n=e.width;return t-(p.current?p.current.getBoundingClientRect():{width:0}).width/2+n/2}(),maxWidth:"300px",textAlign:"left",zIndex:10,borderRadius:"2px",lineHeight:"14px",padding:"12px 12px 12px 12px"}},e.children,o.a.createElement("div",{style:{position:"absolute",width:"8px",height:"8px",left:"calc(50% - 4px)",top:"-4px",boxShadow:"-1px -1px 1px 0 rgba(0,0,0,.1)",transform:"rotate(45deg)",background:"#333"}})))}},209:function(e,t,n){"use strict";n.d(t,"a",(function(){return re}));var r=n(0),o=n.n(r),i=n(883),a=n(475),c=n(468),u=n(889),l=n(189),f=o.a.createContext({}),s=n(188),p=n(177),d=n(206),m=n(186),b=n(176),v=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},y=function(e){var t=e.data;return o.a.createElement("pre",null,JSON.stringify(t,null,2))},h=function(e){var t=v(Object(r.useState)(!1),2),n=t[0],a=t[1],c=e.JsonView,u=void 0===c?y:c,l=Object(i.d)(),f=Object(i.b)(),s=Object(b.c)(l,f);return o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("div",{onClick:function(){a(!n)},style:{background:"blue",right:30,display:"flex",alignItems:"center",color:"white",justifyContent:"center",borderRadius:"5%",width:100,height:32}},"\u67e5\u770b\u6570\u636e"),o.a.createElement("div",{style:{position:"absolute",background:"white",opacity:n?1:0,maxWidth:n?400:0,maxHeight:n?400:0,overflow:"auto",zIndex:100,boxShadow:"0 0 8px 0 rgba(153, 163, 179, 0.28)",borderRadius:4,width:400,height:400,transition:"all 0.5s",padding:24}},o.a.createElement("h3",null,"\u8868\u5355\u8f93\u5165\u6570\u636e"),o.a.createElement("div",{style:{overflow:"auto"}},o.a.createElement("strong",null,"\u72b6\u6001\u6570\u636e"),o.a.createElement(u,{data:l}),o.a.createElement("strong",null,"\u884d\u751f\u72b6\u6001\u6570\u636e"),o.a.createElement(u,{data:s}))))};var g=o.a.createContext(null);function O(){return Object(r.useContext)(g)}var j=n(704),x=n(595),w=Object.prototype.hasOwnProperty,S=Object.prototype.toString;function E(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return!1;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e)){if(0===e.length)return!0;for(var t=0;t<e.length;t++)if(void 0!==e[t]&&null!==e[t]&&""!==e[t]&&0!==e[t])return!1;return!0}if(e instanceof Error)return""===e.message;if(e.toString===S)switch(e.toString()){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(var n in e)if(w.call(e,n))return!1;return!0}return!1}function C(e){return function(e){return void 0===e&&(e=[]),e.filter((function(e){return!E(e)}))}(e).length>0}var P=function(){return(P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},F=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function c(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))},k=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};function I(e){function t(t){return F(this,void 0,void 0,(function(){var n,r,o;return k(this,(function(i){return n=t.map((function(t){return{id:t,value:e.getTaskStateById(Object(b.e)(t,b.a.EditState))}})),(r=n.filter((function(e){return!e.value.modify}))).forEach((function(t){var n=t.id,r=t.value;e.updateState(Object(b.e)(n,b.a.EditState),c.a.Update,c.d.TaskState,P(P({},r),{modify:!0}))})),r.length>0?(o=e.watchOnce(t.map((function(e){return Object(b.e)(e,b.a.Error)}))),e.notifyDownStreamPoints(r.map((function(e){return{key:Object(b.e)(e.id,b.a.EditState),downStreamOnly:!0}}))),[2,o]):[2,n.map((function(t){return e.getTaskStateById(Object(b.e)(t.id,b.a.Error))}))]}))}))}return function(n){var r=n;if(r)return Array.isArray(r)?t(r).then((function(e){return{isError:C(e),errorMsg:r.map((function(t,n){return{msg:e[n],id:t}}))}})):t([r]).then((function(e){return{isError:C(e),errorMsg:{msg:e[0],id:r}}}));var o=Array.from(e.getTasks().keys()).filter((function(e){return new RegExp("^"+b.a.EditState+"\\$\\$.+").test(e)})).map((function(e){return e.match(new RegExp("^"+b.a.EditState+"\\$\\$(.+)"))[1]}));return t(o).then((function(e){return{isError:C(e),errorMsg:o.map((function(t,n){return{msg:e[n],id:t}}))}}))}}var R=n(213),A=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function c(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))},T=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var N=function(){function e(e){void 0===e&&(e={}),this.subscribeMap=new Map,this.globalSubscribeSet=new Set,this._initState=e}return e.prototype.setValue=function(e,t){return this.context.batchNext(e.getId(),t)},e.prototype.getComputeState=function(){return Object(b.c)(this.context.getTaskState().store,this.context.getVirtualTaskState())},e.prototype.getState=function(){return this.context.getAllTaskState()},e.prototype._initContext=function(e){this.context=e},e.prototype.subscribeAll=function(e){var t=this;this.globalSubscribeSet.add(e),this.context.getEventEmitter().addListener(c.b.GlobalState,(function(){t.globalSubscribeSet.has(e)&&e&&e(t.getComputeState())}))},e.prototype.unsubscribeAll=function(e){this.globalSubscribeSet.delete(e)},e.prototype.subscribe=function(e,t){var n=this,r=Object(j.c)(e),o="subscribe/"+Object(R.v1)(),a=function(){t&&t(n.context.getTaskStateById(o))};if(this.subscribeMap.has(r.getId()))this.subscribeMap.get(r.getId()).set(t,{computeId:o,emCallback:a});else{var u=new Map;u.set(t,{computeId:o,emCallback:a}),this.subscribeMap.set(r.getId(),u)}Object(x.a)({id:o,get:function(e){var t=e.get;return t(r)}}).load(this.context),this.context.getEventEmitter().addListener(Object(i.a)(o,c.b.State),a)},e.prototype.unsubscribe=function(e,t){var n=this,r=Object(j.c)(e);if(this.subscribeMap.has(r.getId()))if(t){var o=this.subscribeMap.get(r.getId()).get(t)||{},a=o.computeId,u=o.emCallback;this.context.getEventEmitter().removeListener(Object(i.a)(a,c.b.State),u),this.context.removeTask(a)}else Array.from(this.subscribeMap.get(r.getId()).values()).forEach((function(e){n.context.getEventEmitter().removeListener(Object(i.a)(e.computeId,c.b.State),e.emCallback),n.context.removeTask(e.computeId)}))},e.prototype.reset=function(e){},e.prototype.setFormValue=function(e,t){this.context.batchNext(e,t)},e.prototype.setFormStatus=function(e,t){var n=e;this.context.batchNext(Object(b.e)(n,b.a.Status),t)},e.prototype.setFormCompute=function(e,t){var n=e;this.context.batchNext(Object(b.e)(n,b.a.Compute),t)},e.prototype.validate=function(e){return A(this,void 0,void 0,(function(){return T(this,(function(t){switch(t.label){case 0:return[4,I(this.context)(e)];case 1:return[2,t.sent()]}}))}))},e}(),B=n(591),V=n(506),M=n(507),D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},$=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(t){i(t)}}function c(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))},W=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},J=function(e){var t=G(e),n=function(e){var t=e.name,n=e.type,r=e.defaultValue,o=L(t),i=Object(B.a)({virtual:Object(b.f)(t),id:L(t),defaultValue:Object(s.b)({type:n,defaultValue:r})});return Object(x.a)({id:Object(b.e)(o,b.a.ValueIntercepter),get:function(e){var t=e.get;return t(i)},set:function(e,t){var n=e.get,r=e.set;n(Object(a.f)({id:Object(b.e)(o,b.a.EditState)})).modify||r(Object(a.f)({id:Object(b.e)(o,b.a.EditState)}),(function(e){return D(D({},e),{modify:!0})})),r(i,t)}})}(e),o=function(e){var t=Object(r.useContext)(l.a).paths,n=e.name,o=Object(m.a)(n,t);return Object(b.f)(n)?Object(b.g)(n).map((function(n,r){var i=Object(m.a)(n,t),c=Object(B.a)({id:i,defaultValue:Object(s.b)(e)[r]});return Object(x.a)({id:Object(b.e)(i,b.a.ValueIntercepter),get:function(e){var t=e.get;return t(c)},set:function(e,t){var n=e.get,r=e.set;n(Object(a.f)({id:Object(b.e)(o,b.a.EditState)})).modify||r(Object(a.f)({id:Object(b.e)(o,b.a.EditState)}),(function(e){return D(D({},e),{modify:!0})})),r(c,t)}})})):[]}(e),i=e.name;return function(e){if(Object(b.f)(i)){e.get(n);var r=o.map((function(t){return e.get(t)}));return D(D({},e.get(t)),{value:r})}return D(D({},e.get(t)),{value:e.get(n)})}};function L(e){var t=Object(r.useContext)(l.a).paths;return Object(m.a)(e,t)}function q(e){var t=e.visible,n=void 0===t||t,r=e.preview,o=void 0!==r&&r,i=e.disabled,a=void 0!==i&&i,c=e.require,u=void 0!==c&&c,l=e.componentProps,f=void 0===l?{}:l,s=e.layoutExtends;return{visible:n,preview:o,disabled:a,require:u,componentProps:f,layoutExtends:void 0===s?{}:s}}function G(e){var t=e.name,n=e.alias;return Object(B.a)({virtual:!0,id:Object(b.e)(L(t),b.a.Status,n),defaultValue:q(e)})}function U(e,t,n){return Object(B.a)({virtual:!0,id:Object(b.e)(e,b.a.EditState,t),defaultValue:{modify:!1,autoValidate:n}})}var H=function(e,t){return function(t,n){return t instanceof a.b?e.get(t):"string"==typeof t?e.get(Object(a.f)({id:Object(b.e)(t,b.a.Compute,n)})):void 0}};var K=function(e){return function(t,n,r){if(t instanceof a.b)e.set(t,n);else if("string"==typeof t)try{var o=Object(m.b)(t),i=Object(b.f)(o),c=Object(b.g)(o);if(n===V.a)c.forEach((function(r,o){e.set(Object(a.f)({id:Object(b.e)(Object(m.a)(r,Object(m.c)(t)),b.a.ValueIntercepter)}),n)})),e.set(Object(a.f)({id:Object(b.e)(Object(m.a)(o,Object(m.c)(t)),b.a.Status,r)}),n);else{var u=void 0,l=function(e,t){var n=t;return t instanceof Function&&(n=t(e)),n}(u=D(i?{value:c.map((function(n){return e.get(Object(a.f)({id:Object(b.e)(Object(m.a)(n,Object(m.c)(t)),b.a.ValueIntercepter)}))}))}:{value:e.get(Object(a.f)({id:t}))},e.get(Object(a.f)({id:Object(b.e)(t,b.a.Status)}))),n),f=l.value,s=z(l,["value"]),p=(u.value,z(u,["value"]));if(l.hasOwnProperty("value")){c.forEach((function(n,r){e.set(Object(a.f)({id:Object(b.e)(Object(m.a)(n,Object(m.c)(t)),b.a.ValueIntercepter)}),i?function(e){return Array.isArray(f)&&f?f[e]:void 0}(r):f)}))}e.set(Object(a.f)({id:Object(b.e)(Object(m.a)(o,Object(m.c)(t)),b.a.Status,r)}),D(D({},p),s))}}catch(d){console.warn(d)}}};function X(e){var t=e.name,n=e.alias,r=e.get,o=e.set,i=L(t),a=J(e);return Object(x.a)({virtual:!0,id:Object(b.e)(i,b.a.Compute,n),get:r?function(e,t){var o=a(e),c=r(D(D({},e),{id:i,get:H(e),preComputeValue:t.hasTask(Object(b.e)(i,b.a.Compute,n))?t.getTaskStateById(Object(b.e)(i,b.a.Compute,n)):null,mixedValueAndStatus:o}));return Object(M.b)(c)?c.then((function(e){return D(D({},o),e||{})})):D(D({},o),c||{})}:function(e){return a(e)},set:o?function(e,t,n){o(D(D({},e),{id:i,get:H(e),set:K(e)}),t)}:function(e,t){K(e)(i,t,n)}})}var Q,Y=n(201),Z=function(){return(Z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},te=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ne=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(te(arguments[t]));return e};function re(e){return function(){var t=function(e){var t,n=e.children,r=e.formTypes,i=e.info,a=e.baseProps,c=e.componentProps,u=e.isLayout,l=e.id,f=r.type,s=r.componentType,p=i.visible,m=void 0===p||p,b=Object(Y.a)((function(e){a.onChange(e)}),n),v=Object(d.b)(),y=v.WrapperComponent,h=v.TitleComponent,g=v.ContentComponent,j=Z(Z({},a),{arrayHelper:{mutators:b},componentProps:c}),x=O().components[s||f];"function"==typeof n?t=n(j):x?t=o.a.createElement(x,Z({},j),n):console.warn("xCompnent:"+s+", type: "+f+" not found!!!");var w=Z(Z({},i),{id:l,type:f,children:n});return o.a.createElement(o.a.Fragment,null,u?t:m&&o.a.createElement(y,Z({},w),o.a.createElement(h,Z({},w)),o.a.createElement(g,Z({},w),t)))};return{FormItem:function(e){var n=e.name,a=e.title,u=e.desc,d=e.tips,v=e.children,y=e.type,h=e.showTitle,g=e.tipsPosition,j=(e.alias,e.componentType),w=Object(r.useContext)(l.a).paths,S=Object(m.a)(n,w),C="layout"===y,P=Z(Z({},q(e)),{value:Object(s.b)(e)});!function(e){var t=Object(i.c)(),n=q(e),o=G(e);Object(r.useMemo)((function(){var e=t.getTaskStateById(o.getId());!t.hasTask(o.getId())&&e&&t.updateState(o.getId(),c.a.Update,c.d.TaskState,n)}),[])}(e);var F=te(function(e){return Object(i.i)(X(e))}(e),2),k=F[0],I=F[1],R=Object(i.k)(function(e){var t=this,n=e.name,r=e.alias,o=e.title,i=e.rules,a=void 0===i?[]:i,c=e.validateFirst,u=e.emptyErrorMessage,l=L(n),f=X(e),s=O();return Object(x.a)({virtual:!0,id:Object(b.e)(l,b.a.Error,r),get:function(e,n){return $(t,void 0,void 0,(function(){var t,n,i,p,d,m,b,v,y,h,g,O,j,x,w;return W(this,(function(S){switch(S.label){case 0:return t=e.get(U(l,r,s.autoValidate)),n=t.modify,i=t.autoValidate,p=e.get(f),n||i||c?[3,1]:[2,[]];case 1:d=!1,m=[],b=function(e){return E(e.value.value)?u||o+"\u4e0d\u80fd\u4e3a\u7a7a!":void 0},S.label=2;case 2:S.trys.push([2,7,8,9]),v=_(p.require?a.concat([b]):a),y=v.next(),S.label=3;case 3:return y.done?[3,6]:(h=y.value,O=(g=m).push,[4,h({value:p,get:function(t){return"string"==typeof t&&e.get(U(t,r,i)).modify&&(d=!0),H(e)(t)},id:l})]);case 4:O.apply(g,[S.sent()]),S.label=5;case 5:return y=v.next(),[3,3];case 6:return[3,9];case 7:return j=S.sent(),x={error:j},[3,9];case 8:try{y&&!y.done&&(w=v.return)&&w.call(v)}finally{if(x)throw x.error}return[7];case 9:return d||n||c?[2,m.filter((function(e){return!E(e)}))]:[2,[]];case 10:return[2]}}))}))}})}(e)),A=k.status,T=k.errorMsg,N=k.content,B=void 0===N?P:N,V=B.visible,M=B.disabled,D=B.require,z=B.preview,J=B.value,K=B.componentProps,Q=B.layoutExtends,Y=void 0===Q?{}:Q,ee=void 0;A===c.c.Waiting||A===c.c.Running?ee=p.b.Loading:c.c.Error===A&&(ee=p.b.Error);var re=o.a.createElement(t,{id:S,isLayout:C,baseProps:{value:J,require:D,state:ee,preview:z,disabled:M,onChange:function(e){var t=Z(Z({},k.content),{value:e});I(t)}},info:{showTitle:h,visible:V,title:a,desc:u,tipsPosition:g,tips:d,require:D,layoutExtends:Y,formErrorMsg:R,errorMsg:T},formTypes:{type:y,componentType:j},componentProps:K||{}},v);return C?re:o.a.createElement(l.a.Provider,{value:{paths:ne(w,[n])}},o.a.createElement(f.Provider,{value:{name:n}},re))},RdxFormRoot:function(t){var n=t.children,r=t.store,i=void 0===r?new N({}):r,a=t.JsonView,c=t.autoValidate,l=void 0!==c&&c,f=t.enabledStatePreview,s=ee(t,["children","store","JsonView","autoValidate","enabledStatePreview"]);return o.a.createElement(g.Provider,{value:{components:e.components,autoValidate:l}},o.a.createElement(u.a,Z({},s,{withStore:function(e){i._initContext(e)},initializeState:i._initState,createStore:function(e){return new b.b(e)},onChange:function(){}}),n,f&&o.a.createElement(h,{JsonView:a})))},getReferencedFormValueAtom:function(e){return Object(a.f)({id:Object(b.e)(e,b.a.ValueIntercepter)})},getReferencedFormStatusAtom:function(e){return Object(a.f)({id:Object(b.e)(e,b.a.Status)})},getReferencedFormCompute:function(e){return Object(a.f)({id:Object(b.e)(e,b.a.Compute)})},useValidator:function(){return I(Object(i.c)())},createFormStore:function(e){return new N(e)}}}}!function(e){e.Relative="Relative",e.Absolute="Absolute"}(Q||(Q={}))},213:function(e,t,n){var r=n(216),o=n(217),i=o;i.v1=r,i.v4=o,e.exports=i},216:function(e,t,n){var r,o,i=n(199),a=n(200),c=0,u=0;e.exports=function(e,t,n){var l=t&&n||0,f=t||[],s=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:o;if(null==s||null==p){var d=i();null==s&&(s=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==p&&(p=o=16383&(d[6]<<8|d[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),b=void 0!==e.nsecs?e.nsecs:u+1,v=m-c+(b-u)/1e4;if(v<0&&void 0===e.clockseq&&(p=p+1&16383),(v<0||m>c)&&void 0===e.nsecs&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=m,u=b,o=p;var y=(1e4*(268435455&(m+=122192928e5))+b)%4294967296;f[l++]=y>>>24&255,f[l++]=y>>>16&255,f[l++]=y>>>8&255,f[l++]=255&y;var h=m/4294967296*1e4&268435455;f[l++]=h>>>8&255,f[l++]=255&h,f[l++]=h>>>24&15|16,f[l++]=h>>>16&255,f[l++]=p>>>8|128,f[l++]=255&p;for(var g=0;g<6;++g)f[l+g]=s[g];return t||a(f)}},217:function(e,t,n){var r=n(199),o=n(200);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var c=0;c<16;++c)t[i+c]=a[c];return t||o(a)}},565:function(e,t,n){"use strict";n.r(t),n.d(t,"\u5b9a\u5236\u8868\u5355\u6e32\u67d3",(function(){return f}));var r=n(0),o=n.n(r),i=n(209),a=n(206),c=Object(i.a)({components:{input:function(e){var t=e.value,n=e.onChange;return o.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}})},select:function(e){var t=e.value,n=e.onChange,r=e.componentProps.dataSource,i=void 0===r?[]:r;return o.a.createElement("select",{value:t,onChange:function(e){n(e.target.value)}},i.map((function(e){return o.a.createElement("option",{value:e.value},e.label)})))}}})(),u=c.FormItem,l=c.RdxFormRoot,f=function(){return o.a.createElement(a.a.Provider,{value:{TitleComponent:function(e){return o.a.createElement("span",null,"\u6211\u662ftitle: ",e.title)},ContentComponent:function(e){return o.a.createElement("span",null,e.children,o.a.createElement("div",null,o.a.createElement("strong",null,"\u6211\u662f\u5185\u5bb9")))},WrapperComponent:function(e){var t=e.children;return o.a.createElement("div",{style:{border:"1px solid black",padding:12}},t)}}},o.a.createElement(l,{enabledStatePreview:!0},o.a.createElement(u,{name:"province",title:"\u7701\u4efd",type:"string",componentType:"input"}),o.a.createElement(u,{name:"city",title:"\u57ce\u5e02",type:"string",componentType:"input"})))}},566:function(e,t,n){"use strict";t.a="import React from 'react';\nimport {\n  IFormComponentProps,\n  formBuilder,\n  FormItemRenderComponentsContext,\n} from '@alife/rdx-form';\n\nconst Input = (props: IFormComponentProps<any>) => {\n  const { value, onChange } = props;\n  return (\n    <input\n      value={value}\n      onChange={(event) => {\n        onChange(event.target.value);\n      }}\n    ></input>\n  );\n};\nconst Select = (\n  props: IFormComponentProps<{\n    dataSource: { label: string; value: string }[];\n  }>\n) => {\n  const { value, onChange, componentProps } = props;\n  const { dataSource = [] } = componentProps;\n  return (\n    <select\n      value={value}\n      onChange={(event) => {\n        onChange(event.target.value);\n      }}\n    >\n      {dataSource.map((item) => (\n        <option value={item.value}>{item.label}</option>\n      ))}\n    </select>\n  );\n};\n// \u901a\u8fc7\u6ce8\u518c\u7ec4\u4ef6\uff0c\u521b\u5efaformBuilder\nconst formFn = formBuilder({\n  components: {\n    input: Input,\n    select: Select,\n  },\n});\n// \u901a\u8fc7\u6a21\u578b\u5b9a\u4e49\uff0c\u521b\u5efa\u5e26\u6a21\u578b\u542b\u4e49\u7684\u8868\u5355\nconst AreaForms = formFn<{ province: string; city: number }>();\nconst { FormItem, RdxFormRoot } = AreaForms;\n\n// \u4f7f\u7528AreaForms\u6784\u9020\u4f60\u7684\u4e1a\u52a1\u8f93\u5165\u8868\u5355\nexport const \u5b9a\u5236\u8868\u5355\u6e32\u67d3 = () => {\n  return (\n    <FormItemRenderComponentsContext.Provider\n      value={{\n        TitleComponent: (props) => {\n          return <span>\u6211\u662ftitle: {props.title}</span>;\n        },\n        ContentComponent: (props) => {\n          return (\n            <span>\n              {props.children}\n              <div>\n                <strong>\u6211\u662f\u5185\u5bb9</strong>\n              </div>\n            </span>\n          );\n        },\n        WrapperComponent: ({ children }) => {\n          return (\n            <div style={{ border: '1px solid black', padding: 12 }}>\n              {children}\n            </div>\n          );\n        },\n      }}\n    >\n      <RdxFormRoot enabledStatePreview={true}>\n        <FormItem\n          name='province'\n          title='\u7701\u4efd'\n          type='string'\n          componentType={'input'}\n        ></FormItem>\n        <FormItem\n          name='city'\n          title='\u57ce\u5e02'\n          type='string'\n          componentType={'input'}\n        ></FormItem>\n      </RdxFormRoot>\n    </FormItemRenderComponentsContext.Provider>\n  );\n};\n"}}]);