(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{126:function(t,n,e){"use strict";e.r(n),e.d(n,"frontMatter",(function(){return A})),e.d(n,"metadata",(function(){return O})),e.d(n,"toc",(function(){return j})),e.d(n,"default",(function(){return g}));var a={};e.r(a),e.d(a,"Root",(function(){return w}));var o=e(3),r=e(7),i=e(0),l=e.n(i),u=e(197),c=e(214),d=e(591),s=e(889),m=e(883),p=e(704),x=function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var a,o,r=e.call(t),i=[];try{for(;(void 0===n||n-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return i},b=Object(d.a)({id:"amount",defaultValue:1}),f=Object(d.a)({id:"unit",defaultValue:1}),w=function(){return l.a.createElement(s.a,null,l.a.createElement(y,{atom:b,title:"\u6570\u91cf"}),l.a.createElement(y,{atom:f,title:"\u5355\u4ef7"}),l.a.createElement(v,null),l.a.createElement(R,null))},v=function(){var t=x(Object(m.k)(Object(p.c)([b,f])),2),n=t[0],e=t[1];return l.a.createElement("div",null,l.a.createElement("strong",null,"\u6570\u7ec4\u5f62\u5f0f\u53c2\u6570:"),n*e)},R=function(){var t=Object(m.k)(Object(p.c)({amount:b,unit:f})),n=t.amount,e=t.unit;return l.a.createElement("div",null,l.a.createElement("strong",null,"Map\u5f62\u5f0f\u53c2\u6570:"),n*e)},y=function(t){t.title;var n=t.atom,e=x(Object(m.h)(n),2),a=e[0],o=e[1];return l.a.createElement("div",{style:{display:"flex",width:200}},l.a.createElement("strong",null,"title "),l.a.createElement("button",{onClick:function(){o(a+1)}},"+"),l.a.createElement("span",null,a),l.a.createElement("button",{onClick:function(){o((function(t){return t-1}))}},"-"))},A={id:"waitForAll",title:"waitForAll"},O={unversionedId:"api/waitForAll",id:"api/waitForAll",isDocsHomePage:!1,title:"waitForAll",description:"\u901a\u8fc7\u4f20\u9012\u4e00\u4e2a\u6216\u591a\u4e2aatom\u6216\u8005compute\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u884d\u751f\u72b6\u6001\uff0c\u8fd9\u4e2a\u884d\u751f\u72b6\u6001\u53ef\u4ee5\u5e76\u53d1\u7684\u83b7\u53d6\u591a\u4e2a\u5f02\u6b65\u7684\u72b6\u6001\u3002",source:"@site/docs/api/waitForAll.mdx",slug:"/api/waitForAll",permalink:"/rdx-doc/docs/api/waitForAll",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/api/waitForAll.mdx",version:"current",sidebar:"someSidebar",previous:{title:"useRdxStatus",permalink:"/rdx-doc/docs/api/useRdxStatus"},next:{title:"waitForSetter",permalink:"/rdx-doc/docs/api/waitForSetter"}},j=[],V={toc:j};function g(t){var n=t.components,e=Object(r.a)(t,["components"]);return Object(u.b)("wrapper",Object(o.a)({},V,e,{components:n,mdxType:"MDXLayout"}),Object(u.b)("p",null,"\u901a\u8fc7\u4f20\u9012\u4e00\u4e2a\u6216\u591a\u4e2aatom\u6216\u8005compute\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u884d\u751f\u72b6\u6001\uff0c\u8fd9\u4e2a\u884d\u751f\u72b6\u6001\u53ef\u4ee5\u5e76\u53d1\u7684\u83b7\u53d6\u591a\u4e2a\u5f02\u6b65\u7684\u72b6\u6001\u3002"),Object(u.b)("hr",null),Object(u.b)("pre",null,Object(u.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx"}),"function waitForAll<T extends TMixedRdxValue>(\n  dependencies: T,\n): T extends RdxValue<infer P>\n  ? RdxValueReadOnly<P>\n  : RdxValueReadOnly<{ [P in keyof T]: UnwrapRdxValue<T[P]> }>;\n\nexport type TMixedRdxValue =\n  | RdxValue<any>\n  | RdxValue<any>[]\n  | { [key: string]: RdxValue<any> };\n")),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},"dependencies: \u53ef\u4ee5\u662f\u4e00\u4e2a atom \u6216\u8005\u662f\u4e00\u4e2a compute\uff0c\u6216\u8005\u662f\u6709atom\u3001compute\u7ec4\u6210\u7684\u6570\u7ec4\u6216\u8005\u5bf9\u8c61.")),Object(u.b)(c.a,{code:"import React from 'react';\nimport { atom, useRdxState, RdxContext, useRdxValue, RdxState, waitForAll } from '@alife/rdx';\n\nconst amountAtom = atom({\n  id: 'amount',\n  defaultValue: 1,\n});\nconst unitAtom = atom({\n  id: 'unit',\n  defaultValue: 1,\n});\n\nexport const Root = () => {\n  return (\n    <RdxContext>\n      <View atom={amountAtom} title='\u6570\u91cf'/>\n      <View atom={unitAtom} title='\u5355\u4ef7' />\n      <ArrayPreview />\n      <MapPreview />\n    </RdxContext>\n  );\n};\nconst ArrayPreview = () => {\n  const [amount, unit] = useRdxValue(waitForAll([amountAtom, unitAtom]));\n  return (\n    <div>\n      <strong>\u6570\u7ec4\u5f62\u5f0f\u53c2\u6570:</strong>\n      {amount * unit}\n    </div>\n  );\n};\nconst MapPreview = () => {\n  const { amount, unit } = useRdxValue(waitForAll({ amount: amountAtom, unit: unitAtom}));\n  return (\n    <div>\n      <strong>Map\u5f62\u5f0f\u53c2\u6570:</strong>\n      {amount * unit}\n    </div>\n  );\n};\nconst View = (props: { title: string, atom: RdxState<number> }) => {\n  const {title, atom}= props\n  const [state, setState] = useRdxState(atom);\n  return (\n    <div style={{ display: 'flex', width: 200 }}>\n      <strong>title </strong>\n      {/* \u901a\u8fc7\u4f20\u9012\u65b0\u7684\u503c\u6765\u66f4\u65b0\u6570\u636e */}\n      <button\n        onClick={() => {\n          setState(state + 1);\n        }}\n      >\n        +\n      </button>\n      <span>{state}</span>\n      {/* \u901a\u8fc7\u4f20\u9012updated function \u6765\u66f4\u65b0\u6570\u636e */}\n      <button\n        onClick={() => {\n          setState((state) => {\n            return state - 1;\n          });\n        }}\n      >\n        -\n      </button>\n    </div>\n  );\n};\n",example:a,mdxType:"ExampleCustomizer"}))}g.isMDXComponent=!0}}]);