(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{135:function(t,e,n){"use strict";n.r(e),n.d(e,"frontMatter",(function(){return R})),n.d(e,"metadata",(function(){return M})),n.d(e,"toc",(function(){return V})),n.d(e,"default",(function(){return B}));var r={};n.r(r),n.d(r,"\u5b9a\u5236\u8868\u5355\u6e32\u67d3",(function(){return F}));var o=n(3),i=n(7),a=n(0),c=n.n(a),u=n(197),l=n(214),s=n(205),f=n(177),p=n(207),d=n(209),m=n(206),v=n(178),b=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};function h(t){return c.a.createElement("div",{title:t.msg,style:{color:"red",width:"100%",maxHeight:32,maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},t.msg)}function y(t){return c.a.createElement("div",{style:{color:"#999999"}},t.msg)}function g(t){var e=t.type,n=t.children,r=t.id,o=t.layoutExtends,i=Object(s.d)(o.span).containerStyle;return c.a.createElement(T,{"data-id":r,useMargin:e!==f.a.Object,style:i,className:"rdx-form-item"},n)}function x(t){var e=t.children,n=t.title,r=t.showTitle,o=void 0===r||r,i=t.tips,a=t.layoutExtends,u=t.tipsPosition,l=void 0===u?"after":u;console.log("tipsPosition: ",l);var f=Object(s.d)(a.span,o&&!!n).contentStyle;return c.a.createElement(P,{style:f,className:"rdx-form-item-content"},c.a.createElement("span",null,e,i&&"after"===l&&c.a.createElement(O,{tips:i})),c.a.createElement(y,{msg:t.desc}),c.a.createElement(h,{msg:t.errorMsg}),c.a.createElement(h,{msg:(t.formErrorMsg||[]).join(",")}))}function O(t){var e=t.tips;return c.a.createElement(p.a,{trigger:c.a.createElement("span",{style:{verticalAlign:"middle",paddingLeft:"6px"}},c.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14"},c.a.createElement("path",{d:"M512 1024C229.069 1024 0 794.829 0 512S229.069 0 512 0c282.931 0 512 229.171 512 512s-229.069 512-512 512z m-0.034-93.12c231.073 0.066 418.98-187.942 418.913-418.914 0.067-230.904-187.84-418.912-418.913-418.912-231.005 0-418.912 187.907-418.912 418.912 0 231.073 187.907 418.98 418.912 418.913z m-46.511-651.607h93.09v93.09h-93.09v-93.09z m93.09 465.445h-93.09V465.455h93.09v279.263z",fill:"#8a8a8a","p-id":"1386"})))},c.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}}))}function j(t){var e=t.title,n=t.require,r=t.showTitle,o=void 0===r||r,i=t.tips,a=t.layoutExtends,u=t.tipsPosition,l=void 0===u?"after":u,f=Object(s.d)(a.span,o&&!!e).labelStyle;return c.a.createElement(c.a.Fragment,null,e&&o&&c.a.createElement(C,{style:f,require:n,className:"rdx-form-item-label"},e,i&&"before"===l&&c.a.createElement(O,{tips:i})))}var w,S,E,C=v.c.div(w||(w=b(["\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ",";\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n"],["\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ",";\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n"])),(function(t){return t.require?"visible":"none"})),P=v.c.div(S||(S=b(["\n  line-height: 28px;\n"],["\n  line-height: 28px;\n"]))),T=v.c.div(E||(E=b(["\n  border: 1px dashed transparent;\n  padding-bottom: ","px;\n"],["\n  border: 1px dashed transparent;\n  padding-bottom: ","px;\n"])),(function(t){return t.useMargin?12:0})),I=Object(d.a)({components:{input:function(t){var e=t.value,n=t.onChange;return c.a.createElement("input",{value:e,onChange:function(t){n(t.target.value)}})},select:function(t){var e=t.value,n=t.onChange,r=t.componentProps.dataSource,o=void 0===r?[]:r;return c.a.createElement("select",{value:e,onChange:function(t){n(t.target.value)}},o.map((function(t){return c.a.createElement("option",{value:t.value},t.label)})))}}})(),k=I.FormItem,A=I.RdxFormRoot,F=function(){return c.a.createElement(m.a.Provider,{value:{TitleComponent:j,ContentComponent:x,WrapperComponent:g}},c.a.createElement(A,{enabledStatePreview:!0},c.a.createElement(k,{name:"province",title:"\u7701\u4efd",type:"string",desc:"\u6211\u662f\u63cf\u8ff0\u3002\u3002\u3002",tips:"\u6211\u662f\u63d0\u793a",componentType:"input"}),c.a.createElement(k,{name:"city",title:"\u57ce\u5e02",tips:"\u6211\u662f\u63d0\u793a",tipsPosition:"before",type:"string",componentType:"input"})))},R={id:"customFormRender",title:"\u81ea\u5b9a\u4e49\u8868\u5355\u6e32\u67d3\u5668"},M={unversionedId:"rdx-form/tutorials/customFormRender",id:"rdx-form/tutorials/customFormRender",isDocsHomePage:!1,title:"\u81ea\u5b9a\u4e49\u8868\u5355\u6e32\u67d3\u5668",description:"\u901a\u8fc7 formBuilder,\u5feb\u901f\u8fdb\u884c\u8868\u5355\u6e32\u67d3\u65b9\u5f0f\u7684\u5b9a\u5236\u3002",source:"@site/docs/rdx-form/tutorials/customFormRender.mdx",slug:"/rdx-form/tutorials/customFormRender",permalink:"/rdx-doc/docs/rdx-form/tutorials/customFormRender",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/rdx-form/tutorials/customFormRender.mdx",version:"current",sidebar:"someSidebar",previous:{title:"\u81ea\u5b9a\u4e49\u6e32\u67d3\u5217\u8868",permalink:"/rdx-doc/docs/rdx-form/tutorials/customList"},next:{title:"formBuilder(options)",permalink:"/rdx-doc/docs/rdx-form/api/formBuilder/formBuilder"}},V=[],N={toc:V};function B(t){var e=t.components,n=Object(i.a)(t,["components"]);return Object(u.b)("wrapper",Object(o.a)({},N,n,{components:e,mdxType:"MDXLayout"}),Object(u.b)("p",null,"\u901a\u8fc7 formBuilder,\u5feb\u901f\u8fdb\u884c\u8868\u5355\u6e32\u67d3\u65b9\u5f0f\u7684\u5b9a\u5236\u3002"),Object(u.b)(l.a,{code:"import React from 'react';\nimport {\n  BaseType,\n  createLayout,\n  IContentComponent,\n  IFormComponentProps,\n  IMessageComponent,\n  formBuilder,\n  Tooltip,\n  FormItemRenderComponentsContext,\n} from '@alife/rdx-form';\nimport styled from 'styled-components';\n\nfunction ErrorComponent(props: IMessageComponent) {\n  return (\n    <div\n      title={props.msg}\n      style={{\n        color: 'red',\n        width: '100%',\n        maxHeight: 32,\n        maxWidth: 300,\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n      }}\n    >\n      {props.msg}\n    </div>\n  );\n}\nfunction DescComponent(props: IMessageComponent) {\n  return <div style={{ color: '#999999' }}>{props.msg}</div>;\n}\nfunction WrapperComponent(props: IContentComponent) {\n  const { type, children, id, layoutExtends } = props;\n  const { containerStyle } = createLayout(layoutExtends.span);\n  return (\n    <FormItemWrapper\n      data-id={id}\n      useMargin={type !== BaseType.Object}\n      style={containerStyle}\n      className='rdx-form-item'\n    >\n      {children}\n    </FormItemWrapper>\n  );\n}\nfunction ContentComponent(props: IContentComponent) {\n  const {\n    children,\n    title,\n    showTitle = true,\n    tips,\n    layoutExtends,\n    tipsPosition = 'after',\n  } = props;\n  console.log('tipsPosition: ', tipsPosition);\n  const { contentStyle } = createLayout(\n    layoutExtends.span,\n    showTitle && !!title\n  );\n  return (\n    <FormStyleItemContent\n      style={contentStyle}\n      className='rdx-form-item-content'\n    >\n      <span>\n        {children}\n        {tips && tipsPosition === 'after' && <Tips tips={tips} />}\n      </span>\n\n      <DescComponent msg={props.desc} />\n      <ErrorComponent msg={props.errorMsg} />\n      <ErrorComponent msg={(props.formErrorMsg || []).join(',')} />\n    </FormStyleItemContent>\n  );\n}\nfunction Tips(props: { tips: string }) {\n  const { tips } = props;\n  return (\n    <Tooltip\n      trigger={\n        <span\n          style={{\n            verticalAlign: 'middle',\n            paddingLeft: '6px',\n          }}\n        >\n          <svg\n            // t='1602216301118'\n            // className='icon'\n            viewBox='0 0 1024 1024'\n            version='1.1'\n            xmlns='http://www.w3.org/2000/svg'\n            // p-id='1385'\n            width='14'\n            height='14'\n          >\n            <path\n              d='M512 1024C229.069 1024 0 794.829 0 512S229.069 0 512 0c282.931 0 512 229.171 512 512s-229.069 512-512 512z m-0.034-93.12c231.073 0.066 418.98-187.942 418.913-418.914 0.067-230.904-187.84-418.912-418.913-418.912-231.005 0-418.912 187.907-418.912 418.912 0 231.073 187.907 418.98 418.912 418.913z m-46.511-651.607h93.09v93.09h-93.09v-93.09z m93.09 465.445h-93.09V465.455h93.09v279.263z'\n              fill='#8a8a8a'\n              p-id='1386'\n            ></path>\n          </svg>\n        </span>\n      }\n    >\n      <div dangerouslySetInnerHTML={{ __html: tips }}></div>\n    </Tooltip>\n  );\n}\nfunction TitleComponent(props: IContentComponent) {\n  const {\n    title,\n    require,\n    showTitle = true,\n    tips,\n    layoutExtends,\n    tipsPosition = 'after',\n  } = props;\n  const { labelStyle } = createLayout(layoutExtends.span, showTitle && !!title);\n  return (\n    <>\n      {title && showTitle && (\n        <FormStyleItemLabel\n          style={labelStyle}\n          require={require}\n          className='rdx-form-item-label'\n        >\n          {title}\n          {tips && tipsPosition === 'before' && <Tips tips={tips} />}\n        </FormStyleItemLabel>\n      )}\n    </>\n  );\n}\n\nconst FormStyleItemLabel = styled.div<{\n  require: boolean;\n}>`\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ${(props) => (props.require ? 'visible' : 'none')};\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n`;\nconst FormStyleItemContent = styled.div<{\n  col?: number;\n}>`\n  line-height: 28px;\n`;\nconst FormItemWrapper = styled.div<{\n  useMargin: boolean;\n}>`\n  border: 1px dashed transparent;\n  padding-bottom: ${(props) => {\n    return props.useMargin ? 12 : 0;\n  }}px;\n`;\n\nconst Input = (props: IFormComponentProps<any>) => {\n  const { value, onChange } = props;\n  return (\n    <input\n      value={value}\n      onChange={(event) => {\n        onChange(event.target.value);\n      }}\n    ></input>\n  );\n};\nconst Select = (\n  props: IFormComponentProps<{\n    dataSource: { label: string; value: string }[];\n  }>\n) => {\n  const { value, onChange, componentProps } = props;\n  const { dataSource = [] } = componentProps;\n  return (\n    <select\n      value={value}\n      onChange={(event) => {\n        onChange(event.target.value);\n      }}\n    >\n      {dataSource.map((item) => (\n        <option value={item.value}>{item.label}</option>\n      ))}\n    </select>\n  );\n};\n// \u901a\u8fc7\u6ce8\u518c\u7ec4\u4ef6\uff0c\u521b\u5efaformBuilder\nconst formFn = formBuilder({\n  components: {\n    input: Input,\n    select: Select,\n  },\n});\n// \u901a\u8fc7\u6a21\u578b\u5b9a\u4e49\uff0c\u521b\u5efa\u5e26\u6a21\u578b\u542b\u4e49\u7684\u8868\u5355\nconst AreaForms = formFn<{ province: string; city: number }>();\nconst { FormItem, RdxFormRoot } = AreaForms;\n\n// \u4f7f\u7528AreaForms\u6784\u9020\u4f60\u7684\u4e1a\u52a1\u8f93\u5165\u8868\u5355\nexport const \u5b9a\u5236\u8868\u5355\u6e32\u67d3 = () => {\n  return (\n    <FormItemRenderComponentsContext.Provider\n      value={{\n        TitleComponent: TitleComponent,\n        ContentComponent: ContentComponent,\n        WrapperComponent: WrapperComponent,\n      }}\n    >\n      <RdxFormRoot enabledStatePreview={true}>\n        <FormItem\n          name='province'\n          title='\u7701\u4efd'\n          type='string'\n          desc={'\u6211\u662f\u63cf\u8ff0\u3002\u3002\u3002'}\n          tips={'\u6211\u662f\u63d0\u793a'}\n          componentType={'input'}\n        ></FormItem>\n        <FormItem\n          name='city'\n          title='\u57ce\u5e02'\n          tips={'\u6211\u662f\u63d0\u793a'}\n          tipsPosition={'before'}\n          type='string'\n          componentType={'input'}\n        ></FormItem>\n      </RdxFormRoot>\n    </FormItemRenderComponentsContext.Provider>\n  );\n};\n",example:r,mdxType:"ExampleCustomizer"}))}B.isMDXComponent=!0},176:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return p})),n.d(e,"c",(function(){return d}));var r,o=n(188),i=n(195),a=(n(177),function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),c=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},u=function(){function t(t){this.store={},this.store=t}return t.prototype.clone=function(){return new t(this.store)},t.prototype.merge=function(t){throw new Error("Method not implemented.")},t.prototype.remove=function(t,e){this.store=Object(i.b)(this.store,(function(e){Object(o.d)(e,t,void 0)}))},t.prototype.update=function(t,e,n){this.store=Object(i.b)(this.store,(function(n){Object(o.d)(n,t,e)}))},t.prototype.get=function(t,e){return Object(o.c)(this.store,t)},t.prototype.getAll=function(){return this.store},t}();function l(t){return void 0===t&&(t=""),t.split("|")}function s(t){return void 0===t&&(t=""),t.includes("|")}function f(t){return t+"\\$\\$"}function p(t,e,n){return e+"$$"+t+(n?"$$"+n:"")}function d(t,e){return Object.keys(e).filter((function(t){return t.startsWith(r.Compute+"$$")})).reduce((function(t,n){var r=function(t){var e=t.split("$$");return{type:e[0],id:e[1],alias:e[2]}}(n),i=r.id,a=(r.alias,r.type,i.split(".")),u=a[a.length-1];return u.includes("|")?u.split("|").forEach((function(r,i){var u=c(a.slice(0,a.length-1),[r]).join(".");e[n].value?Object(o.d)(t,u,e[n].value[i]):Object(o.d)(t,u,void 0)})):Object(o.d)(t,i,e[n].value),t}),JSON.parse(JSON.stringify(t)))}!function(t){t.ValueIntercepter="StateIntercepter",t.EditState="editState",t.Compute="compute",t.Status="status",t.Error="error",t.Rule="rule"}(r||(r={}))},177:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r,o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(t){t.Object="object",t.Array="array",t.String="string",t.Number="number",t.Boolean="boolean"}(r||(r={}));var i,a=o({},r);!function(t){t.Loading="loading",t.Error="error"}(i||(i={}))},186:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return p}));var r=n(0),o=(n(883),n(475),n(189)),i=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};function c(t){return"function"==typeof t}var u=function(){var t=Object(r.useContext)(o.a).paths;return(void 0===t?[]:t).join(".")};function l(t,e){return a(e,[t]).join(".")}function s(t){var e=[];return Array.isArray(t)||(e=t.split(".")),e}function f(t){var e=s(t);return e[e.length-1]}function p(t){var e=s(t);return e.slice(0,e.length-1)}},188:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return p}));var r=n(0),o=n.n(r),i=n(186),a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function u(t){var e=t.type,n=t.defaultValue;return null!=n?Object(i.d)(n)?n():n:"array"===e?[]:"object"===e?{}:"string"===e?"":void 0}function l(t){var e=[];return o.a.Children.forEach(t,(function(t,n){e.push(t.props)})),e}function s(t){var e={};return o.a.Children.forEach(t,(function(n,r){0===r&&(e="object"===n.props.type?a(a({},n.props),{childrenPropsInfo:l(t)}):n.props)})),e}function f(t,e,n){var r,o,i=(""+e).split(".");if(!(i&&i.length>0))return t;var a=t,u=0;try{for(var l=c(i),s=l.next();!s.done;s=l.next()){var f=s.value;if(u===i.length-1)return void 0===a[f]?n:a[f];if(void 0===a[f])return n;a=a[f],u++}}catch(p){r={error:p}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}function p(t,e,n){var r,o;void 0===t&&(t={});var i=(""+e).split(".");if(i&&i.length>0){var a=t,u=0;try{for(var l=c(i),s=l.next();!s.done;s=l.next()){var f=s.value;u===i.length-1?a[f]=n:(void 0===a[f]&&(a[f]={}),a=a[f]),u++}}catch(p){r={error:p}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}return t}},189:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(0),o=n.n(r).a.createContext({paths:[]});function i(){var t=Object(r.useContext)(o).paths;return{paths:t,parentPaths:t.slice(0,t.length-1)}}},195:function(t,e,n){"use strict";function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(t){return!!t&&!!t[W]}function i(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[z]||!!t.constructor[z]||f(t)||p(t))}function a(t,e,n){void 0===n&&(n=!1),0===c(t)?(n?Object.keys:q)(t).forEach((function(n){return e(n,t[n],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function c(t){var e=t[W];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:f(t)?2:p(t)?3:0}function u(t,e){return 2===c(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){return 2===c(t)?t.get(e):t[e]}function s(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function f(t){return N&&t instanceof Map}function p(t){return B&&t instanceof Set}function d(t){return t.o||t.t}function m(t,e){if(void 0===e&&(e=!1),Array.isArray(t))return t.slice();var n=Object.create(Object.getPrototypeOf(t));return a(t,(function(o){if(o!==W){var i=Object.getOwnPropertyDescriptor(t,o),a=i.value;i.get&&(e||r(1),a=i.get.call(t)),i.enumerable?n[o]=a:Object.defineProperty(n,o,{value:a,writable:!0,configurable:!0})}})),n}function v(t,e){o(t)||h(t)||!i(t)||(c(t)>1&&(t.set=t.add=t.clear=t.delete=b),Object.freeze(t),e&&a(t,(function(t,e){return v(e,!0)}),!0))}function b(){r(2)}function h(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function y(t){var e=$[t];return e||r(19,t),e}function g(){return M}function x(t,e){e&&(y("Patches"),t.u=[],t.s=[],t.v=e)}function O(t){j(t),t.p.forEach(S),t.p=null}function j(t){t===M&&(M=t.l)}function w(t){return M={p:[],l:M,h:t,m:!0,_:0}}function S(t){var e=t[W];0===e.i||1===e.i?e.j():e.O=!0}function E(t,e){e._=e.p.length;var n=e.p[0],o=void 0!==t&&t!==n;return e.h.g||y("ES5").S(e,t,o),o?(n[W].P&&(O(e),r(4)),i(t)&&(t=C(e,t),e.l||T(e,t)),e.u&&y("Patches").M(n[W],t,e.u,e.s)):t=C(e,n,[]),O(e),e.u&&e.v(e.u,e.s),t!==D?t:void 0}function C(t,e,n){if(h(e))return e;var r=e[W];if(!r)return a(e,(function(o,i){return P(t,r,e,o,i,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return T(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=m(r.k,!0):r.o;a(o,(function(e,i){return P(t,r,o,e,i,n)})),T(t,o,!1),n&&t.u&&y("Patches").R(r,n,t.u,t.s)}return r.o}function P(t,e,n,r,a,f){if(o(a)){var p=C(t,a,f&&e&&3!==e.i&&!u(e.D,r)?f.concat(r):void 0);if(m=r,v=p,2===(b=c(d=n))?d.set(m,v):3===b?(d.delete(m),d.add(v)):d[m]=v,!o(p))return;t.m=!1}var d,m,v,b;if((!e||!s(a,l(e.t,r)))&&i(a)){if(!t.h.N&&t._<1)return;C(t,a),e&&e.A.l||T(t,a)}}function T(t,e,n){void 0===n&&(n=!1),t.h.N&&t.m&&v(e,n)}function I(t,e){var n=t[W],r=Reflect.getOwnPropertyDescriptor(n?d(n):t,e);return r&&r.value}function k(t){if(!t.P){if(t.P=!0,0===t.i||1===t.i){var e=t.o=m(t.t);a(t.p,(function(t,n){e[t]=n})),t.p=void 0}t.l&&k(t.l)}}function A(t){t.o||(t.o=m(t.t))}function F(t,e,n){var r=f(e)?y("MapSet").T(e,n):p(e)?y("MapSet").F(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:g(),P:!1,I:!1,D:{},l:e,t:t,k:null,p:{},o:null,j:null,C:!1},o=r,i=_;n&&(o=[r],i=J);var a=Proxy.revocable(o,i),c=a.revoke,u=a.proxy;return r.k=u,r.j=c,u}(e,n):y("ES5").J(e,n);return(n?n.A:g()).p.push(r),r}n.d(e,"b",(function(){return U}));var R,M,V="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),N="undefined"!=typeof Map,B="undefined"!=typeof Set,L="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,D=V?Symbol("immer-nothing"):((R={})["immer-nothing"]=!0,R),z=V?Symbol("immer-draftable"):"__$immer_draftable",W=V?Symbol("immer-state"):"__$immer_state",q=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames),$={},_={get:function(t,e){if(e===W)return t;var n=t.p;if(!t.P&&u(n,e))return n[e];var r=d(t)[e];if(t.I||!i(r))return r;if(t.P){if(r!==I(t.t,e))return r;n=t.o}return n[e]=F(t.A.h,r,t)},has:function(t,e){return e in d(t)},ownKeys:function(t){return Reflect.ownKeys(d(t))},set:function(t,e,n){if(!t.P){var r=I(t.t,e);if(n?s(r,n)||n===t.p[e]:s(r,n)&&e in t.t)return!0;A(t),k(t)}return t.D[e]=!0,t.o[e]=n,!0},deleteProperty:function(t,e){return void 0!==I(t.t,e)||e in t.t?(t.D[e]=!1,A(t),k(t)):t.D[e]&&delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=d(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&(r.writable=!0,r.configurable=1!==t.i||"length"!==e),r},defineProperty:function(){r(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){r(12)}},J={};a(_,(function(t,e){J[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),J.deleteProperty=function(t,e){return _.deleteProperty.call(this,t[0],e)},J.set=function(t,e,n){return _.set.call(this,t[0],e,n,t[0])};var H=new(function(){function t(t){this.g=L,this.N=!1,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var e=t.prototype;return e.produce=function(t,e,n){if("function"==typeof t&&"function"!=typeof e){var o=e;e=t;var a=this;return function(t){var n=this;void 0===t&&(t=o);for(var r=arguments.length,i=Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];return a.produce(t,(function(t){var r;return(r=e).call.apply(r,[n,t].concat(i))}))}}var c;if("function"!=typeof e&&r(6),void 0!==n&&"function"!=typeof n&&r(7),i(t)){var u=w(this),l=F(this,t,void 0),s=!0;try{c=e(l),s=!1}finally{s?O(u):j(u)}return"undefined"!=typeof Promise&&c instanceof Promise?c.then((function(t){return x(u,n),E(t,u)}),(function(t){throw O(u),t})):(x(u,n),E(c,u))}if((c=e(t))!==D)return void 0===c&&(c=t),this.N&&v(c,!0),c},e.produceWithPatches=function(t,e){var n,r,o=this;return"function"==typeof t?function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.produceWithPatches(e,(function(e){return t.apply(void 0,[e].concat(r))}))}:[this.produce(t,e,(function(t,e){n=t,r=e})),n,r]},e.createDraft=function(t){i(t)||r(8);var e=w(this),n=F(this,t,void 0);return n[W].C=!0,j(e),n},e.finishDraft=function(t,e){var n=(t&&t[W]).A;return x(n,e),E(void 0,n)},e.setAutoFreeze=function(t){this.N=t},e.setUseProxies=function(t){L||r(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}var i=y("Patches").U;return o(t)?i(t,e):this.produce(t,(function(t){return i(t,e.slice(n+1))}))},t}()),U=H.produce;H.produceWithPatches.bind(H),H.setAutoFreeze.bind(H),H.setUseProxies.bind(H),H.applyPatches.bind(H),H.createDraft.bind(H),H.finishDraft.bind(H);e.a=U},199:function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},200:function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,o=n;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}},201:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(188),o=n(883),i=n(186),a=n(177),c=n(176),u=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},l=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t};function s(t,e){var n=Object(i.e)(),u=Object(o.c)(),s=function(){return u.getTaskStateById(n)||{}||[]},f=Object(r.a)(e);Object.values(c.a).map((function(t){return Object(c.d)(t)})).join("|");function p(t){var e=function(t){var e=f.type===a.a.Object||f.type===a.a.Array?new RegExp("(^"+n+"."+t+".(.+))|(^"+n+"."+t+"$)"):new RegExp("^"+n+"."+t+"$");return console.log("rule: ",e),e}(t),r=Array.from(u.getTasks().keys()).filter((function(t){return e.test(t)}));return console.log("vaildKeys: ",r),r}function d(t){p(t).reverse().forEach((function(t){u.removeTask(t),u.removeTask(Object(c.e)(t,c.a.Error)),u.removeTask(Object(c.e)(t,c.a.ValueIntercepter)),u.removeTask(Object(c.e)(t,c.a.Status)),u.removeTask(Object(c.e)(t,c.a.EditState)),u.removeTask(Object(c.e)(t,c.a.Compute))})),u.removeTaskState(n+"."+t)}var m=function(t,e){var r=[n,t].join("."),o=[n,e].join("."),i=JSON.parse(JSON.stringify(u.getTaskStateById(r))),a=JSON.parse(JSON.stringify(u.getTaskStateById(o)));d(t),d(e),u.setTaskState(r,a),u.setTaskState(o,i)};return{add:function(){t(l(s(),[Object(r.b)(f)]))},moveDown:function(t){t+1>s().length||m(t,t+1)},moveUp:function(t){t-1<0||m(t-1,t)},remove:function(e){for(var n=[],r=e;r<s().length-1;r++)m(r,r+1),n=n.concat(p(r).concat(p(r+1)));d(s().length-1),t(s().slice(0,s().length-1))},removeAll:function(){p(s().length-1).forEach((function(t){u.removeTask(t)})),t([])},switchItem:m}}},205:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return u}));var r,o,i=n(0);!function(t){t.Grid="grid",t.Inline="inline",t.Classic="classic",t.Base="base"}(r||(r={})),function(t){t.Left="left",t.Right="right",t.Top="top"}(o||(o={}));var a=Object(i.createContext)({});function c(t,e){return void 0===e&&(e=24),t/e*100+"%"}function u(t,e){void 0===e&&(e=!0);var n=Object(i.useContext)(a),u=n.layoutType,l=void 0===u?r.Base:u,s=n.columns,f=void 0===s?24:s,p=n.labelWidth,d=n.labelTextAlign,m=void 0===d?"right":d,v=n.labelCol,b=void 0===v?8:v,h=n.wrapWidth,y=n.wrapCol,g=void 0===y?16:y,x={},O={},j={};return l===r.Base?(x.display="flex",m===o.Top?x.flexDirection="column":O.textAlign=m,O.flexGrow=0,j.flex=1):l===r.Classic?(x.display="flex",m===o.Top?(x.flexDirection="column",O.textAlign="left"):O.textAlign=m,O.flex="0 0 "+c(b),j.flex="0 0 "+c(e?g:g+b),j.overflow="hidden"):l===r.Inline?(x.display="inline-block",m!==o.Right&&m!==o.Left||(O.display="inline-block",j.display="inline-block",O.textAlign=m),O.width=p,j.width=h,j.marginRight=20):l===r.Grid&&(x.display="flex",x.flex=O.flex="0 0 "+c(t,f),m===o.Top?(x.flexDirection="column",O.textAlign="left"):O.textAlign=m,O.flex="0 0 "+c(b),j.flex="0 0 "+c(g)),{containerStyle:x,labelStyle:O,contentStyle:j}}},206:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return p}));var r=n(0),o=n.n(r),i=n(178),a=n(177),c=n(207),u=n(205),l=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},s={TitleComponent:function(t){var e=t.title,n=t.require,r=t.showTitle,i=void 0===r||r,a=t.tips,c=t.layoutExtends,l=void 0===c?{}:c,s=t.tipsPosition,f=void 0===s?"after":s,p=Object(u.d)(l.span,i&&!!e).labelStyle;return o.a.createElement(o.a.Fragment,null,e&&i&&o.a.createElement(g,{style:p,require:n,className:"rdx-form-item-label"},e,a&&"before"===f&&o.a.createElement(v,{tips:a})))},ContentComponent:function(t){var e=t.children,n=t.title,r=t.showTitle,i=void 0===r||r,a=t.tips,c=t.layoutExtends,l=void 0===c?{}:c,s=t.tipsPosition,f=void 0===s?"after":s,p=Object(u.d)(l.span,i&&!!n).contentStyle;return o.a.createElement(x,{style:p,className:"rdx-form-item-content"},o.a.createElement("span",null,e,a&&"after"===f&&o.a.createElement(v,{tips:a})),o.a.createElement(m,{msg:t.desc}),o.a.createElement(d,{msg:t.errorMsg}),o.a.createElement(d,{msg:(t.formErrorMsg||[]).join(",")}))},WrapperComponent:function(t){var e=t.type,n=t.children,r=t.id,i=t.layoutExtends,c=void 0===i?{}:i,l=Object(u.d)(c.span).containerStyle;return o.a.createElement(O,{"data-id":r,useMargin:e!==a.a.Object,style:l,className:"rdx-form-item"},n)}},f=o.a.createContext(s);function p(){return o.a.useContext(f)}function d(t){return o.a.createElement("div",{title:t.msg,style:{color:"red",width:"100%",maxHeight:32,maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},t.msg)}function m(t){return o.a.createElement("div",{style:{color:"#999999"}},t.msg)}function v(t){var e=t.tips;return o.a.createElement(c.a,{trigger:o.a.createElement("span",{style:{verticalAlign:"middle",paddingLeft:"6px"}},o.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14"},o.a.createElement("path",{d:"M512 1024C229.069 1024 0 794.829 0 512S229.069 0 512 0c282.931 0 512 229.171 512 512s-229.069 512-512 512z m-0.034-93.12c231.073 0.066 418.98-187.942 418.913-418.914 0.067-230.904-187.84-418.912-418.913-418.912-231.005 0-418.912 187.907-418.912 418.912 0 231.073 187.907 418.98 418.912 418.913z m-46.511-651.607h93.09v93.09h-93.09v-93.09z m93.09 465.445h-93.09V465.455h93.09v279.263z",fill:"#8a8a8a","p-id":"1386"})))},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}}))}var b,h,y,g=i.c.div(b||(b=l(["\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ",";\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n"],["\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ",";\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n"])),(function(t){return t.require?"visible":"none"})),x=i.c.div(h||(h=l(["\n  line-height: 28px;\n  /* flex:  */\n"],["\n  line-height: 28px;\n  /* flex:  */\n"]))),O=i.c.div(y||(y=l(["\n  border: 1px dashed transparent;\n  padding-bottom: ","px;\n"],["\n  border: 1px dashed transparent;\n  padding-bottom: ","px;\n"])),(function(t){return t.useMargin?12:0}))},207:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0),o=n.n(r),i=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function a(t){var e=t.trigger,n=i(Object(r.useState)(!1),2),a=n[0],c=n[1],u=i(Object(r.useState)(1),2),l=(u[0],u[1]),s=Object(r.useRef)(null),f=Object(r.useRef)(null),p=Object(r.useRef)(null);Object(r.useEffect)((function(){return function(){clearTimeout(s.current)}}));var d=Object(r.useCallback)((function(){s.current=setTimeout((function(){c(!0)}),300)}),[]),m=Object(r.useCallback)((function(){clearTimeout(s.current),c(!1)}),[]);Object(r.useEffect)((function(){l((function(t){return t+1}))}),[f.current,a]);return o.a.createElement("span",{onMouseEnter:d,onMouseLeave:m},o.a.createElement("span",{className:"tooltip-trigger",ref:f},e),a&&o.a.createElement("div",{ref:p,style:{position:"absolute",opacity:p.current?1:0,background:"#333",boxShadow:"0 8px 16px 0 rgba(0,0,0,.08)",color:"white",left:function(){var t=f.current.getBoundingClientRect(),e=t.x,n=t.width;return e-(p.current?p.current.getBoundingClientRect():{width:0}).width/2+n/2}(),maxWidth:"300px",textAlign:"left",zIndex:10,borderRadius:"2px",lineHeight:"14px",padding:"12px 12px 12px 12px"}},t.children,o.a.createElement("div",{style:{position:"absolute",width:"8px",height:"8px",left:"calc(50% - 4px)",top:"-4px",boxShadow:"-1px -1px 1px 0 rgba(0,0,0,.1)",transform:"rotate(45deg)",background:"#333"}})))}},209:function(t,e,n){"use strict";n.d(e,"a",(function(){return rt}));var r=n(0),o=n.n(r),i=n(883),a=n(475),c=n(468),u=n(889),l=n(189),s=o.a.createContext({}),f=n(188),p=n(177),d=n(206),m=n(186),v=n(176),b=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},h=function(t){var e=t.data;return o.a.createElement("pre",null,JSON.stringify(e,null,2))},y=function(t){var e=b(Object(r.useState)(!1),2),n=e[0],a=e[1],c=t.JsonView,u=void 0===c?h:c,l=Object(i.d)(),s=Object(i.b)(),f=Object(v.c)(l,s);return o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("div",{onClick:function(){a(!n)},style:{background:"blue",right:30,display:"flex",alignItems:"center",color:"white",justifyContent:"center",borderRadius:"5%",width:100,height:32}},"\u67e5\u770b\u6570\u636e"),o.a.createElement("div",{style:{position:"absolute",background:"white",opacity:n?1:0,maxWidth:n?400:0,maxHeight:n?400:0,overflow:"auto",zIndex:100,boxShadow:"0 0 8px 0 rgba(153, 163, 179, 0.28)",borderRadius:4,width:400,height:400,transition:"all 0.5s",padding:24}},o.a.createElement("h3",null,"\u8868\u5355\u8f93\u5165\u6570\u636e"),o.a.createElement("div",{style:{overflow:"auto"}},o.a.createElement("strong",null,"\u72b6\u6001\u6570\u636e"),o.a.createElement(u,{data:l}),o.a.createElement("strong",null,"\u884d\u751f\u72b6\u6001\u6570\u636e"),o.a.createElement(u,{data:f}))))};var g=o.a.createContext(null);function x(){return Object(r.useContext)(g)}var O=n(704),j=n(595),w=Object.prototype.hasOwnProperty,S=Object.prototype.toString;function E(t){if(null==t)return!0;if("boolean"==typeof t)return!1;if("number"==typeof t)return!1;if("string"==typeof t)return 0===t.length;if("function"==typeof t)return 0===t.length;if(Array.isArray(t)){if(0===t.length)return!0;for(var e=0;e<t.length;e++)if(void 0!==t[e]&&null!==t[e]&&""!==t[e]&&0!==t[e])return!1;return!0}if(t instanceof Error)return""===t.message;if(t.toString===S)switch(t.toString()){case"[object File]":case"[object Map]":case"[object Set]":return 0===t.size;case"[object Object]":for(var n in t)if(w.call(t,n))return!1;return!0}return!1}function C(t){return function(t){return void 0===t&&(t=[]),t.filter((function(t){return!E(t)}))}(t).length>0}var P=function(){return(P=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},T=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(e){i(e)}}function c(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},I=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};function k(t){function e(e){return T(this,void 0,void 0,(function(){var n,r,o;return I(this,(function(i){return n=e.map((function(e){return{id:e,value:t.getTaskStateById(Object(v.e)(e,v.a.EditState))}})),(r=n.filter((function(t){return!t.value.modify}))).forEach((function(e){var n=e.id,r=e.value;t.updateState(Object(v.e)(n,v.a.EditState),c.a.Update,c.d.TaskState,P(P({},r),{modify:!0}))})),r.length>0?(o=t.watchOnce(e.map((function(t){return Object(v.e)(t,v.a.Error)}))),t.notifyDownStreamPoints(r.map((function(t){return{key:Object(v.e)(t.id,v.a.EditState),downStreamOnly:!0}}))),[2,o]):[2,n.map((function(e){return t.getTaskStateById(Object(v.e)(e.id,v.a.Error))}))]}))}))}return function(n){var r=n;if(r)return Array.isArray(r)?e(r).then((function(t){return{isError:C(t),errorMsg:r.map((function(e,n){return{msg:t[n],id:e}}))}})):e([r]).then((function(t){return{isError:C(t),errorMsg:{msg:t[0],id:r}}}));var o=Array.from(t.getTasks().keys()).filter((function(t){return new RegExp("^"+v.a.EditState+"\\$\\$.+").test(t)})).map((function(t){return t.match(new RegExp("^"+v.a.EditState+"\\$\\$(.+)"))[1]}));return e(o).then((function(t){return{isError:C(t),errorMsg:o.map((function(e,n){return{msg:t[n],id:e}}))}}))}}var A=n(213),F=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(e){i(e)}}function c(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},R=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var M=function(){function t(t){void 0===t&&(t={}),this.subscribeMap=new Map,this.globalSubscribeSet=new Set,this._initState=t}return t.prototype.setValue=function(t,e){return this.context.batchNext(t.getId(),e)},t.prototype.getComputeState=function(){return Object(v.c)(this.context.getTaskState().store,this.context.getVirtualTaskState())},t.prototype.getState=function(){return this.context.getAllTaskState()},t.prototype._initContext=function(t){this.context=t},t.prototype.subscribeAll=function(t){var e=this;this.globalSubscribeSet.add(t),this.context.getEventEmitter().addListener(c.b.GlobalState,(function(){e.globalSubscribeSet.has(t)&&t&&t(e.getComputeState())}))},t.prototype.unsubscribeAll=function(t){this.globalSubscribeSet.delete(t)},t.prototype.subscribe=function(t,e){var n=this,r=Object(O.c)(t),o="subscribe/"+Object(A.v1)(),a=function(){e&&e(n.context.getTaskStateById(o))};if(this.subscribeMap.has(r.getId()))this.subscribeMap.get(r.getId()).set(e,{computeId:o,emCallback:a});else{var u=new Map;u.set(e,{computeId:o,emCallback:a}),this.subscribeMap.set(r.getId(),u)}Object(j.a)({id:o,get:function(t){var e=t.get;return e(r)}}).load(this.context),this.context.getEventEmitter().addListener(Object(i.a)(o,c.b.State),a)},t.prototype.unsubscribe=function(t,e){var n=this,r=Object(O.c)(t);if(this.subscribeMap.has(r.getId()))if(e){var o=this.subscribeMap.get(r.getId()).get(e)||{},a=o.computeId,u=o.emCallback;this.context.getEventEmitter().removeListener(Object(i.a)(a,c.b.State),u),this.context.removeTask(a)}else Array.from(this.subscribeMap.get(r.getId()).values()).forEach((function(t){n.context.getEventEmitter().removeListener(Object(i.a)(t.computeId,c.b.State),t.emCallback),n.context.removeTask(t.computeId)}))},t.prototype.reset=function(t){},t.prototype.setFormValue=function(t,e){this.context.batchNext(t,e)},t.prototype.setFormStatus=function(t,e){var n=t;this.context.batchNext(Object(v.e)(n,v.a.Status),e)},t.prototype.setFormCompute=function(t,e){var n=t;this.context.batchNext(Object(v.e)(n,v.a.Compute),e)},t.prototype.validate=function(t){return F(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:return[4,k(this.context)(t)];case 1:return[2,e.sent()]}}))}))},t}(),V=n(591),N=n(506),B=n(507),L=function(){return(L=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},D=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(e){i(e)}}function c(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},z=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},W=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},q=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$=function(t){var e=H(t),n=function(t){var e=t.name,n=t.type,r=t.defaultValue,o=_(e),i=Object(V.a)({virtual:Object(v.f)(e),id:_(e),defaultValue:Object(f.b)({type:n,defaultValue:r})});return Object(j.a)({id:Object(v.e)(o,v.a.ValueIntercepter),get:function(t){var e=t.get;return e(i)},set:function(t,e){var n=t.get,r=t.set;n(Object(a.f)({id:Object(v.e)(o,v.a.EditState)})).modify||r(Object(a.f)({id:Object(v.e)(o,v.a.EditState)}),(function(t){return L(L({},t),{modify:!0})})),r(i,e)}})}(t),o=function(t){var e=Object(r.useContext)(l.a).paths,n=t.name,o=Object(m.a)(n,e);return Object(v.f)(n)?Object(v.g)(n).map((function(n,r){var i=Object(m.a)(n,e),c=Object(V.a)({id:i,defaultValue:Object(f.b)(t)[r]});return Object(j.a)({id:Object(v.e)(i,v.a.ValueIntercepter),get:function(t){var e=t.get;return e(c)},set:function(t,e){var n=t.get,r=t.set;n(Object(a.f)({id:Object(v.e)(o,v.a.EditState)})).modify||r(Object(a.f)({id:Object(v.e)(o,v.a.EditState)}),(function(t){return L(L({},t),{modify:!0})})),r(c,e)}})})):[]}(t),i=t.name;return function(t){if(Object(v.f)(i)){t.get(n);var r=o.map((function(e){return t.get(e)}));return L(L({},t.get(e)),{value:r})}return L(L({},t.get(e)),{value:t.get(n)})}};function _(t){var e=Object(r.useContext)(l.a).paths;return Object(m.a)(t,e)}function J(t){var e=t.visible,n=void 0===e||e,r=t.preview,o=void 0!==r&&r,i=t.disabled,a=void 0!==i&&i,c=t.require,u=void 0!==c&&c,l=t.componentProps,s=void 0===l?{}:l,f=t.layoutExtends;return{visible:n,preview:o,disabled:a,require:u,componentProps:s,layoutExtends:void 0===f?{}:f}}function H(t){var e=t.name,n=t.alias;return Object(V.a)({virtual:!0,id:Object(v.e)(_(e),v.a.Status,n),defaultValue:J(t)})}function U(t,e,n){return Object(V.a)({virtual:!0,id:Object(v.e)(t,v.a.EditState,e),defaultValue:{modify:!1,autoValidate:n}})}var G=function(t,e){return function(e,n){return e instanceof a.b?t.get(e):"string"==typeof e?t.get(Object(a.f)({id:Object(v.e)(e,v.a.Compute,n)})):void 0}};var K=function(t){return function(e,n,r){if(e instanceof a.b)t.set(e,n);else if("string"==typeof e)try{var o=Object(m.b)(e),i=Object(v.f)(o),c=Object(v.g)(o);if(n===N.a)c.forEach((function(r,o){t.set(Object(a.f)({id:Object(v.e)(Object(m.a)(r,Object(m.c)(e)),v.a.ValueIntercepter)}),n)})),t.set(Object(a.f)({id:Object(v.e)(Object(m.a)(o,Object(m.c)(e)),v.a.Status,r)}),n);else{var u=void 0,l=function(t,e){var n=e;return e instanceof Function&&(n=e(t)),n}(u=L(i?{value:c.map((function(n){return t.get(Object(a.f)({id:Object(v.e)(Object(m.a)(n,Object(m.c)(e)),v.a.ValueIntercepter)}))}))}:{value:t.get(Object(a.f)({id:e}))},t.get(Object(a.f)({id:Object(v.e)(e,v.a.Status)}))),n),s=l.value,f=W(l,["value"]),p=(u.value,W(u,["value"]));if(l.hasOwnProperty("value")){c.forEach((function(n,r){t.set(Object(a.f)({id:Object(v.e)(Object(m.a)(n,Object(m.c)(e)),v.a.ValueIntercepter)}),i?function(t){return Array.isArray(s)&&s?s[t]:void 0}(r):s)}))}t.set(Object(a.f)({id:Object(v.e)(Object(m.a)(o,Object(m.c)(e)),v.a.Status,r)}),L(L({},p),f))}}catch(d){console.warn(d)}}};function X(t){var e=t.name,n=t.alias,r=t.get,o=t.set,i=_(e),a=$(t);return Object(j.a)({virtual:!0,id:Object(v.e)(i,v.a.Compute,n),get:r?function(t,e){var o=a(t),c=r(L(L({},t),{id:i,get:G(t),preComputeValue:e.hasTask(Object(v.e)(i,v.a.Compute,n))?e.getTaskStateById(Object(v.e)(i,v.a.Compute,n)):null,mixedValueAndStatus:o}));return Object(B.b)(c)?c.then((function(t){return L(L({},o),t||{})})):L(L({},o),c||{})}:function(t){return a(t)},set:o?function(t,e,n){o(L(L({},t),{id:i,get:G(t),set:K(t)}),e)}:function(t,e){K(t)(i,e,n)}})}var Q,Y=n(201),Z=function(){return(Z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},tt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},et=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},nt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(et(arguments[e]));return t};function rt(t){return function(){var e=function(t){var e,n=t.children,r=t.formTypes,i=t.info,a=t.baseProps,c=t.componentProps,u=t.isLayout,l=t.id,s=r.type,f=r.componentType,p=i.visible,m=void 0===p||p,v=Object(Y.a)((function(t){a.onChange(t)}),n),b=Object(d.b)(),h=b.WrapperComponent,y=b.TitleComponent,g=b.ContentComponent,O=Z(Z({},a),{arrayHelper:{mutators:v},componentProps:c}),j=x().components[f||s];"function"==typeof n?e=n(O):j?e=o.a.createElement(j,Z({},O),n):console.warn("xCompnent:"+f+", type: "+s+" not found!!!");var w=Z(Z({},i),{id:l,type:s,children:n});return o.a.createElement(o.a.Fragment,null,u?e:m&&o.a.createElement(h,Z({},w),o.a.createElement(y,Z({},w)),o.a.createElement(g,Z({},w),e)))};return{FormItem:function(t){var n=t.name,a=t.title,u=t.desc,d=t.tips,b=t.children,h=t.type,y=t.showTitle,g=t.tipsPosition,O=(t.alias,t.componentType),w=Object(r.useContext)(l.a).paths,S=Object(m.a)(n,w),C="layout"===h,P=Z(Z({},J(t)),{value:Object(f.b)(t)});!function(t){var e=Object(i.c)(),n=J(t),o=H(t);Object(r.useMemo)((function(){var t=e.getTaskStateById(o.getId());!e.hasTask(o.getId())&&t&&e.updateState(o.getId(),c.a.Update,c.d.TaskState,n)}),[])}(t);var T=et(function(t){return Object(i.i)(X(t))}(t),2),I=T[0],k=T[1],A=Object(i.k)(function(t){var e=this,n=t.name,r=t.alias,o=t.title,i=t.rules,a=void 0===i?[]:i,c=t.validateFirst,u=t.emptyErrorMessage,l=_(n),s=X(t),f=x();return Object(j.a)({virtual:!0,id:Object(v.e)(l,v.a.Error,r),get:function(t,n){return D(e,void 0,void 0,(function(){var e,n,i,p,d,m,v,b,h,y,g,x,O,j,w;return z(this,(function(S){switch(S.label){case 0:return e=t.get(U(l,r,f.autoValidate)),n=e.modify,i=e.autoValidate,p=t.get(s),n||i||c?[3,1]:[2,[]];case 1:d=!1,m=[],v=function(t){return E(t.value.value)?u||o+"\u4e0d\u80fd\u4e3a\u7a7a!":void 0},S.label=2;case 2:S.trys.push([2,7,8,9]),b=q(p.require?a.concat([v]):a),h=b.next(),S.label=3;case 3:return h.done?[3,6]:(y=h.value,x=(g=m).push,[4,y({value:p,get:function(e){return"string"==typeof e&&t.get(U(e,r,i)).modify&&(d=!0),G(t)(e)},id:l})]);case 4:x.apply(g,[S.sent()]),S.label=5;case 5:return h=b.next(),[3,3];case 6:return[3,9];case 7:return O=S.sent(),j={error:O},[3,9];case 8:try{h&&!h.done&&(w=b.return)&&w.call(b)}finally{if(j)throw j.error}return[7];case 9:return d||n||c?[2,m.filter((function(t){return!E(t)}))]:[2,[]];case 10:return[2]}}))}))}})}(t)),F=I.status,R=I.errorMsg,M=I.content,V=void 0===M?P:M,N=V.visible,B=V.disabled,L=V.require,W=V.preview,$=V.value,K=V.componentProps,Q=V.layoutExtends,Y=void 0===Q?{}:Q,tt=void 0;F===c.c.Waiting||F===c.c.Running?tt=p.b.Loading:c.c.Error===F&&(tt=p.b.Error);var rt=o.a.createElement(e,{id:S,isLayout:C,baseProps:{value:$,require:L,state:tt,preview:W,disabled:B,onChange:function(t){var e=Z(Z({},I.content),{value:t});k(e)}},info:{showTitle:y,visible:N,title:a,desc:u,tipsPosition:g,tips:d,require:L,layoutExtends:Y,formErrorMsg:A,errorMsg:R},formTypes:{type:h,componentType:O},componentProps:K||{}},b);return C?rt:o.a.createElement(l.a.Provider,{value:{paths:nt(w,[n])}},o.a.createElement(s.Provider,{value:{name:n}},rt))},RdxFormRoot:function(e){var n=e.children,r=e.store,i=void 0===r?new M({}):r,a=e.JsonView,c=e.autoValidate,l=void 0!==c&&c,s=e.enabledStatePreview,f=tt(e,["children","store","JsonView","autoValidate","enabledStatePreview"]);return o.a.createElement(g.Provider,{value:{components:t.components,autoValidate:l}},o.a.createElement(u.a,Z({},f,{withStore:function(t){i._initContext(t)},initializeState:i._initState,createStore:function(t){return new v.b(t)},onChange:function(){}}),n,s&&o.a.createElement(y,{JsonView:a})))},getReferencedFormValueAtom:function(t){return Object(a.f)({id:Object(v.e)(t,v.a.ValueIntercepter)})},getReferencedFormStatusAtom:function(t){return Object(a.f)({id:Object(v.e)(t,v.a.Status)})},getReferencedFormCompute:function(t){return Object(a.f)({id:Object(v.e)(t,v.a.Compute)})},useValidator:function(){return k(Object(i.c)())},createFormStore:function(t){return new M(t)}}}}!function(t){t.Relative="Relative",t.Absolute="Absolute"}(Q||(Q={}))},213:function(t,e,n){var r=n(216),o=n(217),i=o;i.v1=r,i.v4=o,t.exports=i},216:function(t,e,n){var r,o,i=n(199),a=n(200),c=0,u=0;t.exports=function(t,e,n){var l=e&&n||0,s=e||[],f=(t=t||{}).node||r,p=void 0!==t.clockseq?t.clockseq:o;if(null==f||null==p){var d=i();null==f&&(f=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==p&&(p=o=16383&(d[6]<<8|d[7]))}var m=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:u+1,b=m-c+(v-u)/1e4;if(b<0&&void 0===t.clockseq&&(p=p+1&16383),(b<0||m>c)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=m,u=v,o=p;var h=(1e4*(268435455&(m+=122192928e5))+v)%4294967296;s[l++]=h>>>24&255,s[l++]=h>>>16&255,s[l++]=h>>>8&255,s[l++]=255&h;var y=m/4294967296*1e4&268435455;s[l++]=y>>>8&255,s[l++]=255&y,s[l++]=y>>>24&15|16,s[l++]=y>>>16&255,s[l++]=p>>>8|128,s[l++]=255&p;for(var g=0;g<6;++g)s[l+g]=f[g];return e||a(s)}},217:function(t,e,n){var r=n(199),o=n(200);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var c=0;c<16;++c)e[i+c]=a[c];return e||o(a)}}}]);