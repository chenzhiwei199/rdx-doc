(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{134:function(t,e,n){"use strict";n.r(e),n.d(e,"frontMatter",(function(){return y})),n.d(e,"metadata",(function(){return m})),n.d(e,"toc",(function(){return h})),n.d(e,"default",(function(){return O}));var r={};n.r(r),n.d(r,"\u7b80\u5355\u793a\u4f8b",(function(){return v}));var o=n(3),i=n(7),a=n(0),u=n.n(a),c=n(179),l=n(189),f=n(188),s=n(163),p=Object(f.a)({components:{input:function(t){var e=t.value,n=t.state,r=t.onChange,o=t.preview,i=t.disabled;return n===s.b.Loading?u.a.createElement("span",null,"loading"):o?u.a.createElement("span",null,e):u.a.createElement("input",{style:{pointerEvents:i?"none":"unset",border:n===s.b.Error?"1px solid red":"1px solid grey"},value:e,onChange:function(t){r(t.target.value)}})}}})(),d=p.RdxFormRoot,b=p.FormItem;function v(){return u.a.createElement(d,{enabledStatePreview:!0},u.a.createElement(b,{type:"string",componentType:"input",name:"city"}))}var y={id:"customWidget",title:"\u81ea\u5b9a\u4e49\u6e32\u67d3\u7ec4\u4ef6"},m={unversionedId:"rdx-form/tutorials/customWidget",id:"rdx-form/tutorials/customWidget",isDocsHomePage:!1,title:"\u81ea\u5b9a\u4e49\u6e32\u67d3\u7ec4\u4ef6",description:"\u5b9e\u73b0\u4e00\u4e2a\u7c7b\u578b\u6ee1\u8db3 React.FC> | React.ComponentClass>\u7684\u7ec4\u4ef6\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7markForms\u6765",source:"@site/docs/rdx-form/tutorials/customWidget.mdx",slug:"/rdx-form/tutorials/customWidget",permalink:"/rdx-doc/docs/rdx-form/tutorials/customWidget",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/rdx-form/tutorials/customWidget.mdx",version:"current",sidebar:"someSidebar",previous:{title:"\u67e5\u8be2\u5217\u8868(\u542b\u67e5\u8be2\u91cd\u7f6e\u6309\u94ae)",permalink:"/rdx-doc/docs/rdx-form/tutorials/searchList"},next:{title:"\u81ea\u5b9a\u4e49\u6e32\u67d3\u5217\u8868",permalink:"/rdx-doc/docs/rdx-form/tutorials/customList"}},h=[{value:"Sample",id:"sample",children:[]}],g={toc:h};function O(t){var e=t.components,n=Object(i.a)(t,["components"]);return Object(c.b)("wrapper",Object(o.a)({},g,n,{components:e,mdxType:"MDXLayout"}),Object(c.b)("p",null,"\u5b9e\u73b0\u4e00\u4e2a\u7c7b\u578b\u6ee1\u8db3 ",Object(c.b)("inlineCode",{parentName:"p"},"React.FC<IFormComponentProps<any>> | React.ComponentClass<IFormComponentProps<any>>"),"\u7684\u7ec4\u4ef6\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7markForms\u6765\n\u6784\u5efa\u4e00\u4e2a\u8868\u5355\u3002"),Object(c.b)("pre",null,Object(c.b)("code",Object(o.a)({parentName:"pre"},{className:"language-jsx"}),"export interface IFormComponentProps<T extends any> extends IBaseFormComponentProps {\n  children?: React.ReactNode\n   // \u6570\u7ec4\u7684\u64cd\u4f5c\u65b9\u6cd5, \u4f7f\u7528\u8be5\u65b9\u6cd5\u53ef\u4ee5\u7cbe\u786e\u63a7\u5236\u66f4\u65b0\n   arrayHelper?: {\n    mutators?: IMutators\n  }\n  componentProps?:  T\n}\n")),Object(c.b)("h3",{id:"sample"},"Sample"),Object(c.b)(l.a,{code:"\nimport React from 'react';\nimport { IState, IFormComponentProps, makeForms } from '@alife/rdx-form';\n\nconst forms = makeForms({\n  components: {\n    // \u81ea\u5b9a\u4e49\u4e00\u4e2a\u7ec4\u4ef6\n    input: (props: IFormComponentProps<any>) => {\n      const { value,state, onChange, preview, disabled,  } = props;\n      if(state === IState.Loading) {\n        return <span>{'loading'}</span>\n      }\n      \n      if(preview) {\n        return <span>{value}</span>\n      }\n      return (\n        <input\n          style={{ pointerEvents: disabled ? 'none' : 'unset', border: state === IState.Error ? '1px solid red' : '1px solid grey'}}\n          value={value}\n          onChange={(event) => {\n            onChange(event.target.value);\n          }}\n        ></input>\n      );\n    },\n  },\n});\nconst { RdxFormRoot, FormItem } = forms<{\n  city: string;\n}>();\n\nexport function \u7b80\u5355\u793a\u4f8b() {\n  return (\n    <RdxFormRoot enabledStatePreview={true}>\n      <FormItem type='string' componentType={'input'} name='city'></FormItem>\n    </RdxFormRoot>\n  );\n}\n",example:r,mdxType:"ExampleCustomizer"}))}O.isMDXComponent=!0},159:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"f",(function(){return f})),n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return p})),n.d(e,"c",(function(){return d}));var r,o=n(172),i=n(182),a=(n(163),function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),u=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},c=function(){function t(t){this.store={},this.store=t}return t.prototype.clone=function(){return new t(this.store)},t.prototype.merge=function(t){throw new Error("Method not implemented.")},t.prototype.remove=function(t,e){this.store=Object(i.b)(this.store,(function(e){Object(o.d)(e.state,t,void 0)}))},t.prototype.update=function(t,e,n){this.store=Object(i.b)(this.store,(function(n){Object(o.d)(n,t,e)}))},t.prototype.get=function(t,e){return Object(o.a)(this.store,t)},t.prototype.getAll=function(){return this.store},t}();function l(t){return void 0===t&&(t=""),t.split("|")}function f(t){return void 0===t&&(t=""),t.includes("|")}function s(t){return t+"\\$\\$"}function p(t,e,n){return e+"$$"+t+(n?"$$"+n:"")}function d(t,e){return Object.keys(e).filter((function(t){return t.startsWith(r.Compute+"$$")})).reduce((function(t,n){var r=function(t){var e=t.split("$$");return{type:e[0],id:e[1],alias:e[2]}}(n),i=r.id,a=(r.alias,r.type,i.split(".")),c=a[a.length-1];return c.includes("|")?c.split("|").forEach((function(r,i){var c=u(a.slice(0,a.length-1),[r]).join(".");e[n].value?Object(o.d)(t,c,e[n].value[i]):Object(o.d)(t,c,void 0)})):Object(o.d)(t,i,e[n].value),t}),JSON.parse(JSON.stringify(t)))}!function(t){t.ValueIntercepter="StateIntercepter",t.EditState="editState",t.Compute="compute",t.Status="status",t.Error="error",t.Rule="rule"}(r||(r={}))},162:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return f})),n.d(e,"f",(function(){return s})),n.d(e,"k",(function(){return p})),n.d(e,"j",(function(){return b})),n.d(e,"l",(function(){return v})),n.d(e,"h",(function(){return y})),n.d(e,"g",(function(){return m})),n.d(e,"d",(function(){return h})),n.d(e,"c",(function(){return g})),n.d(e,"i",(function(){return O}));var r=n(629),o=n(826),i=n(450),a=n(0),u=(n(159),Object(r.c)()),c=Object(o.a)(u),l=c.useRdxGlboalState,f=c.useGlobalVirtualStateUpdate,s=(c.useStatusUpdateById,c.useRdxGlobalContext),p=(c.useGlobalVirtualStateUpdate,c.useRdxState,c.useRdxValue),d=c.useRdxNodeBinding,b=c.useRdxStateLoader,v=(c.useRdxStateLoaderByContext,c.useRdxRefresh,c.useRdxValueLoader),y=(c.useRdxLoading,c.useRdxSetter),m=c.useRdxReset,h=c.useRdxContext;c.useStatusUpdateByRegExp,c.createInteractiveContext;function g(t,e){Object(o.l)(t);var n=d(Object(i.e)({id:t}),!0,e,void 0);return[{status:n.status,content:n.value,errorMsg:n.errorMsg},n.next]}var O=function(){return Object(a.useContext)(u)}},163:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r,o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(t){t.Object="object",t.Array="array",t.String="string",t.Number="number",t.Boolean="boolean"}(r||(r={}));var i,a=o({},r);!function(t){t.Loading="loading",t.Error="error"}(i||(i={}))},168:function(t,e,n){"use strict";n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return p}));var r=n(0),o=(n(450),n(173)),i=(n(162),function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}),a=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};function u(t){return"function"==typeof t}var c=function(){var t=Object(r.useContext)(o.a).paths;return(void 0===t?[]:t).join(".")};function l(t,e){return a(e,[t]).join(".")}function f(t){var e=[];return Array.isArray(t)||(e=t.split(".")),e}function s(t){var e=f(t);return e[e.length-1]}function p(t){var e=f(t);return e.slice(0,e.length-1)}},172:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return p}));var r=n(0),o=n.n(r),i=n(168),a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function c(t){var e=t.type,n=t.defaultValue;return null!=n?Object(i.d)(n)?n():n:"array"===e?[]:"object"===e?{}:"string"===e?"":void 0}function l(t){var e=[];return o.a.Children.forEach(t,(function(t,n){e.push(t.props)})),e}function f(t){var e={};return o.a.Children.forEach(t,(function(n,r){0===r&&(e="object"===n.props.type?a(a({},n.props),{childrenPropsInfo:l(t)}):n.props)})),e}function s(t,e,n){var r,o,i=(""+e).split(".");if(!(i&&i.length>0))return t;var a=t,c=0;try{for(var l=u(i),f=l.next();!f.done;f=l.next()){var s=f.value;if(c===i.length-1)return void 0===a[s]?n:a[s];if(void 0===a[s])return n;a=a[s],c++}}catch(p){r={error:p}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}function p(t,e,n){var r,o;void 0===t&&(t={});var i=(""+e).split(".");if(i&&i.length>0){var a=t,c=0;try{for(var l=u(i),f=l.next();!f.done;f=l.next()){var s=f.value;c===i.length-1?a[s]=n:(void 0===a[s]&&(a[s]={}),a=a[s]),c++}}catch(p){r={error:p}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}return t}},173:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(0),o=n.n(r).a.createContext({paths:[]});function i(){var t=Object(r.useContext)(o).paths;return{paths:t,parentPaths:t.slice(0,t.length-1)}}},182:function(t,e,n){"use strict";function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(t){return!!t&&!!t[B]}function i(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[W]||!!t.constructor[W]||s(t)||p(t))}function a(t,e,n){void 0===n&&(n=!1),0===u(t)?(n?Object.keys:z)(t).forEach((function(n){return e(n,t[n],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function u(t){var e=t[B];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:s(t)?2:p(t)?3:0}function c(t,e){return 2===u(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){return 2===u(t)?t.get(e):t[e]}function f(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function s(t){return N&&t instanceof Map}function p(t){return L&&t instanceof Set}function d(t){return t.o||t.t}function b(t,e){if(void 0===e&&(e=!1),Array.isArray(t))return t.slice();var n=Object.create(Object.getPrototypeOf(t));return a(t,(function(o){if(o!==B){var i=Object.getOwnPropertyDescriptor(t,o),a=i.value;i.get&&(e||r(1),a=i.get.call(t)),i.enumerable?n[o]=a:Object.defineProperty(n,o,{value:a,writable:!0,configurable:!0})}})),n}function v(t,e){o(t)||m(t)||!i(t)||(u(t)>1&&(t.set=t.add=t.clear=t.delete=y),Object.freeze(t),e&&a(t,(function(t,e){return v(e,!0)}),!0))}function y(){r(2)}function m(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function h(t){var e=$[t];return e||r(19,t),e}function g(){return V}function O(t,e){e&&(h("Patches"),t.u=[],t.s=[],t.v=e)}function j(t){x(t),t.p.forEach(S),t.p=null}function x(t){t===V&&(V=t.l)}function w(t){return V={p:[],l:V,h:t,m:!0,_:0}}function S(t){var e=t[B];0===e.i||1===e.i?e.j():e.O=!0}function E(t,e){e._=e.p.length;var n=e.p[0],o=void 0!==t&&t!==n;return e.h.g||h("ES5").S(e,t,o),o?(n[B].P&&(j(e),r(4)),i(t)&&(t=C(e,t),e.l||k(e,t)),e.u&&h("Patches").M(n[B],t,e.u,e.s)):t=C(e,n,[]),j(e),e.u&&e.v(e.u,e.s),t!==_?t:void 0}function C(t,e,n){if(m(e))return e;var r=e[B];if(!r)return a(e,(function(o,i){return P(t,r,e,o,i,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return k(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=b(r.k,!0):r.o;a(o,(function(e,i){return P(t,r,o,e,i,n)})),k(t,o,!1),n&&t.u&&h("Patches").R(r,n,t.u,t.s)}return r.o}function P(t,e,n,r,a,s){if(o(a)){var p=C(t,a,s&&e&&3!==e.i&&!c(e.D,r)?s.concat(r):void 0);if(b=r,v=p,2===(y=u(d=n))?d.set(b,v):3===y?(d.delete(b),d.add(v)):d[b]=v,!o(p))return;t.m=!1}var d,b,v,y;if((!e||!f(a,l(e.t,r)))&&i(a)){if(!t.h.N&&t._<1)return;C(t,a),e&&e.A.l||k(t,a)}}function k(t,e,n){void 0===n&&(n=!1),t.h.N&&t.m&&v(e,n)}function R(t,e){var n=t[B],r=Reflect.getOwnPropertyDescriptor(n?d(n):t,e);return r&&r.value}function T(t){if(!t.P){if(t.P=!0,0===t.i||1===t.i){var e=t.o=b(t.t);a(t.p,(function(t,n){e[t]=n})),t.p=void 0}t.l&&T(t.l)}}function A(t){t.o||(t.o=b(t.t))}function I(t,e,n){var r=s(e)?h("MapSet").T(e,n):p(e)?h("MapSet").F(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:g(),P:!1,I:!1,D:{},l:e,t:t,k:null,p:{},o:null,j:null,C:!1},o=r,i=J;n&&(o=[r],i=U);var a=Proxy.revocable(o,i),u=a.revoke,c=a.proxy;return r.k=c,r.j=u,c}(e,n):h("ES5").J(e,n);return(n?n.A:g()).p.push(r),r}n.d(e,"b",(function(){return G}));var F,V,M="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),N="undefined"!=typeof Map,L="undefined"!=typeof Set,D="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,_=M?Symbol("immer-nothing"):((F={})["immer-nothing"]=!0,F),W=M?Symbol("immer-draftable"):"__$immer_draftable",B=M?Symbol("immer-state"):"__$immer_state",z=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames),$={},J={get:function(t,e){if(e===B)return t;var n=t.p;if(!t.P&&c(n,e))return n[e];var r=d(t)[e];if(t.I||!i(r))return r;if(t.P){if(r!==R(t.t,e))return r;n=t.o}return n[e]=I(t.A.h,r,t)},has:function(t,e){return e in d(t)},ownKeys:function(t){return Reflect.ownKeys(d(t))},set:function(t,e,n){if(!t.P){var r=R(t.t,e);if(n?f(r,n)||n===t.p[e]:f(r,n)&&e in t.t)return!0;A(t),T(t)}return t.D[e]=!0,t.o[e]=n,!0},deleteProperty:function(t,e){return void 0!==R(t.t,e)||e in t.t?(t.D[e]=!1,A(t),T(t)):t.D[e]&&delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=d(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&(r.writable=!0,r.configurable=1!==t.i||"length"!==e),r},defineProperty:function(){r(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){r(12)}},U={};a(J,(function(t,e){U[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),U.deleteProperty=function(t,e){return J.deleteProperty.call(this,t[0],e)},U.set=function(t,e,n){return J.set.call(this,t[0],e,n,t[0])};var q=new(function(){function t(t){this.g=D,this.N=!1,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var e=t.prototype;return e.produce=function(t,e,n){if("function"==typeof t&&"function"!=typeof e){var o=e;e=t;var a=this;return function(t){var n=this;void 0===t&&(t=o);for(var r=arguments.length,i=Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];return a.produce(t,(function(t){var r;return(r=e).call.apply(r,[n,t].concat(i))}))}}var u;if("function"!=typeof e&&r(6),void 0!==n&&"function"!=typeof n&&r(7),i(t)){var c=w(this),l=I(this,t,void 0),f=!0;try{u=e(l),f=!1}finally{f?j(c):x(c)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then((function(t){return O(c,n),E(t,c)}),(function(t){throw j(c),t})):(O(c,n),E(u,c))}if((u=e(t))!==_)return void 0===u&&(u=t),this.N&&v(u,!0),u},e.produceWithPatches=function(t,e){var n,r,o=this;return"function"==typeof t?function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return o.produceWithPatches(e,(function(e){return t.apply(void 0,[e].concat(r))}))}:[this.produce(t,e,(function(t,e){n=t,r=e})),n,r]},e.createDraft=function(t){i(t)||r(8);var e=w(this),n=I(this,t,void 0);return n[B].C=!0,x(e),n},e.finishDraft=function(t,e){var n=(t&&t[B]).A;return O(n,e),E(void 0,n)},e.setAutoFreeze=function(t){this.N=t},e.setUseProxies=function(t){D||r(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}var i=h("Patches").U;return o(t)?i(t,e):this.produce(t,(function(t){return i(t,e.slice(n+1))}))},t}()),G=q.produce;q.produceWithPatches.bind(q),q.setAutoFreeze.bind(q),q.setUseProxies.bind(q),q.applyPatches.bind(q),q.createDraft.bind(q),q.finishDraft.bind(q);e.a=G},186:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(172),o=n(162),i=n(168),a=n(163),u=n(159),c=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},l=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t};function f(t,e){var n=Object(i.e)(),c=Object(o.i)(),f=function(){return c.getTaskStateById(n)||{}||[]},s=Object(r.b)(e);function p(t){return s.type===a.a.Object?new RegExp("^"+n+"."+t+".(.+)"):new RegExp("^"+n+"."+t+"$")}function d(t){var e=p(t);return Array.from(c.getTasks().keys()).filter((function(t){return e.test(t)}))}var b=function(t,e){var r=s.type===a.a.Object,o=p(t),i=d(t),u=new Set;return i.forEach((function(t){var i=t,a=r?[n,e,t.match(o)[1]].join("."):[n,e].join("."),l=c.getTaskStateById(i);c.setTaskState(i,c.getTaskStateById(a)),c.setTaskState(a,l),u.add(i),u.add(a)})),Array.from(u)},v=function(t,e){var r=b(t,e).map((function(t){return{key:t,downStreamOnly:!0}}));c.notifyDownStreamPoints(r,"Array Switch-"+n)};return{add:function(){t(l(f(),[Object(r.c)(s)]))},moveDown:function(t){t+1>f().length||v(t,t+1)},moveUp:function(t){t-1<0||v(t-1,t)},remove:function(e){for(var n=[],r=e;r<f().length-1;r++)n=n.concat(b(r,r+1));d(f().length-1).forEach((function(t){c.removeTask(t),c.removeTask(Object(u.e)(t,u.a.Error)),c.removeTask(Object(u.e)(t,u.a.ValueIntercepter)),c.removeTask(Object(u.e)(t,u.a.Status)),c.removeTask(Object(u.e)(t,u.a.EditState)),c.removeTask(Object(u.e)(t,u.a.Compute))})),c.notifyDownStreamPoints(n.map((function(t){return{key:t,downStreamOnly:!0}})),"Array"),t(f().slice(0,f().length-1))},removeAll:function(){d(f().length-1).forEach((function(t){c.removeTask(t)})),t([])},switchItem:v}}},188:function(t,e,n){"use strict";n.d(e,"a",(function(){return Ct}));var r=n(0),o=n.n(r),i=n(450),a=n(446),u=n(832),c=n(597),l=n(214),f=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function p(t,e,n){var r,o,i;if("string"==typeof t&&!t.includes('"')&&!t.includes("\\"))return'"'+t+'"';switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if(!0!==(null==e?void 0:e.allowFunctions))throw new Error("Attempt to serialize function in a Recoil cache key");return"__FUNCTION("+t.name+")__"}if(null===t)return"null";if("object"!=typeof t)return null!==(i=JSON.stringify(t))&&void 0!==i?i:"";if(Object(l.b)(t))return"__PROMISE__";if(Array.isArray(t))return"["+t.map((function(t,n){return p(t,e,n.toString())}))+"]";if("function"==typeof t.toJSON)return p(t.toJSON(n),e,n);if(t instanceof Map){var a={};try{for(var u=f(t),c=u.next();!c.done;c=u.next()){var d=s(c.value,2),b=d[0],v=d[1];a["string"==typeof b?b:p(b,e)]=v}}catch(y){r={error:y}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return p(a,e,n)}return t instanceof Set?p(Array.from(t).sort((function(t,n){return p(t,e).localeCompare(p(n,e))})),e,n):null!=t[Symbol.iterator]&&"function"==typeof t[Symbol.iterator]?p(Array.from(t),e,n):"{"+Object.keys(t).filter((function(e){return void 0!==t[e]})).sort().map((function(n){return p(n,e)+":"+p(t[n],e,n)})).join(",")+"}"}var d,b,v=n(173),y=o.a.createContext({}),m=n(162),h=n(172),g=n(163),O=n(165),j=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function x(t){var e=t.trigger,n=j(Object(r.useState)(!1),2),i=n[0],a=n[1],u=j(Object(r.useState)(1),2),c=(u[0],u[1]),l=Object(r.useRef)(null),f=Object(r.useRef)(null),s=Object(r.useRef)(null);Object(r.useEffect)((function(){return function(){clearTimeout(l.current)}}));var p=Object(r.useCallback)((function(){l.current=setTimeout((function(){a(!0)}),300)}),[]),d=Object(r.useCallback)((function(){clearTimeout(l.current),a(!1)}),[]);Object(r.useEffect)((function(){c((function(t){return t+1}))}),[f.current,i]);return o.a.createElement("span",{onMouseEnter:p,onMouseLeave:d},o.a.createElement("span",{className:"tooltip-trigger",ref:f},e),i&&o.a.createElement("div",{ref:s,style:{position:"absolute",opacity:s.current?1:0,background:"#333",boxShadow:"0 8px 16px 0 rgba(0,0,0,.08)",color:"white",left:function(){var t=f.current.getBoundingClientRect(),e=t.x,n=t.width;return e-(s.current?s.current.getBoundingClientRect():{width:0}).width/2+n/2}(),maxWidth:"300px",textAlign:"left",zIndex:10,borderRadius:"2px",lineHeight:"14px",padding:"12px 12px 12px 12px"}},t.children,o.a.createElement("div",{style:{position:"absolute",width:"8px",height:"8px",left:"calc(50% - 4px)",top:"-4px",boxShadow:"-1px -1px 1px 0 rgba(0,0,0,.1)",transform:"rotate(45deg)",background:"#333"}})))}!function(t){t.Grid="grid",t.Inline="inline",t.Classic="classic",t.Base="base"}(d||(d={})),function(t){t.Left="left",t.Right="right",t.Top="top"}(b||(b={}));var w=Object(r.createContext)({});function S(t,e){return void 0===e&&(e=24),t/e*100+"%"}function E(t){void 0===t&&(t=!0);var e=Object(r.useContext)(w),n=e.layoutType,o=void 0===n?d.Base:n,i=(e.columns,e.autoRow,e.labelWidth),a=e.labelTextAlign,u=void 0===a?"right":a,c=e.labelCol,l=void 0===c?8:c,f=e.wrapWidth,s=e.wrapCol,p=void 0===s?16:s,v={},y={},m={};return o===d.Base?(v.display="flex",u===b.Top?v.flexDirection="column":y.textAlign=u,y.flexGrow=0,m.flex=1):o===d.Classic?(v.display="flex",u===b.Top?v.flexDirection="column":y.textAlign=u,y.flex="0 0 "+S(l),m.flex="0 0 "+S(t?p:p+l),m.overflow="hidden"):o===d.Inline&&(v.display="inline-block",u!==b.Right&&u!==b.Left||(y.display="inline-block",m.display="inline-block",y.textAlign=u),y.width=i,m.width=f,m.marginRight=20),{containerStyle:v,labelStyle:y,contentStyle:m}}var C=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};var P=o.a.createContext({TitleComponent:function(t){var e=t.title,n=t.require,r=(t.children,t.showTitle),i=void 0===r||r,a=t.tips,u=t.tipsPosition,c=void 0===u?"after":u,l=E(i&&!!e).labelStyle;return o.a.createElement(o.a.Fragment,null,e&&i&&o.a.createElement(V,{style:l,require:n,className:"rdx-form-item-label"},e,a&&"before"===c&&o.a.createElement(T,{tips:a})))},ContentComponent:function(t){var e=t.children,n=t.title,r=t.showTitle,i=void 0===r||r,a=t.tips,u=t.tipsPosition,c=void 0===u?"after":u,l=E(i&&!!n),f=l.contentStyle;l.labelStyle;return o.a.createElement(M,{style:f,className:"rdx-form-item-content"},o.a.createElement("span",null,e,a&&"after"===c&&o.a.createElement(T,{tips:a})),o.a.createElement(R,{msg:t.desc}),o.a.createElement(k,{msg:t.errorMsg}),o.a.createElement(k,{msg:(t.formErrorMsg||[]).join(",")}))},WrapperComponent:function(t){var e=t.type,n=t.children,r=t.id,i=E().containerStyle;return o.a.createElement(N,{"data-id":r,useMargin:e!==g.a.Object,style:i,className:"rdx-form-item"},n)}});function k(t){return o.a.createElement("div",{title:t.msg,style:{color:"red",width:"100%",maxHeight:32,maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},t.msg)}function R(t){return o.a.createElement("div",{style:{color:"#999999"}},t.msg)}function T(t){var e=t.tips;return o.a.createElement(x,{trigger:o.a.createElement("span",{style:{display:"inline-flex",verticalAlign:"text-top",paddingLeft:"6px"}},o.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14"},o.a.createElement("path",{d:"M512 1024C229.069 1024 0 794.829 0 512S229.069 0 512 0c282.931 0 512 229.171 512 512s-229.069 512-512 512z m-0.034-93.12c231.073 0.066 418.98-187.942 418.913-418.914 0.067-230.904-187.84-418.912-418.913-418.912-231.005 0-418.912 187.907-418.912 418.912 0 231.073 187.907 418.98 418.912 418.913z m-46.511-651.607h93.09v93.09h-93.09v-93.09z m93.09 465.445h-93.09V465.455h93.09v279.263z",fill:"#8a8a8a","p-id":"1386"})))},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:e}}))}var A,I,F,V=O.c.div(A||(A=C(["\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ",";\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n"],["\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ",";\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n"])),(function(t){return t.require?"visible":"none"})),M=O.c.div(I||(I=C(["\n  line-height: 28px;\n  /* flex:  */\n"],["\n  line-height: 28px;\n  /* flex:  */\n"]))),N=O.c.div(F||(F=C(["\n  border: 1px dashed transparent;\n  padding-bottom: ","px;\n"],["\n  border: 1px dashed transparent;\n  padding-bottom: ","px;\n"])),(function(t){return t.useMargin?12:0})),L=n(168),D=n(159),_=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},W=function(t){var e=t.data;return o.a.createElement("pre",null,JSON.stringify(e,null,2))},B=function(t){var e=_(Object(r.useState)(!1),2),n=e[0],i=e[1],a=t.JsonView,u=void 0===a?W:a,c=Object(m.e)(),l=Object(m.b)(),f=Object(D.c)(c,l);return o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("div",{onClick:function(){i(!n)},style:{background:"blue",right:30,display:"flex",alignItems:"center",color:"white",justifyContent:"center",borderRadius:"5%",width:100,height:32}},"\u67e5\u770b\u6570\u636e"),o.a.createElement("div",{style:{position:"absolute",background:"white",opacity:n?1:0,maxWidth:n?400:0,maxHeight:n?400:0,overflow:"auto",zIndex:100,boxShadow:"0 0 8px 0 rgba(153, 163, 179, 0.28)",borderRadius:4,width:400,height:400,transition:"all 0.5s",padding:24}},o.a.createElement("h3",null,"\u8868\u5355\u8f93\u5165\u6570\u636e"),o.a.createElement("div",{style:{overflow:"auto"}},o.a.createElement("strong",null,"\u72b6\u6001\u6570\u636e"),o.a.createElement(u,{data:c}),o.a.createElement("strong",null,"\u884d\u751f\u72b6\u6001\u6570\u636e"),o.a.createElement(u,{data:f}))))};var z=o.a.createContext(null);function $(){return Object(r.useContext)(z)}var J=n(686),U=n(826),q=Object.prototype.hasOwnProperty,G=Object.prototype.toString;function H(t){if(null==t)return!0;if("boolean"==typeof t)return!1;if("number"==typeof t)return!1;if("string"==typeof t)return 0===t.length;if("function"==typeof t)return 0===t.length;if(Array.isArray(t)){if(0===t.length)return!0;for(var e=0;e<t.length;e++)if(void 0!==t[e]&&null!==t[e]&&""!==t[e]&&0!==t[e])return!1;return!0}if(t instanceof Error)return""===t.message;if(t.toString===G)switch(t.toString()){case"[object File]":case"[object Map]":case"[object Set]":return 0===t.size;case"[object Object]":for(var n in t)if(q.call(t,n))return!1;return!0}return!1}function K(t){return function(t){return void 0===t&&(t=[]),t.filter((function(t){return!H(t)}))}(t).length>0}var X=function(){return(X=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Q=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function u(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},Y=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function Z(t){function e(e){return Q(this,void 0,void 0,(function(){var n,r,o;return Y(this,(function(i){return n=e.map((function(e){return{id:e,value:t.getTaskStateById(Object(D.e)(e,D.a.EditState))}})),(r=n.filter((function(t){return!t.value.modify}))).forEach((function(e){var n=e.id,r=e.value;t.updateState(Object(D.e)(n,D.a.EditState),a.a.Update,a.d.TaskState,X(X({},r),{modify:!0}))})),r.length>0?(o=t.watchOnce(e.map((function(t){return Object(D.e)(t,D.a.Error)}))),t.notifyDownStreamPoints(r.map((function(t){return{key:Object(D.e)(t.id,D.a.EditState),downStreamOnly:!0}}))),[2,o]):[2,n.map((function(e){return t.getTaskStateById(Object(D.e)(e.id,D.a.Error))}))]}))}))}return function(n){var r=n;return r?Array.isArray(r)?e(r).then((function(t){return{isError:K(t),errorMsg:t}})):e([r]).then((function(t){return{isError:K(t),errorMsg:t[0]}})):e(Array.from(t.getTasks().keys()).filter((function(t){return new RegExp("^"+D.a.EditState+"\\$\\$.+").test(t)})).map((function(t){return t.match(new RegExp("^"+D.a.EditState+"\\$\\$(.+)"))[1]}))).then((function(t){return{isError:K(t),errorMsg:t}}))}}var tt=n(201),et=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function u(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},nt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};var rt=function(){function t(t){this.subscribeMap=new Map,this._initState=t}return t.prototype.getComputeState=function(){return Object(D.c)(this.context.getTaskState(),this.context.getVirtualTaskState())},t.prototype.getState=function(){return this.context.getAllTaskState()},t.prototype._initContext=function(t){this.context=t},t.prototype.subscribeAll=function(t){var e=this;this.context.getEventEmitter().addListener(a.b.GlobalState,(function(){t&&t(e.getComputeState())}))},t.prototype.subscribe=function(t,e){var n=this,r="subscribe/"+Object(tt.v1)(),o=t;this.subscribeMap.set(e,r),Object(c.b)({id:r,get:function(t){var e=t.get;return Array.isArray(o)?e(Object(J.c)(o.map((function(t){return Object(i.e)({id:Object(D.e)(t,D.a.Compute)})})))):e(Object(i.e)({id:Object(D.e)(o,D.a.Compute)}))}}).load(this.context),this.context.getEventEmitter().addListener(Object(U.b)(r,a.b.State),(function(){e&&e(n.context.getTaskStateById(r))}))},t.prototype.unsubscribe=function(t){this.context.removeTask(this.subscribeMap.get(t))},t.prototype.useLinkFormComputeState=function(t){return Object(m.c)(Object(D.e)(t,D.a.Compute),this.context)},t.prototype.useLinkFormValueState=function(t){return Object(m.c)(Object(D.e)(t,D.a.ValueIntercepter),this.context)},t.prototype.useLinkFormStatusState=function(t){return Object(m.c)(Object(D.e)(t,D.a.Status),this.context)},t.prototype.reset=function(){},t.prototype.setFormValue=function(t,e){this.context.batchNext(t,e)},t.prototype.setFormStatus=function(t,e){var n=t;this.context.batchNext(Object(D.e)(n,D.a.Status),e)},t.prototype.setFormCompute=function(t,e){var n=t;this.context.batchNext(Object(D.e)(n,D.a.Compute),e)},t.prototype.validate=function(t){return et(this,void 0,void 0,(function(){return nt(this,(function(e){switch(e.label){case 0:return[4,Z(this.context)(t)];case 1:return[2,e.sent()]}}))}))},t}(),ot=n(593),it=n(596),at=n(523),ut=function(){return(ut=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ct=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function u(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},lt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},ft=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},st=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pt=function(t){var e=vt(t),n=function(t){var e=t.name,n=t.type,r=t.defaultValue,o=dt(e),a=Object(ot.a)({virtual:Object(D.f)(e),id:dt(e),defaultValue:Object(h.c)({type:n,defaultValue:r})});return Object(c.b)({id:Object(D.e)(o,D.a.ValueIntercepter),get:function(t){var e=t.get;return e(a)},set:function(t,e){var n=t.get,r=t.set;n(Object(i.e)({id:Object(D.e)(o,D.a.EditState)})).modify||r(Object(i.e)({id:Object(D.e)(o,D.a.EditState)}),(function(t){return ut(ut({},t),{modify:!0})})),r(a,e)}})}(t),o=function(t){var e=Object(r.useContext)(v.a).paths,n=t.name,o=Object(L.a)(n,e);return Object(D.f)(n)?Object(D.g)(n).map((function(n,r){var a=Object(L.a)(n,e),u=Object(ot.a)({id:a,defaultValue:Object(h.c)(t)[r]});return Object(c.b)({id:Object(D.e)(a,D.a.ValueIntercepter),get:function(t){var e=t.get;return e(u)},set:function(t,e){var n=t.get,r=t.set;n(Object(i.e)({id:Object(D.e)(o,D.a.EditState)})).modify||r(Object(i.e)({id:Object(D.e)(o,D.a.EditState)}),(function(t){return ut(ut({},t),{modify:!0})})),r(u,e)}})})):[]}(t),a=t.name;return function(t){if(Object(D.f)(a)){t.get(n);var r=o.map((function(e){return t.get(e)}));return ut(ut({},t.get(e)),{value:r})}return ut(ut({},t.get(e)),{value:t.get(n)})}};function dt(t){var e=Object(r.useContext)(v.a).paths;return Object(L.a)(t,e)}function bt(t){var e=t.visible,n=void 0===e||e,r=t.preview,o=void 0!==r&&r,i=t.disabled,a=void 0!==i&&i,u=t.require,c=void 0!==u&&u,l=t.componentProps;return{visible:n,preview:o,disabled:a,require:c,componentProps:void 0===l?{}:l}}function vt(t){var e=t.name,n=t.alias;return Object(ot.a)({virtual:!0,id:Object(D.e)(dt(e),D.a.Status,n),defaultValue:bt(t)})}function yt(t,e,n){return Object(ot.a)({virtual:!0,id:Object(D.e)(t,D.a.EditState,e),defaultValue:{modify:!1,autoValidate:n}})}var mt=function(t,e){return function(e,n){if(e instanceof i.b)return t.get(e);if("string"==typeof e)try{var r=t.get(Object(i.e)({id:Object(D.e)(e,D.a.Compute,n)})),o=r;o.value,ft(o,["value"]);return r}catch(a){if(a.message===it.a.DepsNotReady)throw a;return console.warn("\u8282\u70b9\u52a0\u8f7d\u51fa\u9519",a),{}}}};var ht=function(t){return function(e,n,r){if(e instanceof i.b)t.set(e,n);else if("string"==typeof e)try{var o=Object(L.b)(e),a=Object(D.f)(o),u=Object(D.g)(o);if(n===at.a)u.forEach((function(r,o){t.set(Object(i.e)({id:Object(D.e)(Object(L.a)(r,Object(L.c)(e)),D.a.ValueIntercepter)}),n)})),t.set(Object(i.e)({id:Object(D.e)(Object(L.a)(o,Object(L.c)(e)),D.a.Status,r)}),n);else{var c=void 0,l=function(t,e){var n=e;return e instanceof Function&&(n=e(t)),n}(c=ut(a?{value:u.map((function(n){return t.get(Object(i.e)({id:Object(D.e)(Object(L.a)(n,Object(L.c)(e)),D.a.ValueIntercepter)}))}))}:{value:t.get(Object(i.e)({id:e}))},t.get(Object(i.e)({id:Object(D.e)(e,D.a.Status)}))),n),f=l.value,s=ft(l,["value"]),p=(c.value,ft(c,["value"]));if(l.hasOwnProperty("value")){u.forEach((function(n,r){t.set(Object(i.e)({id:Object(D.e)(Object(L.a)(n,Object(L.c)(e)),D.a.ValueIntercepter)}),a?function(t){return Array.isArray(f)&&f?f[t]:void 0}(r):f)}))}t.set(Object(i.e)({id:Object(D.e)(Object(L.a)(o,Object(L.c)(e)),D.a.Status,r)}),ut(ut({},p),s))}}catch(d){console.warn(d)}}};function gt(t){var e=t.name,n=t.alias,r=t.get,o=t.set,i=dt(e),a=pt(t);return Object(c.b)({virtual:!0,id:Object(D.e)(i,D.a.Compute,n),get:r?function(t,e){var o=a(t),u=r(ut(ut({},t),{id:i,get:mt(t),preComputeValue:e.hasTask(Object(D.e)(i,D.a.Compute,n))?e.getTaskStateById(Object(D.e)(i,D.a.Compute,n)):null,mixedValueAndStatus:o}));return Object(l.b)(u)?u.then((function(t){return ut(ut({},o),t||{})})):ut(ut({},o),u||{})}:function(t){return a(t)},set:o?function(t,e,n){o(ut(ut({},t),{id:i,get:mt(t),set:ht(t)}),e)}:function(t,e){ht(t)(i,e,n)}})}var Ot,jt=n(186),xt=function(){return(xt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},wt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},St=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Et=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(St(arguments[e]));return t};function Ct(t){return function(){var e=function(t){var e,n=t.children,i=t.formTypes,a=t.info,u=t.baseProps,c=t.componentProps,l=t.isLayout,f=t.id,s=i.type,p=i.componentType,d=a.visible,b=void 0===d||d,v=Object(jt.a)((function(t){u.onChange(t)}),n),y=Object(r.useContext)(P),m=y.WrapperComponent,h=y.TitleComponent,g=y.ContentComponent,O=xt(xt({},u),{arrayHelper:{mutators:v},componentProps:c}),j=$().components[p||s];"function"==typeof n?e=n(O):j?e=o.a.createElement(j,xt({},O),n):console.warn("xCompnent:"+p+", type: "+s+" not found!!!");var x=xt(xt({},a),{id:f,type:s,children:n});return o.a.createElement(o.a.Fragment,null,l?e:b&&o.a.createElement(m,xt({},x),o.a.createElement(h,xt({},x)),o.a.createElement(g,xt({},x),e)))};return{useLinkFormComputeState:function(t){return Object(m.j)(Object(i.e)({id:Object(D.e)(t,D.a.Compute)}))},useLinkFormStatusState:function(t){return Object(m.j)(Object(i.e)({id:Object(D.e)(t,D.a.Status)}))},useLinkFormValueState:function(t){return Object(m.j)(Object(i.e)({id:Object(D.e)(t,D.a.ValueIntercepter)}))},FormItem:function(t){var n=t.name,i=t.title,u=t.desc,l=t.tips,f=t.children,s=t.type,p=t.showTitle,d=(t.alias,t.componentType),b=Object(r.useContext)(v.a).paths,O=Object(L.a)(n,b),j="layout"===s,x=xt(xt({},bt(t)),{value:Object(h.c)(t)});!function(t){var e=Object(m.i)(),n=bt(t),o=vt(t);Object(r.useMemo)((function(){var t=e.getTaskStateById(o.getId());!e.hasTask(o.getId())&&t&&e.updateState(o.getId(),a.a.Update,a.d.TaskState,n)}),[])}(t);var w=St(function(t){return Object(m.j)(gt(t))}(t),2),S=w[0],E=w[1],C=Object(m.k)(function(t){var e=this,n=t.name,r=t.alias,o=t.title,i=t.rules,a=void 0===i?[]:i,u=dt(n),l=gt(t),f=$();return Object(c.b)({virtual:!0,id:Object(D.e)(u,D.a.Error,r),get:function(t,n){return ct(e,void 0,void 0,(function(){var e,n,i,c,s,p,d,b,v,y,m,h,g,O,j;return lt(this,(function(x){switch(x.label){case 0:return e=t.get(yt(u,r,f.autoValidate)),n=e.modify,i=e.autoValidate,c=t.get(l),n||i?[3,1]:[2,[]];case 1:s=!1,p=[],d=function(t){return H(t.value.value)?o+"\u4e0d\u80fd\u4e3a\u7a7a!":void 0},x.label=2;case 2:x.trys.push([2,7,8,9]),b=st(c.require?a.concat([d]):a),v=b.next(),x.label=3;case 3:return v.done?[3,6]:(y=v.value,h=(m=p).push,[4,y({value:c,get:function(e){return"string"==typeof e&&t.get(yt(e,r,i)).modify&&(s=!0),mt(t)(e)},id:u})]);case 4:h.apply(m,[x.sent()]),x.label=5;case 5:return v=b.next(),[3,3];case 6:return[3,9];case 7:return g=x.sent(),O={error:g},[3,9];case 8:try{v&&!v.done&&(j=b.return)&&j.call(b)}finally{if(O)throw O.error}return[7];case 9:return s||n?[2,p.filter((function(t){return!H(t)}))]:[2,[]];case 10:return[2]}}))}))}})}(t)),P=S.status,k=S.errorMsg,R=S.content,T=void 0===R?x:R,A=T.visible,I=T.disabled,F=T.require,V=T.preview,M=T.value,N=T.componentProps,_=void 0;P===a.c.Waiting||P===a.c.Running?_=g.b.Loading:a.c.Error===P&&(_=g.b.Error);var W=o.a.createElement(e,{id:O,isLayout:j,baseProps:{value:M,require:F,state:_,preview:V,disabled:I,onChange:function(t){var e=xt(xt({},S.content),{value:t});E(e)}},info:{showTitle:p,visible:A,title:i,desc:u,tips:l,require:F,formErrorMsg:C,errorMsg:k},formTypes:{type:s,componentType:d},componentProps:N||{}},f);return j?W:o.a.createElement(v.a.Provider,{value:{paths:Et(b,[n])}},o.a.createElement(y.Provider,{value:{name:n}},W))},RdxFormRoot:function(e){var n=e.children,r=e.store,i=void 0===r?new rt({}):r,a=e.JsonView,c=e.autoValidate,l=void 0!==c&&c,f=e.enabledStatePreview,s=wt(e,["children","store","JsonView","autoValidate","enabledStatePreview"]);return o.a.createElement(z.Provider,{value:{components:t.components,autoValidate:l}},o.a.createElement(u.a,xt({},s,{context:m.a,withStore:function(t){i._initContext(t)},initializeState:i._initState,createStore:function(t){return new D.b(t)},onChange:function(){}}),n,f&&o.a.createElement(B,{JsonView:a})))},formCompute:function(t){return Object(c.b)(xt(xt({},t),{get:function(e,n){return t.get(xt(xt({},e),{get:mt(e)}))},set:function(e,n,r){return t.set(xt(xt({},e),{get:mt(e),set:ht(e)}),n)},type:i.a.Compute}))},formComputeFamily:function(t){var e=t.id,n=t.get,r=t.set;return function(t){var o=e+"_computeFamily/"+p(t,{allowFunctions:!1});return new c.a({id:o,get:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(t)(e[0])},set:r?function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r(t)(e[0],e[1])}:void 0})}},createLinkFormValueAtom:function(t){return Object(i.e)({id:Object(D.e)(t,D.a.ValueIntercepter)})},createLinkFormValueStatus:function(t){return Object(i.e)({id:Object(D.e)(t,D.a.Status)})},createLinkFormValueCompute:function(t){return Object(i.e)({id:Object(D.e)(t,D.a.Compute)})},useValidator:function(){return Z(Object(m.d)())},createFormStore:function(t){return new rt(t)}}}}!function(t){t.Relative="Relative",t.Absolute="Absolute"}(Ot||(Ot={}))},192:function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},193:function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,o=n;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}},201:function(t,e,n){var r=n(215),o=n(216),i=o;i.v1=r,i.v4=o,t.exports=i},215:function(t,e,n){var r,o,i=n(192),a=n(193),u=0,c=0;t.exports=function(t,e,n){var l=e&&n||0,f=e||[],s=(t=t||{}).node||r,p=void 0!==t.clockseq?t.clockseq:o;if(null==s||null==p){var d=i();null==s&&(s=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==p&&(p=o=16383&(d[6]<<8|d[7]))}var b=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:c+1,y=b-u+(v-c)/1e4;if(y<0&&void 0===t.clockseq&&(p=p+1&16383),(y<0||b>u)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=b,c=v,o=p;var m=(1e4*(268435455&(b+=122192928e5))+v)%4294967296;f[l++]=m>>>24&255,f[l++]=m>>>16&255,f[l++]=m>>>8&255,f[l++]=255&m;var h=b/4294967296*1e4&268435455;f[l++]=h>>>8&255,f[l++]=255&h,f[l++]=h>>>24&15|16,f[l++]=h>>>16&255,f[l++]=p>>>8|128,f[l++]=255&p;for(var g=0;g<6;++g)f[l+g]=s[g];return e||a(f)}},216:function(t,e,n){var r=n(192),o=n(193);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var u=0;u<16;++u)e[i+u]=a[u];return e||o(a)}}}]);