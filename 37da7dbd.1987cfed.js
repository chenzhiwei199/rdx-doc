(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{115:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return B})),n.d(t,"metadata",(function(){return L})),n.d(t,"toc",(function(){return q})),n.d(t,"default",(function(){return $}));var r={};n.r(r),n.d(r,"\u7b80\u5355\u793a\u4f8b",(function(){return y}));var o={};n.r(o),n.d(o,"\u7b80\u5355\u793a\u4f8b",(function(){return C}));var a={};n.r(a),n.d(a,"\u8054\u52a8\u903b\u8f91",(function(){return F}));var i={};n.r(i),n.d(i,"\u8054\u52a8\u903b\u8f91",(function(){return M}));var u=n(3),c=n(7),l=n(0),s=n.n(l),f=n(191),p=n(208),d=n(204),m=Object(d.a)({components:{input:function(e){var t=e.value,n=e.onChange;return s.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}})}}})(),b=m.RdxFormRoot,v=m.FormItem;function y(){return s.a.createElement(b,{enabledStatePreview:!0},s.a.createElement(v,{type:"string",componentType:"input",name:"city"}))}var h=n(472),g=n.n(h),O=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function u(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},x=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(u){a=[6,u],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},j=Object(d.a)({components:{select:function(e){var t=e.value,n=e.onChange,r=e.componentProps.dataSource,o=void 0===r?[]:r;return s.a.createElement("select",{value:t,onChange:function(e){n(e.target.value)}},o.map((function(e){return s.a.createElement("option",{value:e.value},e.label)})))}}})(),w=j.RdxFormRoot,S=j.FormItem,E=(0,j.formCompute)({id:"fetchData",get:function(){return O(void 0,void 0,void 0,(function(){return x(this,(function(e){switch(e.label){case 0:return[4,g.a.get("https://rap2api.alibaba-inc.com/app/mock/4200/city")];case 1:return[2,e.sent().data.data.data]}}))}))}});function C(){var e=this;return s.a.createElement(w,{enabledStatePreview:!0},s.a.createElement(S,{type:"string",componentType:"select",name:"city",get:function(t){var n=t.get;return O(e,void 0,void 0,(function(){return x(this,(function(e){return[2,{componentProps:{dataSource:n(E)}}]}))}))}}))}var k=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function u(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},R=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(u){a=[6,u],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},T=Object(d.a)({components:{input:function(e){var t=e.value,n=e.onChange;return s.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}})},select:function(e){var t=e.value,n=e.onChange,r=e.componentProps.dataSource,o=void 0===r?[]:r;return s.a.createElement("select",{value:t,onChange:function(e){n(e.target.value)}},o.map((function(e){return s.a.createElement("option",{value:e.value},e.label)})))}}})(),P=T.RdxFormRoot,I=T.FormItem;function F(){var e=this;return s.a.createElement(P,{enabledStatePreview:!0},s.a.createElement(I,{defaultValue:"show",type:"string",title:"\u663e\u793a\u5f00\u5173",componentType:"select",name:"visible",get:function(){return k(e,void 0,void 0,(function(){return R(this,(function(e){return[2,{componentProps:{dataSource:[{label:"\u663e\u793a",value:"show"},{label:"\u9690\u85cf",value:"hidden"}]}}]}))}))}}),s.a.createElement(I,{type:"string",title:"\u6839\u636e\u663e\u793a\u5f00\u5173\u8fdb\u884c\u8054\u52a8",get:function(e){var t=e.get;return{visible:"show"===t("visible").value}},componentType:"input",name:"city"}))}var V=Object(d.a)({components:{input:function(e){var t=e.value,n=e.onChange;return s.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}})},select:function(e){var t=e.value,n=e.onChange,r=e.componentProps.dataSource,o=void 0===r?[]:r;return s.a.createElement("select",{value:t,onChange:function(e){n(e.target.value)}},o.map((function(e){return s.a.createElement("option",{value:e.value},e.label)})))}}})(),A=V.RdxFormRoot,N=V.FormItem;function M(){return s.a.createElement(A,{enabledStatePreview:!0},s.a.createElement(N,{title:"\u5bc6\u7801",type:"string",componentType:"input",name:"password",require:!0}),s.a.createElement(N,{title:"\u786e\u8ba4\u5bc6\u7801",type:"string",componentType:"input",name:"confirm",rules:[function(e){var t=e.value,n=e.get;return t.value!==n("password").value?"\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4":""}],require:!0}))}var B={id:"quick-start",title:"\u5feb\u901f\u5f00\u59cb"},L={unversionedId:"rdx-form/introduce/quick-start",id:"rdx-form/introduce/quick-start",isDocsHomePage:!1,title:"\u5feb\u901f\u5f00\u59cb",description:"1. \u73af\u5883\u914d\u7f6e",source:"@site/docs/rdx-form/introduce/quick-start.stories.mdx",slug:"/rdx-form/introduce/quick-start",permalink:"/rdx-doc/docs/rdx-form/introduce/quick-start",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/rdx-form/introduce/quick-start.stories.mdx",version:"current",sidebar:"someSidebar",previous:{title:"\u53c2\u6570\u89e3\u6790\u4f8b\u5b50",permalink:"/rdx-doc/docs/examples/urlParse"},next:{title:"\u6838\u5fc3\u6982\u5ff5",permalink:"/rdx-doc/docs/rdx-form/introduce/coreConcepts"}},q=[{value:"1. \u73af\u5883\u914d\u7f6e",id:"1-\u73af\u5883\u914d\u7f6e",children:[]},{value:"2. \u7b80\u5355\u6848\u4f8b",id:"2-\u7b80\u5355\u6848\u4f8b",children:[]},{value:"3. \u8fdc\u7a0b\u6570\u636e\u6e90\u52a0\u8f7d\u6848\u4f8b",id:"3-\u8fdc\u7a0b\u6570\u636e\u6e90\u52a0\u8f7d\u6848\u4f8b",children:[]},{value:"4. \u8054\u52a8\u6848\u4f8b",id:"4-\u8054\u52a8\u6848\u4f8b",children:[]},{value:"5. \u8054\u52a8\u6821\u9a8c\u6848\u4f8b",id:"5-\u8054\u52a8\u6821\u9a8c\u6848\u4f8b",children:[]}],J={toc:q};function $(e){var t=e.components,n=Object(c.a)(e,["components"]);return Object(f.b)("wrapper",Object(u.a)({},J,n,{components:t,mdxType:"MDXLayout"}),Object(f.b)("ol",null,Object(f.b)("li",{parentName:"ol"},"\u73af\u5883\u914d\u7f6e"),Object(f.b)("li",{parentName:"ol"},"\u7b80\u5355\u6848\u4f8b"),Object(f.b)("li",{parentName:"ol"},"\u8fdc\u7a0b\u6570\u636e\u6e90\u52a0\u8f7d\u6848\u4f8b"),Object(f.b)("li",{parentName:"ol"},"\u8054\u52a8\u6848\u4f8b"),Object(f.b)("li",{parentName:"ol"},"\u8054\u52a8\u6821\u9a8c\u6848\u4f8b")),Object(f.b)("h3",{id:"1-\u73af\u5883\u914d\u7f6e"},"1. \u73af\u5883\u914d\u7f6e"),Object(f.b)("p",null,Object(f.b)("inlineCode",{parentName:"p"},"npm install @alife/rdx-form")," \u6216\u8005 ",Object(f.b)("inlineCode",{parentName:"p"},"yarn add @alife/rdx-form")),Object(f.b)("h3",{id:"2-\u7b80\u5355\u6848\u4f8b"},"2. \u7b80\u5355\u6848\u4f8b"),Object(f.b)(p.a,{code:"import React from 'react';\nimport { formBuilder } from '@alife/rdx-form';\n\nconst forms = formBuilder({\n  components: {\n    input: (props) => {\n      const { value, onChange } = props;\n      return (\n        <input\n          value={value}\n          onChange={(event) => {\n            onChange(event.target.value);\n          }}\n        ></input>\n      );\n    },\n  },\n});\nconst { RdxFormRoot, FormItem } = forms<{\n  city: string;\n}>();\n\nexport function \u7b80\u5355\u793a\u4f8b() {\n  return (\n    <RdxFormRoot enabledStatePreview={true}>\n      <FormItem type='string' componentType={'input'} name='city'></FormItem>\n    </RdxFormRoot>\n  );\n}\n",example:r,mdxType:"ExampleCustomizer"}),Object(f.b)("h3",{id:"3-\u8fdc\u7a0b\u6570\u636e\u6e90\u52a0\u8f7d\u6848\u4f8b"},"3. \u8fdc\u7a0b\u6570\u636e\u6e90\u52a0\u8f7d\u6848\u4f8b"),Object(f.b)(p.a,{code:"import React from 'react';\nimport { formBuilder, IFormComponentProps } from '@alife/rdx-form';\nimport axios from 'axios';\n\nconst forms = formBuilder({\n  components: {\n    select: (\n      props: IFormComponentProps<{\n        dataSource: { label: string; value: string }[];\n      }>\n    ) => {\n      const { value, onChange, componentProps } = props;\n      const { dataSource = [] } = componentProps;\n      return (\n        <select\n          value={value}\n          onChange={(event) => {\n            onChange(event.target.value);\n          }}\n        >\n          {dataSource.map((item) => (\n            <option value={item.value}>{item.label}</option>\n          ))}\n        </select>\n      );\n    },\n  },\n});\n\nconst { RdxFormRoot, FormItem, formCompute } = forms<{\n  city: string;\n}>();\nconst fetchDataCompute = formCompute({\n  id: 'fetchData',\n  get: async () => {\n    return (\n      await axios.get(`https://rap2api.alibaba-inc.com/app/mock/4200/city`)\n    ).data.data.data;\n  },\n});\nexport function \u7b80\u5355\u793a\u4f8b() {\n  return (\n    <RdxFormRoot enabledStatePreview={true}>\n      <FormItem\n        type='string'\n        componentType={'select'}\n        name='city'\n        get={async ({ get }) => {\n          return {\n            componentProps: {\n              dataSource: get(fetchDataCompute) as any,\n            },\n          };\n        }}\n      ></FormItem>\n    </RdxFormRoot>\n  );\n}\n",example:o,mdxType:"ExampleCustomizer"}),Object(f.b)("h3",{id:"4-\u8054\u52a8\u6848\u4f8b"},"4. \u8054\u52a8\u6848\u4f8b"),Object(f.b)(p.a,{code:"import React from 'react';\nimport { formBuilder, IFormComponentProps } from '@alife/rdx-form';\n\nconst forms = formBuilder({\n  components: {\n    input: (props) => {\n      const { value, onChange } = props;\n      return (\n        <input\n          value={value}\n          onChange={(event) => {\n            onChange(event.target.value);\n          }}\n        ></input>\n      );\n    },\n    select: (\n      props: IFormComponentProps<{\n        dataSource: { label: string; value: string }[];\n      }>\n    ) => {\n      const { value, onChange, componentProps } = props;\n      const { dataSource = [] } = componentProps;\n      return (\n        <select\n          value={value}\n          onChange={(event) => {\n            onChange(event.target.value);\n          }}\n        >\n          {dataSource.map((item) => (\n            <option value={item.value}>{item.label}</option>\n          ))}\n        </select>\n      );\n    },\n  },\n});\n\nconst { RdxFormRoot, FormItem } = forms<{\n  visible: string;\n  city: string;\n}>();\n\nexport function \u8054\u52a8\u903b\u8f91() {\n  return (\n    <RdxFormRoot enabledStatePreview={true}>\n      <FormItem\n        defaultValue={'show'}\n        type='string'\n        title={'\u663e\u793a\u5f00\u5173'}\n        componentType={'select'}\n        name='visible'\n        get={async () => {\n          return {\n            componentProps: {\n              dataSource: [\n                { label: '\u663e\u793a', value: 'show' },\n                { label: '\u9690\u85cf', value: 'hidden' },\n              ],\n            },\n          };\n        }}\n      ></FormItem>\n      <FormItem\n        type='string'\n        title={'\u6839\u636e\u663e\u793a\u5f00\u5173\u8fdb\u884c\u8054\u52a8'}\n        get={({ get }) => {\n          return {\n            visible: get('visible').value === 'show',\n          };\n        }}\n        componentType={'input'}\n        name='city'\n      ></FormItem>\n    </RdxFormRoot>\n  );\n}\n",example:a,mdxType:"ExampleCustomizer"}),Object(f.b)("h3",{id:"5-\u8054\u52a8\u6821\u9a8c\u6848\u4f8b"},"5. \u8054\u52a8\u6821\u9a8c\u6848\u4f8b"),Object(f.b)(p.a,{code:"import React from 'react';\nimport { formBuilder, IFormComponentProps } from '@alife/rdx-form';\n\nconst forms = formBuilder({\n  components: {\n    input: (props) => {\n      const { value, onChange } = props;\n      return (\n        <input\n          value={value}\n          onChange={(event) => {\n            onChange(event.target.value);\n          }}\n        ></input>\n      );\n    },\n    select: (\n      props: IFormComponentProps<{\n        dataSource: { label: string; value: string }[];\n      }>\n    ) => {\n      const { value, onChange, componentProps } = props;\n      const { dataSource = [] } = componentProps;\n      return (\n        <select\n          value={value}\n          onChange={(event) => {\n            onChange(event.target.value);\n          }}\n        >\n          {dataSource.map((item) => (\n            <option value={item.value}>{item.label}</option>\n          ))}\n        </select>\n      );\n    },\n  },\n});\n\nconst { RdxFormRoot, FormItem } = forms<{\n  password: string;\n  confirm: string;\n}>();\n\nexport function \u8054\u52a8\u903b\u8f91() {\n  return (\n    <RdxFormRoot enabledStatePreview={true}>\n      <FormItem\n        title='\u5bc6\u7801'\n        type='string'\n        componentType={'input'}\n        name='password'\n        require\n      ></FormItem>\n      <FormItem\n        title='\u786e\u8ba4\u5bc6\u7801'\n        type='string'\n        componentType={'input'}\n        name='confirm'\n        rules={[\n          ({ value, get }) => {\n            return value.value !== get('password').value\n              ? '\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4'\n              : '';\n          },\n        ]}\n        require\n      ></FormItem>\n    </RdxFormRoot>\n  );\n}\n",example:i,mdxType:"ExampleCustomizer"}))}$.isMDXComponent=!0},169:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return d}));var r,o=n(185),a=n(190),i=(n(171),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}),u=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},c=function(){function e(e){this.store={},this.store=e}return e.prototype.clone=function(){return new e(this.store)},e.prototype.merge=function(e){throw new Error("Method not implemented.")},e.prototype.remove=function(e,t){this.store=Object(a.b)(this.store,(function(t){Object(o.d)(t,e,void 0)}))},e.prototype.update=function(e,t,n){this.store=Object(a.b)(this.store,(function(n){Object(o.d)(n,e,t)}))},e.prototype.get=function(e,t){return Object(o.a)(this.store,e)},e.prototype.getAll=function(){return this.store},e}();function l(e){return void 0===e&&(e=""),e.split("|")}function s(e){return void 0===e&&(e=""),e.includes("|")}function f(e){return e+"\\$\\$"}function p(e,t,n){return t+"$$"+e+(n?"$$"+n:"")}function d(e,t){return Object.keys(t).filter((function(e){return e.startsWith(r.Compute+"$$")})).reduce((function(e,n){var r=function(e){var t=e.split("$$");return{type:t[0],id:t[1],alias:t[2]}}(n),a=r.id,i=(r.alias,r.type,a.split(".")),c=i[i.length-1];return c.includes("|")?c.split("|").forEach((function(r,a){var c=u(i.slice(0,i.length-1),[r]).join(".");t[n].value?Object(o.d)(e,c,t[n].value[a]):Object(o.d)(e,c,void 0)})):Object(o.d)(e,a,t[n].value),e}),JSON.parse(JSON.stringify(e)))}!function(e){e.ValueIntercepter="StateIntercepter",e.EditState="editState",e.Compute="compute",e.Status="status",e.Error="error",e.Rule="rule"}(r||(r={}))},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return f})),n.d(t,"k",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"i",(function(){return O}));var r=n(687),o=n(879),a=n(503),i=n(0),u=(n(169),Object(r.c)()),c=Object(o.a)(u),l=c.useRdxGlboalState,s=c.useGlobalVirtualStateUpdate,f=(c.useStatusUpdateById,c.useRdxGlobalContext),p=(c.useGlobalVirtualStateUpdate,c.useRdxState,c.useRdxValue),d=c.useRdxNodeBinding,m=c.useRdxStateLoader,b=(c.useRdxStateLoaderByContext,c.useRdxRefresh,c.useRdxValueLoader),v=(c.useRdxLoading,c.useRdxSetter),y=c.useRdxReset,h=c.useRdxContext;c.useStatusUpdateByRegExp,c.createInteractiveContext;function g(e,t){Object(o.l)(e);var n=d(Object(a.e)({id:e}),!0,t,void 0);return[{status:n.status,content:n.value,errorMsg:n.errorMsg},n.next]}var O=function(){return Object(i.useContext)(u)}},171:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r,o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e.Object="object",e.Array="array",e.String="string",e.Number="number",e.Boolean="boolean"}(r||(r={}));var a,i=o({},r);!function(e){e.Loading="loading",e.Error="error"}(a||(a={}))},182:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));var r=n(0),o=(n(503),n(186)),a=(n(170),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}),i=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};function u(e){return"function"==typeof e}var c=function(){var e=Object(r.useContext)(o.a).paths;return(void 0===e?[]:e).join(".")};function l(e,t){return i(t,[e]).join(".")}function s(e){var t=[];return Array.isArray(e)||(t=e.split(".")),t}function f(e){var t=s(e);return t[t.length-1]}function p(e){var t=s(e);return t.slice(0,t.length-1)}},185:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return p}));var r=n(0),o=n.n(r),a=n(182),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function c(e){var t=e.type,n=e.defaultValue;return null!=n?Object(a.d)(n)?n():n:"array"===t?[]:"object"===t?{}:"string"===t?"":void 0}function l(e){var t=[];return o.a.Children.forEach(e,(function(e,n){t.push(e.props)})),t}function s(e){var t={};return o.a.Children.forEach(e,(function(n,r){0===r&&(t="object"===n.props.type?i(i({},n.props),{childrenPropsInfo:l(e)}):n.props)})),t}function f(e,t,n){var r,o,a=(""+t).split(".");if(!(a&&a.length>0))return e;var i=e,c=0;try{for(var l=u(a),s=l.next();!s.done;s=l.next()){var f=s.value;if(c===a.length-1)return void 0===i[f]?n:i[f];if(void 0===i[f])return n;i=i[f],c++}}catch(p){r={error:p}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}function p(e,t,n){var r,o;void 0===e&&(e={});var a=(""+t).split(".");if(a&&a.length>0){var i=e,c=0;try{for(var l=u(a),s=l.next();!s.done;s=l.next()){var f=s.value;c===a.length-1?i[f]=n:(void 0===i[f]&&(i[f]={}),i=i[f]),c++}}catch(p){r={error:p}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}return e}},186:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(0),o=n.n(r).a.createContext({paths:[]});function a(){var e=Object(r.useContext)(o).paths;return{paths:e,parentPaths:e.slice(0,e.length-1)}}},196:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(185),o=n(170),a=n(182),i=n(171),u=n(169),c=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},l=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e};function s(e,t){var n=Object(a.e)(),c=Object(o.i)(),s=function(){return c.getTaskStateById(n)||{}||[]},f=Object(r.b)(t);Object.values(u.a).map((function(e){return Object(u.d)(e)})).join("|");function p(e){var t=function(e){var t=f.type===i.a.Object||f.type===i.a.Array?new RegExp("(^"+n+"."+e+".(.+))|(^"+n+"."+e+"$)"):new RegExp("^"+n+"."+e+"$");return console.log("rule: ",t),t}(e),r=Array.from(c.getTasks().keys()).filter((function(e){return t.test(e)}));return console.log("vaildKeys: ",r),r}function d(e){p(e).reverse().forEach((function(e){c.removeTask(e),c.removeTask(Object(u.e)(e,u.a.Error)),c.removeTask(Object(u.e)(e,u.a.ValueIntercepter)),c.removeTask(Object(u.e)(e,u.a.Status)),c.removeTask(Object(u.e)(e,u.a.EditState)),c.removeTask(Object(u.e)(e,u.a.Compute))})),c.removeTaskState(n+"."+e)}var m=function(e,t){var r=[n,e].join("."),o=[n,t].join("."),a=JSON.parse(JSON.stringify(c.getTaskStateById(r))),i=JSON.parse(JSON.stringify(c.getTaskStateById(o)));d(e),d(t),c.setTaskState(r,i),c.setTaskState(o,a)};return{add:function(){e(l(s(),[Object(r.c)(f)]))},moveDown:function(e){e+1>s().length||m(e,e+1)},moveUp:function(e){e-1<0||m(e-1,e)},remove:function(t){for(var n=[],r=t;r<s().length-1;r++)m(r,r+1),n=n.concat(p(r).concat(p(r+1)));d(s().length-1),e(s().slice(0,s().length-1))},removeAll:function(){p(s().length-1).forEach((function(e){c.removeTask(e)})),e([])},switchItem:m}}},198:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c}));var r,o,a=n(0);!function(e){e.Grid="grid",e.Inline="inline",e.Classic="classic",e.Base="base"}(r||(r={})),function(e){e.Left="left",e.Right="right",e.Top="top"}(o||(o={}));var i=Object(a.createContext)({});function u(e,t){return void 0===t&&(t=24),e/t*100+"%"}function c(e,t){void 0===t&&(t=!0);var n=Object(a.useContext)(i),c=n.layoutType,l=void 0===c?r.Base:c,s=n.columns,f=void 0===s?24:s,p=n.labelWidth,d=n.labelTextAlign,m=void 0===d?"right":d,b=n.labelCol,v=void 0===b?8:b,y=n.wrapWidth,h=n.wrapCol,g=void 0===h?16:h,O={},x={},j={};return l===r.Base?(O.display="flex",m===o.Top?O.flexDirection="column":x.textAlign=m,x.flexGrow=0,j.flex=1):l===r.Classic?(O.display="flex",m===o.Top?(O.flexDirection="column",x.textAlign="left"):x.textAlign=m,x.flex="0 0 "+u(v),j.flex="0 0 "+u(t?g:g+v),j.overflow="hidden"):l===r.Inline?(O.display="inline-block",m!==o.Right&&m!==o.Left||(x.display="inline-block",j.display="inline-block",x.textAlign=m),x.width=p,j.width=y,j.marginRight=20):l===r.Grid&&(O.display="flex",O.flex=x.flex="0 0 "+u(e,f),m===o.Top?(O.flexDirection="column",x.textAlign="left"):x.textAlign=m,x.flex="0 0 "+u(v),j.flex="0 0 "+u(g)),{containerStyle:O,labelStyle:x,contentStyle:j}}},203:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),o=n.n(r),a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function i(e){var t=e.trigger,n=a(Object(r.useState)(!1),2),i=n[0],u=n[1],c=a(Object(r.useState)(1),2),l=(c[0],c[1]),s=Object(r.useRef)(null),f=Object(r.useRef)(null),p=Object(r.useRef)(null);Object(r.useEffect)((function(){return function(){clearTimeout(s.current)}}));var d=Object(r.useCallback)((function(){s.current=setTimeout((function(){u(!0)}),300)}),[]),m=Object(r.useCallback)((function(){clearTimeout(s.current),u(!1)}),[]);Object(r.useEffect)((function(){l((function(e){return e+1}))}),[f.current,i]);return o.a.createElement("span",{onMouseEnter:d,onMouseLeave:m},o.a.createElement("span",{className:"tooltip-trigger",ref:f},t),i&&o.a.createElement("div",{ref:p,style:{position:"absolute",opacity:p.current?1:0,background:"#333",boxShadow:"0 8px 16px 0 rgba(0,0,0,.08)",color:"white",left:function(){var e=f.current.getBoundingClientRect(),t=e.x,n=e.width;return t-(p.current?p.current.getBoundingClientRect():{width:0}).width/2+n/2}(),maxWidth:"300px",textAlign:"left",zIndex:10,borderRadius:"2px",lineHeight:"14px",padding:"12px 12px 12px 12px"}},e.children,o.a.createElement("div",{style:{position:"absolute",width:"8px",height:"8px",left:"calc(50% - 4px)",top:"-4px",boxShadow:"-1px -1px 1px 0 rgba(0,0,0,.1)",transform:"rotate(45deg)",background:"#333"}})))}},204:function(e,t,n){"use strict";n.d(t,"a",(function(){return xe}));var r=n(0),o=n.n(r),a=n(503),i=n(496),u=n(885),c=n(651),l=n(235),s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function p(e,t,n){var r,o,a;if("string"==typeof e&&!e.includes('"')&&!e.includes("\\"))return'"'+e+'"';switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if(!0!==(null==t?void 0:t.allowFunctions))throw new Error("Attempt to serialize function in a Recoil cache key");return"__FUNCTION("+e.name+")__"}if(null===e)return"null";if("object"!=typeof e)return null!==(a=JSON.stringify(e))&&void 0!==a?a:"";if(Object(l.b)(e))return"__PROMISE__";if(Array.isArray(e))return"["+e.map((function(e,n){return p(e,t,n.toString())}))+"]";if("function"==typeof e.toJSON)return p(e.toJSON(n),t,n);if(e instanceof Map){var i={};try{for(var u=s(e),c=u.next();!c.done;c=u.next()){var d=f(c.value,2),m=d[0],b=d[1];i["string"==typeof m?m:p(m,t)]=b}}catch(v){r={error:v}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return p(i,t,n)}return e instanceof Set?p(Array.from(e).sort((function(e,n){return p(e,t).localeCompare(p(n,t))})),t,n):null!=e[Symbol.iterator]&&"function"==typeof e[Symbol.iterator]?p(Array.from(e),t,n):"{"+Object.keys(e).filter((function(t){return void 0!==e[t]})).sort().map((function(n){return p(n,t)+":"+p(e[n],t,n)})).join(",")+"}"}var d=n(186),m=o.a.createContext({}),b=n(170),v=n(185),y=n(171),h=n(175),g=n(203),O=n(198),x=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},j={TitleComponent:function(e){var t=e.title,n=e.require,r=e.showTitle,a=void 0===r||r,i=e.tips,u=e.layoutExtends,c=e.tipsPosition,l=void 0===c?"after":c,s=Object(O.d)(u.span,a&&!!t).labelStyle;return o.a.createElement(o.a.Fragment,null,t&&a&&o.a.createElement(T,{style:s,require:n,className:"rdx-form-item-label"},t,i&&"before"===l&&o.a.createElement(E,{tips:i})))},ContentComponent:function(e){var t=e.children,n=e.title,r=e.showTitle,a=void 0===r||r,i=e.tips,u=e.layoutExtends,c=e.tipsPosition,l=void 0===c?"after":c,s=Object(O.d)(u.span,a&&!!n).contentStyle;return o.a.createElement(P,{style:s,className:"rdx-form-item-content"},o.a.createElement("span",null,t,i&&"after"===l&&o.a.createElement(E,{tips:i})),o.a.createElement(S,{msg:e.desc}),o.a.createElement(w,{msg:e.errorMsg}),o.a.createElement(w,{msg:(e.formErrorMsg||[]).join(",")}))},WrapperComponent:function(e){var t=e.type,n=e.children,r=e.id,a=e.layoutExtends,i=Object(O.d)(a.span).containerStyle;return o.a.createElement(I,{"data-id":r,useMargin:t!==y.a.Object,style:i,className:"rdx-form-item"},n)}};function w(e){return o.a.createElement("div",{title:e.msg,style:{color:"red",width:"100%",maxHeight:32,maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.msg)}function S(e){return o.a.createElement("div",{style:{color:"#999999"}},e.msg)}function E(e){var t=e.tips;return o.a.createElement(g.a,{trigger:o.a.createElement("span",{style:{verticalAlign:"middle",paddingLeft:"6px"}},o.a.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14"},o.a.createElement("path",{d:"M512 1024C229.069 1024 0 794.829 0 512S229.069 0 512 0c282.931 0 512 229.171 512 512s-229.069 512-512 512z m-0.034-93.12c231.073 0.066 418.98-187.942 418.913-418.914 0.067-230.904-187.84-418.912-418.913-418.912-231.005 0-418.912 187.907-418.912 418.912 0 231.073 187.907 418.98 418.912 418.913z m-46.511-651.607h93.09v93.09h-93.09v-93.09z m93.09 465.445h-93.09V465.455h93.09v279.263z",fill:"#8a8a8a","p-id":"1386"})))},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))}var C,k,R,T=h.c.div(C||(C=x(["\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ",";\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n"],["\n  line-height: 28px;\n  vertical-align: top;\n  color: #666666;\n  display: inline-block;\n  text-align: right;\n  padding-right: 12px;\n  line-height: 28px;\n  ::before {\n    display: ",";\n    content: '*';\n    color: #ff3000;\n    margin-right: 4px;\n  }\n"])),(function(e){return e.require?"visible":"none"})),P=h.c.div(k||(k=x(["\n  line-height: 28px;\n  /* flex:  */\n"],["\n  line-height: 28px;\n  /* flex:  */\n"]))),I=h.c.div(R||(R=x(["\n  border: 1px dashed transparent;\n  padding-bottom: ","px;\n"],["\n  border: 1px dashed transparent;\n  padding-bottom: ","px;\n"])),(function(e){return e.useMargin?12:0})),F=n(182),V=n(169),A=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},N=function(e){var t=e.data;return o.a.createElement("pre",null,JSON.stringify(t,null,2))},M=function(e){var t=A(Object(r.useState)(!1),2),n=t[0],a=t[1],i=e.JsonView,u=void 0===i?N:i,c=Object(b.e)(),l=Object(b.b)(),s=Object(V.c)(c,l);return o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("div",{onClick:function(){a(!n)},style:{background:"blue",right:30,display:"flex",alignItems:"center",color:"white",justifyContent:"center",borderRadius:"5%",width:100,height:32}},"\u67e5\u770b\u6570\u636e"),o.a.createElement("div",{style:{position:"absolute",background:"white",opacity:n?1:0,maxWidth:n?400:0,maxHeight:n?400:0,overflow:"auto",zIndex:100,boxShadow:"0 0 8px 0 rgba(153, 163, 179, 0.28)",borderRadius:4,width:400,height:400,transition:"all 0.5s",padding:24}},o.a.createElement("h3",null,"\u8868\u5355\u8f93\u5165\u6570\u636e"),o.a.createElement("div",{style:{overflow:"auto"}},o.a.createElement("strong",null,"\u72b6\u6001\u6570\u636e"),o.a.createElement(u,{data:c}),o.a.createElement("strong",null,"\u884d\u751f\u72b6\u6001\u6570\u636e"),o.a.createElement(u,{data:s}))))};var B=o.a.createContext(null);function L(){return Object(r.useContext)(B)}var q=n(746),J=n(879),$=Object.prototype.hasOwnProperty,_=Object.prototype.toString;function z(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return!1;if("string"==typeof e)return 0===e.length;if("function"==typeof e)return 0===e.length;if(Array.isArray(e)){if(0===e.length)return!0;for(var t=0;t<e.length;t++)if(void 0!==e[t]&&null!==e[t]&&""!==e[t]&&0!==e[t])return!1;return!0}if(e instanceof Error)return""===e.message;if(e.toString===_)switch(e.toString()){case"[object File]":case"[object Map]":case"[object Set]":return 0===e.size;case"[object Object]":for(var n in e)if($.call(e,n))return!1;return!0}return!1}function D(e){return function(e){return void 0===e&&(e=[]),e.filter((function(e){return!z(e)}))}(e).length>0}var G=function(){return(G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},U=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function u(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},W=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(u){a=[6,u],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};function H(e){function t(t){return U(this,void 0,void 0,(function(){var n,r,o;return W(this,(function(a){return n=t.map((function(t){return{id:t,value:e.getTaskStateById(Object(V.e)(t,V.a.EditState))}})),(r=n.filter((function(e){return!e.value.modify}))).forEach((function(t){var n=t.id,r=t.value;e.updateState(Object(V.e)(n,V.a.EditState),i.a.Update,i.d.TaskState,G(G({},r),{modify:!0}))})),r.length>0?(o=e.watchOnce(t.map((function(e){return Object(V.e)(e,V.a.Error)}))),e.notifyDownStreamPoints(r.map((function(e){return{key:Object(V.e)(e.id,V.a.EditState),downStreamOnly:!0}}))),[2,o]):[2,n.map((function(t){return e.getTaskStateById(Object(V.e)(t.id,V.a.Error))}))]}))}))}return function(n){var r=n;return r?Array.isArray(r)?t(r).then((function(e){return{isError:D(e),errorMsg:e}})):t([r]).then((function(e){return{isError:D(e),errorMsg:e[0]}})):t(Array.from(e.getTasks().keys()).filter((function(e){return new RegExp("^"+V.a.EditState+"\\$\\$.+").test(e)})).map((function(e){return e.match(new RegExp("^"+V.a.EditState+"\\$\\$(.+)"))[1]}))).then((function(e){return{isError:D(e),errorMsg:e}}))}}var X=n(213),K=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function u(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},Q=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(u){a=[6,u],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};var Y=function(){function e(e){this.subscribeMap=new Map,this._initState=e}return e.prototype.getComputeState=function(){return Object(V.c)(this.context.getTaskState(),this.context.getVirtualTaskState())},e.prototype.getState=function(){return this.context.getAllTaskState()},e.prototype._initContext=function(e){this.context=e},e.prototype.subscribeAll=function(e){var t=this;this.context.getEventEmitter().addListener(i.b.GlobalState,(function(){e&&e(t.getComputeState())}))},e.prototype.subscribe=function(e,t){var n=this,r="subscribe/"+Object(X.v1)(),o=e;this.subscribeMap.set(t,r),Object(c.b)({id:r,get:function(e){var t=e.get;return Array.isArray(o)?t(Object(q.c)(o.map((function(e){return Object(a.e)({id:Object(V.e)(e,V.a.Compute)})})))):t(Object(a.e)({id:Object(V.e)(o,V.a.Compute)}))}}).load(this.context),this.context.getEventEmitter().addListener(Object(J.b)(r,i.b.State),(function(){t&&t(n.context.getTaskStateById(r))}))},e.prototype.unsubscribe=function(e){this.context.removeTask(this.subscribeMap.get(e))},e.prototype.useLinkFormComputeState=function(e){return Object(b.c)(Object(V.e)(e,V.a.Compute),this.context)},e.prototype.useLinkFormValueState=function(e){return Object(b.c)(Object(V.e)(e,V.a.ValueIntercepter),this.context)},e.prototype.useLinkFormStatusState=function(e){return Object(b.c)(Object(V.e)(e,V.a.Status),this.context)},e.prototype.reset=function(){},e.prototype.setFormValue=function(e,t){this.context.batchNext(e,t)},e.prototype.setFormStatus=function(e,t){var n=e;this.context.batchNext(Object(V.e)(n,V.a.Status),t)},e.prototype.setFormCompute=function(e,t){var n=e;this.context.batchNext(Object(V.e)(n,V.a.Compute),t)},e.prototype.validate=function(e){return K(this,void 0,void 0,(function(){return Q(this,(function(t){switch(t.label){case 0:return[4,H(this.context)(e)];case 1:return[2,t.sent()]}}))}))},e}(),Z=n(647),ee=n(650),te=n(580),ne=function(){return(ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},re=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function u(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}c((r=r.apply(e,t||[])).next())}))},oe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(u){a=[6,u],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ae=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ie=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ue=function(e){var t=se(e),n=function(e){var t=e.name,n=e.type,r=e.defaultValue,o=ce(t),i=Object(Z.a)({virtual:Object(V.f)(t),id:ce(t),defaultValue:Object(v.c)({type:n,defaultValue:r})});return Object(c.b)({id:Object(V.e)(o,V.a.ValueIntercepter),get:function(e){var t=e.get;return t(i)},set:function(e,t){var n=e.get,r=e.set;n(Object(a.e)({id:Object(V.e)(o,V.a.EditState)})).modify||r(Object(a.e)({id:Object(V.e)(o,V.a.EditState)}),(function(e){return ne(ne({},e),{modify:!0})})),r(i,t)}})}(e),o=function(e){var t=Object(r.useContext)(d.a).paths,n=e.name,o=Object(F.a)(n,t);return Object(V.f)(n)?Object(V.g)(n).map((function(n,r){var i=Object(F.a)(n,t),u=Object(Z.a)({id:i,defaultValue:Object(v.c)(e)[r]});return Object(c.b)({id:Object(V.e)(i,V.a.ValueIntercepter),get:function(e){var t=e.get;return t(u)},set:function(e,t){var n=e.get,r=e.set;n(Object(a.e)({id:Object(V.e)(o,V.a.EditState)})).modify||r(Object(a.e)({id:Object(V.e)(o,V.a.EditState)}),(function(e){return ne(ne({},e),{modify:!0})})),r(u,t)}})})):[]}(e),i=e.name;return function(e){if(Object(V.f)(i)){e.get(n);var r=o.map((function(t){return e.get(t)}));return ne(ne({},e.get(t)),{value:r})}return ne(ne({},e.get(t)),{value:e.get(n)})}};function ce(e){var t=Object(r.useContext)(d.a).paths;return Object(F.a)(e,t)}function le(e){var t=e.visible,n=void 0===t||t,r=e.preview,o=void 0!==r&&r,a=e.disabled,i=void 0!==a&&a,u=e.require,c=void 0!==u&&u,l=e.componentProps,s=void 0===l?{}:l,f=e.layoutExtends;return{visible:n,preview:o,disabled:i,require:c,componentProps:s,layoutExtends:void 0===f?{}:f}}function se(e){var t=e.name,n=e.alias;return Object(Z.a)({virtual:!0,id:Object(V.e)(ce(t),V.a.Status,n),defaultValue:le(e)})}function fe(e,t,n){return Object(Z.a)({virtual:!0,id:Object(V.e)(e,V.a.EditState,t),defaultValue:{modify:!1,autoValidate:n}})}var pe=function(e,t){return function(t,n){if(t instanceof a.b)return e.get(t);if("string"==typeof t)try{var r=e.get(Object(a.e)({id:Object(V.e)(t,V.a.Compute,n)})),o=r;o.value,ae(o,["value"]);return r}catch(i){if(i.message===ee.a.DepsNotReady)throw i;return console.warn("\u8282\u70b9\u52a0\u8f7d\u51fa\u9519",i),{}}}};var de=function(e){return function(t,n,r){if(t instanceof a.b)e.set(t,n);else if("string"==typeof t)try{var o=Object(F.b)(t),i=Object(V.f)(o),u=Object(V.g)(o);if(n===te.a)u.forEach((function(r,o){e.set(Object(a.e)({id:Object(V.e)(Object(F.a)(r,Object(F.c)(t)),V.a.ValueIntercepter)}),n)})),e.set(Object(a.e)({id:Object(V.e)(Object(F.a)(o,Object(F.c)(t)),V.a.Status,r)}),n);else{var c=void 0,l=function(e,t){var n=t;return t instanceof Function&&(n=t(e)),n}(c=ne(i?{value:u.map((function(n){return e.get(Object(a.e)({id:Object(V.e)(Object(F.a)(n,Object(F.c)(t)),V.a.ValueIntercepter)}))}))}:{value:e.get(Object(a.e)({id:t}))},e.get(Object(a.e)({id:Object(V.e)(t,V.a.Status)}))),n),s=l.value,f=ae(l,["value"]),p=(c.value,ae(c,["value"]));if(l.hasOwnProperty("value")){u.forEach((function(n,r){e.set(Object(a.e)({id:Object(V.e)(Object(F.a)(n,Object(F.c)(t)),V.a.ValueIntercepter)}),i?function(e){return Array.isArray(s)&&s?s[e]:void 0}(r):s)}))}e.set(Object(a.e)({id:Object(V.e)(Object(F.a)(o,Object(F.c)(t)),V.a.Status,r)}),ne(ne({},p),f))}}catch(d){console.warn(d)}}};function me(e){var t=e.name,n=e.alias,r=e.get,o=e.set,a=ce(t),i=ue(e);return Object(c.b)({virtual:!0,id:Object(V.e)(a,V.a.Compute,n),get:r?function(e,t){var o=i(e),u=r(ne(ne({},e),{id:a,get:pe(e),preComputeValue:t.hasTask(Object(V.e)(a,V.a.Compute,n))?t.getTaskStateById(Object(V.e)(a,V.a.Compute,n)):null,mixedValueAndStatus:o}));return Object(l.b)(u)?u.then((function(e){return ne(ne({},o),e||{})})):ne(ne({},o),u||{})}:function(e){return i(e)},set:o?function(e,t,n){o(ne(ne({},e),{id:a,get:pe(e),set:de(e)}),t)}:function(e,t){de(e)(a,t,n)}})}var be,ve=n(196),ye=function(){return(ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},he=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ge=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Oe=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ge(arguments[t]));return e};function xe(e){return function(){var t=function(e){var t,n=e.children,r=e.formTypes,a=e.info,i=e.baseProps,u=e.componentProps,c=e.isLayout,l=e.id,s=r.type,f=r.componentType,p=a.visible,d=void 0===p||p,m=Object(ve.a)((function(e){i.onChange(e)}),n),b=L().formItemRenderComponents,v=b.WrapperComponent,y=b.TitleComponent,h=b.ContentComponent,g=ye(ye({},i),{arrayHelper:{mutators:m},componentProps:u}),O=L().components[f||s];"function"==typeof n?t=n(g):O?t=o.a.createElement(O,ye({},g),n):console.warn("xCompnent:"+f+", type: "+s+" not found!!!");var x=ye(ye({},a),{id:l,type:s,children:n});return o.a.createElement(o.a.Fragment,null,c?t:d&&o.a.createElement(v,ye({},x),o.a.createElement(y,ye({},x)),o.a.createElement(h,ye({},x),t)))};return{useLinkFormComputeState:function(e){return Object(b.j)(Object(a.e)({id:Object(V.e)(e,V.a.Compute)}))},useLinkFormStatusState:function(e){return Object(b.j)(Object(a.e)({id:Object(V.e)(e,V.a.Status)}))},useLinkFormValueState:function(e){return Object(b.j)(Object(a.e)({id:Object(V.e)(e,V.a.ValueIntercepter)}))},FormItem:function(e){var n=e.name,a=e.title,u=e.desc,l=e.tips,s=e.children,f=e.type,p=e.showTitle,h=e.tipsPosition,g=(e.alias,e.componentType),O=Object(r.useContext)(d.a).paths,x=Object(F.a)(n,O),j="layout"===f,w=ye(ye({},le(e)),{value:Object(v.c)(e)});!function(e){var t=Object(b.i)(),n=le(e),o=se(e);Object(r.useMemo)((function(){var e=t.getTaskStateById(o.getId());!t.hasTask(o.getId())&&e&&t.updateState(o.getId(),i.a.Update,i.d.TaskState,n)}),[])}(e);var S=ge(function(e){return Object(b.j)(me(e))}(e),2),E=S[0],C=S[1],k=Object(b.k)(function(e){var t=this,n=e.name,r=e.alias,o=e.title,a=e.rules,i=void 0===a?[]:a,u=e.validateFirst,l=e.emptyErrorMessage,s=ce(n),f=me(e),p=L();return Object(c.b)({virtual:!0,id:Object(V.e)(s,V.a.Error,r),get:function(e,n){return re(t,void 0,void 0,(function(){var t,n,a,c,d,m,b,v,y,h,g,O,x,j,w;return oe(this,(function(S){switch(S.label){case 0:return t=e.get(fe(s,r,p.autoValidate)),n=t.modify,a=t.autoValidate,c=e.get(f),n||a||u?[3,1]:[2,[]];case 1:d=!1,m=[],b=function(e){return z(e.value.value)?l||o+"\u4e0d\u80fd\u4e3a\u7a7a!":void 0},S.label=2;case 2:S.trys.push([2,7,8,9]),v=ie(c.require?i.concat([b]):i),y=v.next(),S.label=3;case 3:return y.done?[3,6]:(h=y.value,O=(g=m).push,[4,h({value:c,get:function(t){return"string"==typeof t&&e.get(fe(t,r,a)).modify&&(d=!0),pe(e)(t)},id:s})]);case 4:O.apply(g,[S.sent()]),S.label=5;case 5:return y=v.next(),[3,3];case 6:return[3,9];case 7:return x=S.sent(),j={error:x},[3,9];case 8:try{y&&!y.done&&(w=v.return)&&w.call(v)}finally{if(j)throw j.error}return[7];case 9:return d||n||u?[2,m.filter((function(e){return!z(e)}))]:[2,[]];case 10:return[2]}}))}))}})}(e)),R=E.status,T=E.errorMsg,P=E.content,I=void 0===P?w:P,A=I.visible,N=I.disabled,M=I.require,B=I.preview,q=I.value,J=I.componentProps,$=I.layoutExtends,_=void 0;R===i.c.Waiting||R===i.c.Running?_=y.b.Loading:i.c.Error===R&&(_=y.b.Error);var D=o.a.createElement(t,{id:x,isLayout:j,baseProps:{value:q,require:M,state:_,preview:B,disabled:N,onChange:function(e){var t=ye(ye({},E.content),{value:e});C(t)}},info:{showTitle:p,visible:A,title:a,desc:u,tipsPosition:h,tips:l,require:M,layoutExtends:$,formErrorMsg:k,errorMsg:T},formTypes:{type:f,componentType:g},componentProps:J||{}},s);return j?D:o.a.createElement(d.a.Provider,{value:{paths:Oe(O,[n])}},o.a.createElement(m.Provider,{value:{name:n}},D))},RdxFormRoot:function(t){var n=t.children,r=t.store,a=void 0===r?new Y({}):r,i=t.JsonView,c=t.autoValidate,l=void 0!==c&&c,s=t.enabledStatePreview,f=he(t,["children","store","JsonView","autoValidate","enabledStatePreview"]);return o.a.createElement(B.Provider,{value:{formItemRenderComponents:Object.assign({},j,e.formItemRenderComponents),components:e.components,autoValidate:l}},o.a.createElement(u.a,ye({},f,{context:b.a,withStore:function(e){a._initContext(e)},initializeState:a._initState,createStore:function(e){return new V.b(e)},onChange:function(){}}),n,s&&o.a.createElement(M,{JsonView:i})))},formCompute:function(e){return Object(c.b)(ye(ye({},e),{get:function(t,n){return e.get(ye(ye({},t),{get:pe(t)}))},set:function(t,n,r){return e.set(ye(ye({},t),{get:pe(t),set:de(t)}),n)},type:a.a.Compute}))},formComputeFamily:function(e){var t=e.id,n=e.get,r=e.set;return function(e){var o=t+"_computeFamily/"+p(e,{allowFunctions:!1});return new c.a({id:o,get:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n(e)(t[0])},set:r?function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r(e)(t[0],t[1])}:void 0})}},createValueAtom:function(e){return Object(a.e)({id:Object(V.e)(e,V.a.ValueIntercepter)})},createStatusAtom:function(e){return Object(a.e)({id:Object(V.e)(e,V.a.Status)})},createComputeAtom:function(e){return Object(a.e)({id:Object(V.e)(e,V.a.Compute)})},useValidator:function(){return H(Object(b.d)())},createFormStore:function(e){return new Y(e)}}}}!function(e){e.Relative="Relative",e.Absolute="Absolute"}(be||(be={}))}}]);